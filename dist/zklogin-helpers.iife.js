var SuiSDKZkLoginHelpers=(function(Vn){"use strict";const Mi=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function jn(c,t){if(!t||t==10)return BigInt(c);if(t==16)return c.slice(0,2)=="0x"?BigInt(c):BigInt("0x"+c)}const Ut=jn;function qi(c,t){let n=BigInt(0);t=BigInt(t);for(let o=0;o<c.length;o++)n=n*t+BigInt(c[o]);return n}function On(c){const t=c.toString(16);return(t.length-1)*4+Mi[parseInt(t[0],16)]}function No(c){return BigInt(c)<BigInt(0)}function Ko(c){return!c}function $n(c,t){return BigInt(c)<<BigInt(t)}function Cn(c,t){return BigInt(c)>>BigInt(t)}const Ui=$n,zi=Cn;function ao(c){return(BigInt(c)&BigInt(1))==BigInt(1)}function Di(c){let t=BigInt(c);const n=[];for(;t;){if(t&BigInt(1)){const o=2-Number(t%BigInt(4));n.push(o),t=t-BigInt(o)}else n.push(0);t=t>>BigInt(1)}return n}function Ho(c){let t=BigInt(c);const n=[];for(;t;)t&BigInt(1)?n.push(1):n.push(0),t=t>>BigInt(1);return n}function Vo(c){if(c>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("Number too big");return Number(c)}function ki(c,t){const n=[];let o=BigInt(c);for(t=BigInt(t);o;)n.unshift(Number(o%t)),o=o/t;return n}function io(c,t){return BigInt(c)+BigInt(t)}function nn(c,t){return BigInt(c)-BigInt(t)}function jo(c){return-BigInt(c)}function $o(c,t){return BigInt(c)*BigInt(t)}function Ti(c){return BigInt(c)*BigInt(c)}function Qn(c,t){return BigInt(c)**BigInt(t)}function Gi(c,t){return BigInt(c)**BigInt(t)}function Ri(c){return BigInt(c)>=0?BigInt(c):-BigInt(c)}function mn(c,t){return BigInt(c)/BigInt(t)}function Xt(c,t){return BigInt(c)%BigInt(t)}function Ln(c,t){return BigInt(c)==BigInt(t)}function Ni(c,t){return BigInt(c)!=BigInt(t)}function Ki(c,t){return BigInt(c)<BigInt(t)}function eo(c,t){return BigInt(c)>BigInt(t)}function Hi(c,t){return BigInt(c)<=BigInt(t)}function Yo(c,t){return BigInt(c)>=BigInt(t)}function co(c,t){return BigInt(c)&BigInt(t)}function Vi(c,t){return BigInt(c)|BigInt(t)}function ji(c,t){return BigInt(c)^BigInt(t)}function $i(c,t){return BigInt(c)&&BigInt(t)}function Yi(c,t){return BigInt(c)||BigInt(t)}function Zi(c){return!BigInt(c)}function Pn(c,t,n,o){const a="0000000"+n.toString(16),l=new Uint32Array(c.buffer,c.byteOffset+t,o/4),f=((a.length-7)*4-1>>5)+1;for(let u=0;u<f;u++)l[u]=parseInt(a.substring(a.length-8*u-8,a.length-8*u),16);for(let u=f;u<l.length;u++)l[u]=0;for(let u=l.length*4;u<o;u++)c[u]=Vo(co(Cn(n,u*8),255))}function Zo(c,t,n,o){const a="0000000"+n.toString(16),l=new DataView(c.buffer,c.byteOffset+t,o),f=((a.length-7)*4-1>>5)+1;for(let u=0;u<f;u++)l.setUint32(o-u*4-4,parseInt(a.substring(a.length-8*u-8,a.length-8*u),16),!1);for(let u=0;u<o/4-f;u++)l[u]=0}function Mn(c,t,n){n=n||c.byteLength,t=t||0;const o=new Uint32Array(c.buffer,c.byteOffset+t,n/4),a=new Array(n/4);return o.forEach((l,f)=>a[a.length-f-1]=l.toString(16).padStart(8,"0")),jn(a.join(""),16)}function Wo(c,t,n){n=n||c.byteLength,t=t||0;const o=new DataView(c.buffer,c.byteOffset+t,n),a=new Array(n/4);for(let l=0;l<n/4;l++)a[l]=o.getUint32(l*4,!1).toString(16).padStart(8,"0");return jn(a.join(""),16)}function Jo(c,t){return c.toString(t)}function wn(c){const t=new Uint8Array(Math.floor((On(c)-1)/8)+1);return Pn(t,0,c,t.byteLength),t}const Xo=Ut(0),pn=Ut(1);var Wi=Object.freeze({__proto__:null,abs:Ri,add:io,band:co,bitLength:On,bits:Ho,bor:Vi,bxor:ji,div:mn,e:Ut,eq:Ln,exp:Gi,fromArray:qi,fromRprBE:Wo,fromRprLE:Mn,fromString:jn,geq:Yo,gt:eo,isNegative:No,isOdd:ao,isZero:Ko,land:$i,leq:Hi,lnot:Zi,lor:Yi,lt:Ki,mod:Xt,mul:$o,naf:Di,neg:jo,neq:Ni,one:pn,pow:Qn,shiftLeft:$n,shiftRight:Cn,shl:Ui,shr:zi,square:Ti,sub:nn,toArray:ki,toLEBuff:wn,toNumber:Vo,toRprBE:Zo,toRprLE:Pn,toString:Jo,zero:Xo});function ta(c,t,n){if(Ko(n))return c.one;const o=Ho(n);if(o.length==0)return c.one;let a=t;for(let l=o.length-2;l>=0;l--)a=c.square(a),o[l]&&(a=c.mul(a,t));return a}function Ji(c){if(c.m%2==1)if(Ln(Xt(c.p,4),1))if(Ln(Xt(c.p,8),1))if(Ln(Xt(c.p,16),1))Xi(c);else if(Ln(Xt(c.p,16),9))te(c);else throw new Error("Field withot sqrt");else if(Ln(Xt(c.p,8),5))ne(c);else throw new Error("Field withot sqrt");else Ln(Xt(c.p,4),3)&&oe(c);else{const t=Xt(Qn(c.p,c.m/2),4);t==1?ae(c):t==3?ie(c):ee(c)}}function Xi(c){for(c.sqrt_q=Qn(c.p,c.m),c.sqrt_s=0,c.sqrt_t=nn(c.sqrt_q,1);!ao(c.sqrt_t);)c.sqrt_s=c.sqrt_s+1,c.sqrt_t=mn(c.sqrt_t,2);let t=c.one;for(;c.eq(t,c.one);){const n=c.random();c.sqrt_z=c.pow(n,c.sqrt_t),t=c.pow(c.sqrt_z,2**(c.sqrt_s-1))}c.sqrt_tm1d2=mn(nn(c.sqrt_t,1),2),c.sqrt=function(n){const o=this;if(o.isZero(n))return o.zero;let a=o.pow(n,o.sqrt_tm1d2);const l=o.pow(o.mul(o.square(a),n),2**(o.sqrt_s-1));if(o.eq(l,o.negone))return null;let f=o.sqrt_s,u=o.mul(n,a),y=o.mul(u,a),g=o.sqrt_z;for(;!o.eq(y,o.one);){let s=o.square(y),E=1;for(;!o.eq(s,o.one);)s=o.square(s),E++;a=g;for(let F=0;F<f-E-1;F++)a=o.square(a);g=o.square(a),y=o.mul(y,g),u=o.mul(u,a),f=E}return o.geq(u,o.zero)?u:o.neg(u)}}function te(c){c.sqrt=function(){throw new Error("Sqrt alg 4 not implemented")}}function ne(c){c.sqrt=function(){throw new Error("Sqrt alg 3 not implemented")}}function oe(c){c.sqrt_q=Qn(c.p,c.m),c.sqrt_e1=mn(nn(c.sqrt_q,3),4),c.sqrt=function(t){if(this.isZero(t))return this.zero;const n=this.pow(t,this.sqrt_e1),o=this.mul(this.square(n),t);if(this.eq(o,this.negone))return null;const a=this.mul(n,t);return c.geq(a,c.zero)?a:c.neg(a)}}function ae(c){c.sqrt=function(){throw new Error("Sqrt alg 10 not implemented")}}function ie(c){c.sqrt_q=Qn(c.p,c.m/2),c.sqrt_e34=mn(nn(c.sqrt_q,3),4),c.sqrt_e12=mn(nn(c.sqrt_q,1),2),c.frobenius=function(t,n){return t%2==1?c.conjugate(n):n},c.sqrt=function(t){const n=this,o=n.pow(t,n.sqrt_e34),a=n.mul(n.square(o),t),l=n.mul(n.frobenius(1,a),a);if(n.eq(l,n.negone))return null;const f=n.mul(o,t);let u;if(n.eq(a,n.negone))u=n.mul(f,[n.F.zero,n.F.one]);else{const y=n.pow(n.add(n.one,a),n.sqrt_e12);u=n.mul(y,f)}return n.geq(u,n.zero)?u:n.neg(u)}}function ee(c){c.sqrt=function(){throw new Error("Sqrt alg 8 not implemented")}}function rn(c,t,n,o,a){c[t]=c[t]+c[n]>>>0,c[a]=(c[a]^c[t])>>>0,c[a]=(c[a]<<16|c[a]>>>16&65535)>>>0,c[o]=c[o]+c[a]>>>0,c[n]=(c[n]^c[o])>>>0,c[n]=(c[n]<<12|c[n]>>>20&4095)>>>0,c[t]=c[t]+c[n]>>>0,c[a]=(c[a]^c[t])>>>0,c[a]=(c[a]<<8|c[a]>>>24&255)>>>0,c[o]=c[o]+c[a]>>>0,c[n]=(c[n]^c[o])>>>0,c[n]=(c[n]<<7|c[n]>>>25&127)>>>0}function ce(c){rn(c,0,4,8,12),rn(c,1,5,9,13),rn(c,2,6,10,14),rn(c,3,7,11,15),rn(c,0,5,10,15),rn(c,1,6,11,12),rn(c,2,7,8,13),rn(c,3,4,9,14)}class se{constructor(t){t=t||[0,0,0,0,0,0,0,0],this.state=[1634760805,857760878,2036477234,1797285236,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],0,0,0,0],this.idx=16,this.buff=new Array(16)}nextU32(){return this.idx==16&&this.update(),this.buff[this.idx++]}nextU64(){return io($o(this.nextU32(),4294967296),this.nextU32())}nextBool(){return(this.nextU32()&1)==1}update(){for(let t=0;t<16;t++)this.buff[t]=this.state[t];for(let t=0;t<10;t++)ce(this.buff);for(let t=0;t<16;t++)this.buff[t]=this.buff[t]+this.state[t]>>>0;this.idx=0,this.state[12]=this.state[12]+1>>>0,this.state[12]==0&&(this.state[13]=this.state[13]+1>>>0,this.state[13]==0&&(this.state[14]=this.state[14]+1>>>0,this.state[14]==0&&(this.state[15]=this.state[15]+1>>>0)))}}function na(c){let t=new Uint8Array(c);if(typeof globalThis.crypto<"u")globalThis.crypto.getRandomValues(t);else for(let n=0;n<c;n++)t[n]=Math.random()*4294967296>>>0;return t}function le(){const c=na(32),t=new Uint32Array(c.buffer),n=[];for(let o=0;o<8;o++)n.push(t[o]);return n}let Yn=null;function so(){return Yn||(Yn=new se(le()),Yn)}class re{constructor(t,n,o){this.F=n,this.G=t,this.opMulGF=o;let a=n.sqrt_t||n.t,l=n.sqrt_s||n.s,f=n.one;for(;n.eq(n.pow(f,n.half),n.one);)f=n.add(f,n.one);this.w=new Array(l+1),this.wi=new Array(l+1),this.w[l]=this.F.pow(f,a),this.wi[l]=this.F.inv(this.w[l]);let u=l-1;for(;u>=0;)this.w[u]=this.F.square(this.w[u+1]),this.wi[u]=this.F.square(this.wi[u+1]),u--;this.roots=[],this._setRoots(Math.min(l,15))}_setRoots(t){for(let n=t;n>=0&&!this.roots[n];n--){let o=this.F.one;const a=1<<n,l=new Array(a);for(let f=0;f<a;f++)l[f]=o,o=this.F.mul(o,this.w[n]);this.roots[n]=l}}fft(t){if(t.length<=1)return t;const n=oa(t.length-1)+1;this._setRoots(n);const o=1<<n;if(t.length!=o)throw new Error("Size must be multiple of 2");return Zn(this,t,n,0,1)}ifft(t){if(t.length<=1)return t;const n=oa(t.length-1)+1;this._setRoots(n);const o=1<<n;if(t.length!=o)throw new Error("Size must be multiple of 2");const a=Zn(this,t,n,0,1),l=this.F.inv(this.F.mulScalar(this.F.one,o)),f=new Array(o);for(let u=0;u<o;u++)f[u]=this.opMulGF(a[(o-u)%o],l);return f}}function oa(c){return((c&4294901760)!==0?(c&=4294901760,16):0)|((c&4278255360)!==0?(c&=4278255360,8):0)|((c&4042322160)!==0?(c&=4042322160,4):0)|((c&3435973836)!==0?(c&=3435973836,2):0)|(c&2863311530)!==0}function Zn(c,t,n,o,a){const l=1<<n;if(l==1)return[t[o]];if(l==2)return[c.G.add(t[o],t[o+a]),c.G.sub(t[o],t[o+a])];const f=l>>1,u=Zn(c,t,n-1,o,a*2),y=Zn(c,t,n-1,o+a,a*2),g=new Array(l);for(let s=0;s<f;s++)g[s]=c.G.add(u[s],c.opMulGF(y[s],c.roots[n][s])),g[s+f]=c.G.sub(u[s],c.opMulGF(y[s],c.roots[n][s]));return g}class de{constructor(t){this.type="F1",this.one=BigInt(1),this.zero=BigInt(0),this.p=BigInt(t),this.m=1,this.negone=this.p-this.one,this.two=BigInt(2),this.half=this.p>>this.one,this.bitLength=On(this.p),this.mask=(this.one<<BigInt(this.bitLength))-this.one,this.n64=Math.floor((this.bitLength-1)/64)+1,this.n32=this.n64*2,this.n8=this.n64*8,this.R=this.e(this.one<<BigInt(this.n64*64)),this.Ri=this.inv(this.R);const n=this.negone>>this.one;this.nqr=this.two;let o=this.pow(this.nqr,n);for(;!this.eq(o,this.negone);)this.nqr=this.nqr+this.one,o=this.pow(this.nqr,n);for(this.s=0,this.t=this.negone;(this.t&this.one)==this.zero;)this.s=this.s+1,this.t=this.t>>this.one;this.nqr_to_t=this.pow(this.nqr,this.t),Ji(this),this.FFT=new re(this,this,this.mul.bind(this)),this.fft=this.FFT.fft.bind(this.FFT),this.ifft=this.FFT.ifft.bind(this.FFT),this.w=this.FFT.w,this.wi=this.FFT.wi,this.shift=this.square(this.nqr),this.k=this.exp(this.nqr,2**this.s)}e(t,n){let o;if(n?n==16&&(o=BigInt("0x"+t)):o=BigInt(t),o<0){let a=-o;return a>=this.p&&(a=a%this.p),this.p-a}else return o>=this.p?o%this.p:o}add(t,n){const o=t+n;return o>=this.p?o-this.p:o}sub(t,n){return t>=n?t-n:this.p-n+t}neg(t){return t&&this.p-t}mul(t,n){return t*n%this.p}mulScalar(t,n){return t*this.e(n)%this.p}square(t){return t*t%this.p}eq(t,n){return t==n}neq(t,n){return t!=n}lt(t,n){const o=t>this.half?t-this.p:t,a=n>this.half?n-this.p:n;return o<a}gt(t,n){const o=t>this.half?t-this.p:t,a=n>this.half?n-this.p:n;return o>a}leq(t,n){const o=t>this.half?t-this.p:t,a=n>this.half?n-this.p:n;return o<=a}geq(t,n){const o=t>this.half?t-this.p:t,a=n>this.half?n-this.p:n;return o>=a}div(t,n){return this.mul(t,this.inv(n))}idiv(t,n){if(!n)throw new Error("Division by zero");return t/n}inv(t){if(!t)throw new Error("Division by zero");let n=this.zero,o=this.p,a=this.one,l=t%this.p;for(;l;){let f=o/l;[n,a]=[a,n-f*a],[o,l]=[l,o-f*l]}return n<this.zero&&(n+=this.p),n}mod(t,n){return t%n}pow(t,n){return ta(this,t,n)}exp(t,n){return ta(this,t,n)}band(t,n){const o=t&n&this.mask;return o>=this.p?o-this.p:o}bor(t,n){const o=(t|n)&this.mask;return o>=this.p?o-this.p:o}bxor(t,n){const o=(t^n)&this.mask;return o>=this.p?o-this.p:o}bnot(t){const n=t^this.mask;return n>=this.p?n-this.p:n}shl(t,n){if(Number(n)<this.bitLength){const o=t<<n&this.mask;return o>=this.p?o-this.p:o}else{const o=this.p-n;return Number(o)<this.bitLength?t>>o:this.zero}}shr(t,n){if(Number(n)<this.bitLength)return t>>n;{const o=this.p-n;if(Number(o)<this.bitLength){const a=t<<o&this.mask;return a>=this.p?a-this.p:a}else return 0}}land(t,n){return t&&n?this.one:this.zero}lor(t,n){return t||n?this.one:this.zero}lnot(t){return t?this.zero:this.one}sqrt_old(t){if(t==this.zero)return this.zero;if(this.pow(t,this.negone>>this.one)!=this.one)return null;let o=this.s,a=this.nqr_to_t,l=this.pow(t,this.t),f=this.pow(t,this.add(this.t,this.one)>>this.one);for(;l!=this.one;){let u=this.square(l),y=1;for(;u!=this.one;)y++,u=this.square(u);let g=a;for(let s=0;s<o-y-1;s++)g=this.square(g);o=y,a=this.square(g),l=this.mul(l,a),f=this.mul(f,g)}return f>this.p>>this.one&&(f=this.neg(f)),f}normalize(t,n){if(t=BigInt(t,n),t<0){let o=-t;return o>=this.p&&(o=o%this.p),this.p-o}else return t>=this.p?t%this.p:t}random(){const t=this.bitLength*2/8;let n=this.zero;for(let o=0;o<t;o++)n=(n<<BigInt(8))+BigInt(na(1)[0]);return n%this.p}toString(t,n){n=n||10;let o;return t>this.half&&n==10?o="-"+(this.p-t).toString(n):o=t.toString(n),o}isZero(t){return t==this.zero}fromRng(t){let n;do{n=this.zero;for(let o=0;o<this.n64;o++)n+=t.nextU64()<<BigInt(64*o);n&=this.mask}while(n>=this.p);return n=n*this.Ri%this.p,n}fft(t){return this.FFT.fft(t)}ifft(t){return this.FFT.ifft(t)}toRprLE(t,n,o){Pn(t,n,o,this.n64*8)}toRprBE(t,n,o){Zo(t,n,o,this.n64*8)}toRprBEM(t,n,o){return this.toRprBE(t,n,this.mul(this.R,o))}toRprLEM(t,n,o){return this.toRprLE(t,n,this.mul(this.R,o))}fromRprLE(t,n){return Mn(t,n,this.n8)}fromRprBE(t,n){return Wo(t,n,this.n8)}fromRprLEM(t,n){return this.mul(this.fromRprLE(t,n),this.Ri)}fromRprBEM(t,n){return this.mul(this.fromRprBE(t,n),this.Ri)}toObject(t){return t}}var dn={};dn.bigInt2BytesLE=function(t,n){const o=Array(n);let a=BigInt(t);for(let l=0;l<n;l++)o[l]=Number(a&0xFFn),a=a>>8n;return o},dn.bigInt2U32LE=function(t,n){const o=Array(n);let a=BigInt(t);for(let l=0;l<n;l++)o[l]=Number(a&0xFFFFFFFFn),a=a>>32n;return o},dn.isOcamNum=function(c){return!(!Array.isArray(c)||c.length!=3||typeof c[0]!="number"||typeof c[1]!="number"||!Array.isArray(c[2]))};var _e=function(t,n,o){const a=o||"int";if(t.modules[a])return a;t.modules[a]={};const l=n*2,f=n*8;function u(){const w=t.addFunction(a+"_copy");w.addParam("px","i32"),w.addParam("pr","i32");const _=w.getCodeBuilder();for(let p=0;p<n;p++)w.addCode(_.i64_store(_.getLocal("pr"),p*8,_.i64_load(_.getLocal("px"),p*8)))}function y(){const w=t.addFunction(a+"_zero");w.addParam("pr","i32");const _=w.getCodeBuilder();for(let p=0;p<n;p++)w.addCode(_.i64_store(_.getLocal("pr"),p*8,_.i64_const(0)))}function g(){const w=t.addFunction(a+"_one");w.addParam("pr","i32");const _=w.getCodeBuilder();w.addCode(_.i64_store(_.getLocal("pr"),0,_.i64_const(1)));for(let p=1;p<n;p++)w.addCode(_.i64_store(_.getLocal("pr"),p*8,_.i64_const(0)))}function s(){const w=t.addFunction(a+"_isZero");w.addParam("px","i32"),w.setReturnType("i32");const _=w.getCodeBuilder();function p(V){return V==0?_.ret(_.i64_eqz(_.i64_load(_.getLocal("px")))):_.if(_.i64_eqz(_.i64_load(_.getLocal("px"),V*8)),p(V-1),_.ret(_.i32_const(0)))}w.addCode(p(n-1)),w.addCode(_.ret(_.i32_const(0)))}function E(){const w=t.addFunction(a+"_eq");w.addParam("px","i32"),w.addParam("py","i32"),w.setReturnType("i32");const _=w.getCodeBuilder();function p(V){return V==0?_.ret(_.i64_eq(_.i64_load(_.getLocal("px")),_.i64_load(_.getLocal("py")))):_.if(_.i64_eq(_.i64_load(_.getLocal("px"),V*8),_.i64_load(_.getLocal("py"),V*8)),p(V-1),_.ret(_.i32_const(0)))}w.addCode(p(n-1)),w.addCode(_.ret(_.i32_const(0)))}function F(){const w=t.addFunction(a+"_gte");w.addParam("px","i32"),w.addParam("py","i32"),w.setReturnType("i32");const _=w.getCodeBuilder();function p(V){return V==0?_.ret(_.i64_ge_u(_.i64_load(_.getLocal("px")),_.i64_load(_.getLocal("py")))):_.if(_.i64_lt_u(_.i64_load(_.getLocal("px"),V*8),_.i64_load(_.getLocal("py"),V*8)),_.ret(_.i32_const(0)),_.if(_.i64_gt_u(_.i64_load(_.getLocal("px"),V*8),_.i64_load(_.getLocal("py"),V*8)),_.ret(_.i32_const(1)),p(V-1)))}w.addCode(p(n-1)),w.addCode(_.ret(_.i32_const(0)))}function A(){const w=t.addFunction(a+"_add");w.addParam("x","i32"),w.addParam("y","i32"),w.addParam("r","i32"),w.setReturnType("i32"),w.addLocal("c","i64");const _=w.getCodeBuilder();w.addCode(_.setLocal("c",_.i64_add(_.i64_load32_u(_.getLocal("x")),_.i64_load32_u(_.getLocal("y"))))),w.addCode(_.i64_store32(_.getLocal("r"),_.getLocal("c")));for(let p=1;p<l;p++)w.addCode(_.setLocal("c",_.i64_add(_.i64_add(_.i64_load32_u(_.getLocal("x"),4*p),_.i64_load32_u(_.getLocal("y"),4*p)),_.i64_shr_u(_.getLocal("c"),_.i64_const(32))))),w.addCode(_.i64_store32(_.getLocal("r"),p*4,_.getLocal("c")));w.addCode(_.i32_wrap_i64(_.i64_shr_u(_.getLocal("c"),_.i64_const(32))))}function D(){const w=t.addFunction(a+"_sub");w.addParam("x","i32"),w.addParam("y","i32"),w.addParam("r","i32"),w.setReturnType("i32"),w.addLocal("c","i64");const _=w.getCodeBuilder();w.addCode(_.setLocal("c",_.i64_sub(_.i64_load32_u(_.getLocal("x")),_.i64_load32_u(_.getLocal("y"))))),w.addCode(_.i64_store32(_.getLocal("r"),_.i64_and(_.getLocal("c"),_.i64_const("0xFFFFFFFF"))));for(let p=1;p<l;p++)w.addCode(_.setLocal("c",_.i64_add(_.i64_sub(_.i64_load32_u(_.getLocal("x"),4*p),_.i64_load32_u(_.getLocal("y"),4*p)),_.i64_shr_s(_.getLocal("c"),_.i64_const(32))))),w.addCode(_.i64_store32(_.getLocal("r"),p*4,_.i64_and(_.getLocal("c"),_.i64_const("0xFFFFFFFF"))));w.addCode(_.i32_wrap_i64(_.i64_shr_s(_.getLocal("c"),_.i64_const(32))))}function k(){const w=t.addFunction(a+"_mul");w.addParam("x","i32"),w.addParam("y","i32"),w.addParam("r","i32"),w.addLocal("c0","i64"),w.addLocal("c1","i64");for(let b=0;b<l;b++)w.addLocal("x"+b,"i64"),w.addLocal("y"+b,"i64");const _=w.getCodeBuilder(),p=[],V=[];function $(b,x){let z,ot;return p[b]?z=_.getLocal("x"+b):(z=_.teeLocal("x"+b,_.i64_load32_u(_.getLocal("x"),b*4)),p[b]=!0),V[x]?ot=_.getLocal("y"+x):(ot=_.teeLocal("y"+x,_.i64_load32_u(_.getLocal("y"),x*4)),V[x]=!0),_.i64_mul(z,ot)}let X="c0",Q="c1";for(let b=0;b<l*2-1;b++){for(let x=Math.max(0,b-l+1);x<=b&&x<l;x++){const z=b-x;w.addCode(_.setLocal(X,_.i64_add(_.i64_and(_.getLocal(X),_.i64_const(4294967295)),$(x,z)))),w.addCode(_.setLocal(Q,_.i64_add(_.getLocal(Q),_.i64_shr_u(_.getLocal(X),_.i64_const(32)))))}w.addCode(_.i64_store32(_.getLocal("r"),b*4,_.getLocal(X))),[X,Q]=[Q,X],w.addCode(_.setLocal(Q,_.i64_shr_u(_.getLocal(X),_.i64_const(32))))}w.addCode(_.i64_store32(_.getLocal("r"),l*4*2-4,_.getLocal(X)))}function B(){const w=t.addFunction(a+"_square");w.addParam("x","i32"),w.addParam("r","i32"),w.addLocal("c0","i64"),w.addLocal("c1","i64"),w.addLocal("c0_old","i64"),w.addLocal("c1_old","i64");for(let x=0;x<l;x++)w.addLocal("x"+x,"i64");const _=w.getCodeBuilder(),p=[];function V(x,z){let ot,tt;return p[x]?ot=_.getLocal("x"+x):(ot=_.teeLocal("x"+x,_.i64_load32_u(_.getLocal("x"),x*4)),p[x]=!0),p[z]?tt=_.getLocal("x"+z):(tt=_.teeLocal("x"+z,_.i64_load32_u(_.getLocal("x"),z*4)),p[z]=!0),_.i64_mul(ot,tt)}let $="c0",X="c1",Q="c0_old",b="c1_old";for(let x=0;x<l*2-1;x++){w.addCode(_.setLocal($,_.i64_const(0)),_.setLocal(X,_.i64_const(0)));for(let z=Math.max(0,x-l+1);z<x+1>>1&&z<l;z++){const ot=x-z;w.addCode(_.setLocal($,_.i64_add(_.i64_and(_.getLocal($),_.i64_const(4294967295)),V(z,ot)))),w.addCode(_.setLocal(X,_.i64_add(_.getLocal(X),_.i64_shr_u(_.getLocal($),_.i64_const(32)))))}w.addCode(_.setLocal($,_.i64_shl(_.i64_and(_.getLocal($),_.i64_const(4294967295)),_.i64_const(1)))),w.addCode(_.setLocal(X,_.i64_add(_.i64_shl(_.getLocal(X),_.i64_const(1)),_.i64_shr_u(_.getLocal($),_.i64_const(32))))),x%2==0&&(w.addCode(_.setLocal($,_.i64_add(_.i64_and(_.getLocal($),_.i64_const(4294967295)),V(x>>1,x>>1)))),w.addCode(_.setLocal(X,_.i64_add(_.getLocal(X),_.i64_shr_u(_.getLocal($),_.i64_const(32)))))),x>0&&(w.addCode(_.setLocal($,_.i64_add(_.i64_and(_.getLocal($),_.i64_const(4294967295)),_.i64_and(_.getLocal(Q),_.i64_const(4294967295))))),w.addCode(_.setLocal(X,_.i64_add(_.i64_add(_.getLocal(X),_.i64_shr_u(_.getLocal($),_.i64_const(32))),_.getLocal(b))))),w.addCode(_.i64_store32(_.getLocal("r"),x*4,_.getLocal($))),w.addCode(_.setLocal(Q,_.getLocal(X)),_.setLocal(b,_.i64_shr_u(_.getLocal(Q),_.i64_const(32))))}w.addCode(_.i64_store32(_.getLocal("r"),l*4*2-4,_.getLocal(Q)))}function G(){const w=t.addFunction(a+"_squareOld");w.addParam("x","i32"),w.addParam("r","i32");const _=w.getCodeBuilder();w.addCode(_.call(a+"_mul",_.getLocal("x"),_.getLocal("x"),_.getLocal("r")))}function S(){const w=t.addFunction(a+"__mul1");w.addParam("px","i32"),w.addParam("y","i64"),w.addParam("pr","i32"),w.addLocal("c","i64");const _=w.getCodeBuilder();w.addCode(_.setLocal("c",_.i64_mul(_.i64_load32_u(_.getLocal("px"),0,0),_.getLocal("y")))),w.addCode(_.i64_store32(_.getLocal("pr"),0,0,_.getLocal("c")));for(let p=1;p<l;p++)w.addCode(_.setLocal("c",_.i64_add(_.i64_mul(_.i64_load32_u(_.getLocal("px"),4*p,0),_.getLocal("y")),_.i64_shr_u(_.getLocal("c"),_.i64_const(32))))),w.addCode(_.i64_store32(_.getLocal("pr"),p*4,0,_.getLocal("c")))}function st(){const w=t.addFunction(a+"__add1");w.addParam("x","i32"),w.addParam("y","i64"),w.addLocal("c","i64"),w.addLocal("px","i32");const _=w.getCodeBuilder();w.addCode(_.setLocal("px",_.getLocal("x"))),w.addCode(_.setLocal("c",_.i64_add(_.i64_load32_u(_.getLocal("px"),0,0),_.getLocal("y")))),w.addCode(_.i64_store32(_.getLocal("px"),0,0,_.getLocal("c"))),w.addCode(_.setLocal("c",_.i64_shr_u(_.getLocal("c"),_.i64_const(32)))),w.addCode(_.block(_.loop(_.br_if(1,_.i64_eqz(_.getLocal("c"))),_.setLocal("px",_.i32_add(_.getLocal("px"),_.i32_const(4))),_.setLocal("c",_.i64_add(_.i64_load32_u(_.getLocal("px"),0,0),_.getLocal("c"))),_.i64_store32(_.getLocal("px"),0,0,_.getLocal("c")),_.setLocal("c",_.i64_shr_u(_.getLocal("c"),_.i64_const(32))),_.br(0))))}function U(){S(),st();const w=t.addFunction(a+"_div");w.addParam("x","i32"),w.addParam("y","i32"),w.addParam("c","i32"),w.addParam("r","i32"),w.addLocal("rr","i32"),w.addLocal("cc","i32"),w.addLocal("eX","i32"),w.addLocal("eY","i32"),w.addLocal("sy","i64"),w.addLocal("sx","i64"),w.addLocal("ec","i32");const _=w.getCodeBuilder(),p=_.i32_const(t.alloc(f)),V=_.i32_const(t.alloc(f)),$=_.i32_const(t.alloc(f)),X=_.getLocal("cc"),Q=_.getLocal("rr"),b=t.alloc(f*2),x=_.i32_const(b),z=_.i32_const(b+f);w.addCode(_.if(_.getLocal("c"),_.setLocal("cc",_.getLocal("c")),_.setLocal("cc",V))),w.addCode(_.if(_.getLocal("r"),_.setLocal("rr",_.getLocal("r")),_.setLocal("rr",$))),w.addCode(_.call(a+"_copy",_.getLocal("x"),Q)),w.addCode(_.call(a+"_copy",_.getLocal("y"),p)),w.addCode(_.call(a+"_zero",X)),w.addCode(_.call(a+"_zero",x)),w.addCode(_.setLocal("eX",_.i32_const(f-1))),w.addCode(_.setLocal("eY",_.i32_const(f-1))),w.addCode(_.block(_.loop(_.br_if(1,_.i32_or(_.i32_load8_u(_.i32_add(p,_.getLocal("eY")),0,0),_.i32_eq(_.getLocal("eY"),_.i32_const(3)))),_.setLocal("eY",_.i32_sub(_.getLocal("eY"),_.i32_const(1))),_.br(0)))),w.addCode(_.setLocal("sy",_.i64_add(_.i64_load32_u(_.i32_sub(_.i32_add(p,_.getLocal("eY")),_.i32_const(3)),0,0),_.i64_const(1)))),w.addCode(_.if(_.i64_eq(_.getLocal("sy"),_.i64_const(1)),_.drop(_.i64_div_u(_.i64_const(0),_.i64_const(0))))),w.addCode(_.block(_.loop(_.block(_.loop(_.br_if(1,_.i32_or(_.i32_load8_u(_.i32_add(Q,_.getLocal("eX")),0,0),_.i32_eq(_.getLocal("eX"),_.i32_const(7)))),_.setLocal("eX",_.i32_sub(_.getLocal("eX"),_.i32_const(1))),_.br(0))),_.setLocal("sx",_.i64_load(_.i32_sub(_.i32_add(Q,_.getLocal("eX")),_.i32_const(7)),0,0)),_.setLocal("sx",_.i64_div_u(_.getLocal("sx"),_.getLocal("sy"))),_.setLocal("ec",_.i32_sub(_.i32_sub(_.getLocal("eX"),_.getLocal("eY")),_.i32_const(4))),_.block(_.loop(_.br_if(1,_.i32_and(_.i64_eqz(_.i64_and(_.getLocal("sx"),_.i64_const("0xFFFFFFFF00000000"))),_.i32_ge_s(_.getLocal("ec"),_.i32_const(0)))),_.setLocal("sx",_.i64_shr_u(_.getLocal("sx"),_.i64_const(8))),_.setLocal("ec",_.i32_add(_.getLocal("ec"),_.i32_const(1))),_.br(0))),_.if(_.i64_eqz(_.getLocal("sx")),[..._.br_if(2,_.i32_eqz(_.call(a+"_gte",Q,p))),..._.setLocal("sx",_.i64_const(1)),..._.setLocal("ec",_.i32_const(0))]),_.call(a+"__mul1",p,_.getLocal("sx"),z),_.drop(_.call(a+"_sub",Q,_.i32_sub(z,_.getLocal("ec")),Q)),_.call(a+"__add1",_.i32_add(X,_.getLocal("ec")),_.getLocal("sx")),_.br(0))))}function lt(){const w=t.addFunction(a+"_inverseMod");w.addParam("px","i32"),w.addParam("pm","i32"),w.addParam("pr","i32"),w.addLocal("t","i32"),w.addLocal("newt","i32"),w.addLocal("r","i32"),w.addLocal("qq","i32"),w.addLocal("qr","i32"),w.addLocal("newr","i32"),w.addLocal("swp","i32"),w.addLocal("x","i32"),w.addLocal("signt","i32"),w.addLocal("signnewt","i32"),w.addLocal("signx","i32");const _=w.getCodeBuilder(),p=_.i32_const(t.alloc(f)),V=_.i32_const(t.alloc(f)),$=_.i32_const(t.alloc(f)),X=_.i32_const(t.alloc(f)),Q=_.i32_const(t.alloc(f)),b=_.i32_const(t.alloc(f)),x=_.i32_const(t.alloc(f*2)),z=_.i32_const(t.alloc(f));w.addCode(_.setLocal("t",p),_.call(a+"_zero",p),_.setLocal("signt",_.i32_const(0))),w.addCode(_.setLocal("r",V),_.call(a+"_copy",_.getLocal("pm"),V)),w.addCode(_.setLocal("newt",$),_.call(a+"_one",$),_.setLocal("signnewt",_.i32_const(0))),w.addCode(_.setLocal("newr",X),_.call(a+"_copy",_.getLocal("px"),X)),w.addCode(_.setLocal("qq",Q)),w.addCode(_.setLocal("qr",b)),w.addCode(_.setLocal("x",z)),w.addCode(_.block(_.loop(_.br_if(1,_.call(a+"_isZero",_.getLocal("newr"))),_.call(a+"_div",_.getLocal("r"),_.getLocal("newr"),_.getLocal("qq"),_.getLocal("qr")),_.call(a+"_mul",_.getLocal("qq"),_.getLocal("newt"),x),_.if(_.getLocal("signt"),_.if(_.getLocal("signnewt"),_.if(_.call(a+"_gte",x,_.getLocal("t")),[..._.drop(_.call(a+"_sub",x,_.getLocal("t"),_.getLocal("x"))),..._.setLocal("signx",_.i32_const(0))],[..._.drop(_.call(a+"_sub",_.getLocal("t"),x,_.getLocal("x"))),..._.setLocal("signx",_.i32_const(1))]),[..._.drop(_.call(a+"_add",x,_.getLocal("t"),_.getLocal("x"))),..._.setLocal("signx",_.i32_const(1))]),_.if(_.getLocal("signnewt"),[..._.drop(_.call(a+"_add",x,_.getLocal("t"),_.getLocal("x"))),..._.setLocal("signx",_.i32_const(0))],_.if(_.call(a+"_gte",_.getLocal("t"),x),[..._.drop(_.call(a+"_sub",_.getLocal("t"),x,_.getLocal("x"))),..._.setLocal("signx",_.i32_const(0))],[..._.drop(_.call(a+"_sub",x,_.getLocal("t"),_.getLocal("x"))),..._.setLocal("signx",_.i32_const(1))]))),_.setLocal("swp",_.getLocal("t")),_.setLocal("t",_.getLocal("newt")),_.setLocal("newt",_.getLocal("x")),_.setLocal("x",_.getLocal("swp")),_.setLocal("signt",_.getLocal("signnewt")),_.setLocal("signnewt",_.getLocal("signx")),_.setLocal("swp",_.getLocal("r")),_.setLocal("r",_.getLocal("newr")),_.setLocal("newr",_.getLocal("qr")),_.setLocal("qr",_.getLocal("swp")),_.br(0)))),w.addCode(_.if(_.getLocal("signt"),_.drop(_.call(a+"_sub",_.getLocal("pm"),_.getLocal("t"),_.getLocal("pr"))),_.call(a+"_copy",_.getLocal("t"),_.getLocal("pr"))))}return u(),y(),s(),g(),E(),F(),A(),D(),k(),B(),G(),U(),lt(),t.exportFunction(a+"_copy"),t.exportFunction(a+"_zero"),t.exportFunction(a+"_one"),t.exportFunction(a+"_isZero"),t.exportFunction(a+"_eq"),t.exportFunction(a+"_gte"),t.exportFunction(a+"_add"),t.exportFunction(a+"_sub"),t.exportFunction(a+"_mul"),t.exportFunction(a+"_square"),t.exportFunction(a+"_squareOld"),t.exportFunction(a+"_div"),t.exportFunction(a+"_inverseMod"),a},lo=function(t,n,o,a,l,f,u){const y=t.addFunction(n);y.addParam("base","i32"),y.addParam("scalar","i32"),y.addParam("scalarLength","i32"),y.addParam("r","i32"),y.addLocal("i","i32"),y.addLocal("b","i32");const g=y.getCodeBuilder(),s=g.i32_const(t.alloc(o));y.addCode(g.if(g.i32_eqz(g.getLocal("scalarLength")),[...g.call(u,g.getLocal("r")),...g.ret([])])),y.addCode(g.call(f,g.getLocal("base"),s)),y.addCode(g.call(u,g.getLocal("r"))),y.addCode(g.setLocal("i",g.getLocal("scalarLength"))),y.addCode(g.block(g.loop(g.setLocal("i",g.i32_sub(g.getLocal("i"),g.i32_const(1))),g.setLocal("b",g.i32_load8_u(g.i32_add(g.getLocal("scalar"),g.getLocal("i")))),...E(),g.br_if(1,g.i32_eqz(g.getLocal("i"))),g.br(0))));function E(){const F=[];for(let A=0;A<8;A++)F.push(...g.call(l,g.getLocal("r"),g.getLocal("r")),...g.if(g.i32_ge_u(g.getLocal("b"),g.i32_const(128>>A)),[...g.setLocal("b",g.i32_sub(g.getLocal("b"),g.i32_const(128>>A))),...g.call(a,g.getLocal("r"),s,g.getLocal("r"))]));return F}},ro=ge;function ge(c,t){const n=c.modules[t].n64*8,o=c.addFunction(t+"_batchInverse");o.addParam("pIn","i32"),o.addParam("inStep","i32"),o.addParam("n","i32"),o.addParam("pOut","i32"),o.addParam("outStep","i32"),o.addLocal("itAux","i32"),o.addLocal("itIn","i32"),o.addLocal("itOut","i32"),o.addLocal("i","i32");const a=o.getCodeBuilder(),l=a.i32_const(c.alloc(n));o.addCode(a.setLocal("itAux",a.i32_load(a.i32_const(0))),a.i32_store(a.i32_const(0),a.i32_add(a.getLocal("itAux"),a.i32_mul(a.i32_add(a.getLocal("n"),a.i32_const(1)),a.i32_const(n))))),o.addCode(a.call(t+"_one",a.getLocal("itAux")),a.setLocal("itIn",a.getLocal("pIn")),a.setLocal("itAux",a.i32_add(a.getLocal("itAux"),a.i32_const(n))),a.setLocal("i",a.i32_const(0)),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("i"),a.getLocal("n"))),a.if(a.call(t+"_isZero",a.getLocal("itIn")),a.call(t+"_copy",a.i32_sub(a.getLocal("itAux"),a.i32_const(n)),a.getLocal("itAux")),a.call(t+"_mul",a.getLocal("itIn"),a.i32_sub(a.getLocal("itAux"),a.i32_const(n)),a.getLocal("itAux"))),a.setLocal("itIn",a.i32_add(a.getLocal("itIn"),a.getLocal("inStep"))),a.setLocal("itAux",a.i32_add(a.getLocal("itAux"),a.i32_const(n))),a.setLocal("i",a.i32_add(a.getLocal("i"),a.i32_const(1))),a.br(0))),a.setLocal("itIn",a.i32_sub(a.getLocal("itIn"),a.getLocal("inStep"))),a.setLocal("itAux",a.i32_sub(a.getLocal("itAux"),a.i32_const(n))),a.setLocal("itOut",a.i32_add(a.getLocal("pOut"),a.i32_mul(a.i32_sub(a.getLocal("n"),a.i32_const(1)),a.getLocal("outStep")))),a.call(t+"_inverse",a.getLocal("itAux"),a.getLocal("itAux")),a.block(a.loop(a.br_if(1,a.i32_eqz(a.getLocal("i"))),a.if(a.call(t+"_isZero",a.getLocal("itIn")),[...a.call(t+"_copy",a.getLocal("itAux"),a.i32_sub(a.getLocal("itAux"),a.i32_const(n))),...a.call(t+"_zero",a.getLocal("itOut"))],[...a.call(t+"_copy",a.i32_sub(a.getLocal("itAux"),a.i32_const(n)),l),...a.call(t+"_mul",a.getLocal("itAux"),a.getLocal("itIn"),a.i32_sub(a.getLocal("itAux"),a.i32_const(n))),...a.call(t+"_mul",a.getLocal("itAux"),l,a.getLocal("itOut"))]),a.setLocal("itIn",a.i32_sub(a.getLocal("itIn"),a.getLocal("inStep"))),a.setLocal("itOut",a.i32_sub(a.getLocal("itOut"),a.getLocal("outStep"))),a.setLocal("itAux",a.i32_sub(a.getLocal("itAux"),a.i32_const(n))),a.setLocal("i",a.i32_sub(a.getLocal("i"),a.i32_const(1))),a.br(0)))),o.addCode(a.i32_store(a.i32_const(0),a.getLocal("itAux")))}var aa=ue;function ue(c,t,n,o,a,l){typeof l>"u"&&(o<a?l=!0:l=!1);const f=c.addFunction(t);f.addParam("pIn","i32"),f.addParam("n","i32"),f.addParam("pOut","i32"),f.addLocal("i","i32"),f.addLocal("itIn","i32"),f.addLocal("itOut","i32");const u=f.getCodeBuilder();l?f.addCode(u.setLocal("itIn",u.i32_add(u.getLocal("pIn"),u.i32_mul(u.i32_sub(u.getLocal("n"),u.i32_const(1)),u.i32_const(o)))),u.setLocal("itOut",u.i32_add(u.getLocal("pOut"),u.i32_mul(u.i32_sub(u.getLocal("n"),u.i32_const(1)),u.i32_const(a)))),u.setLocal("i",u.i32_const(0)),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("i"),u.getLocal("n"))),u.call(n,u.getLocal("itIn"),u.getLocal("itOut")),u.setLocal("itIn",u.i32_sub(u.getLocal("itIn"),u.i32_const(o))),u.setLocal("itOut",u.i32_sub(u.getLocal("itOut"),u.i32_const(a))),u.setLocal("i",u.i32_add(u.getLocal("i"),u.i32_const(1))),u.br(0)))):f.addCode(u.setLocal("itIn",u.getLocal("pIn")),u.setLocal("itOut",u.getLocal("pOut")),u.setLocal("i",u.i32_const(0)),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("i"),u.getLocal("n"))),u.call(n,u.getLocal("itIn"),u.getLocal("itOut")),u.setLocal("itIn",u.i32_add(u.getLocal("itIn"),u.i32_const(o))),u.setLocal("itOut",u.i32_add(u.getLocal("itOut"),u.i32_const(a))),u.setLocal("i",u.i32_add(u.getLocal("i"),u.i32_const(1))),u.br(0))))}var he=fe;function fe(c,t,n,o,a,l){typeof l>"u"&&(o<a?l=!0:l=!1);const f=c.addFunction(t);f.addParam("pIn1","i32"),f.addParam("pIn2","i32"),f.addParam("n","i32"),f.addParam("pOut","i32"),f.addLocal("i","i32"),f.addLocal("itIn1","i32"),f.addLocal("itIn2","i32"),f.addLocal("itOut","i32");const u=f.getCodeBuilder();l?f.addCode(u.setLocal("itIn1",u.i32_add(u.getLocal("pIn1"),u.i32_mul(u.i32_sub(u.getLocal("n"),u.i32_const(1)),u.i32_const(o)))),u.setLocal("itIn2",u.i32_add(u.getLocal("pIn2"),u.i32_mul(u.i32_sub(u.getLocal("n"),u.i32_const(1)),u.i32_const(o)))),u.setLocal("itOut",u.i32_add(u.getLocal("pOut"),u.i32_mul(u.i32_sub(u.getLocal("n"),u.i32_const(1)),u.i32_const(a)))),u.setLocal("i",u.i32_const(0)),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("i"),u.getLocal("n"))),u.call(n,u.getLocal("itIn1"),u.getLocal("itIn2"),u.getLocal("itOut")),u.setLocal("itIn1",u.i32_sub(u.getLocal("itIn1"),u.i32_const(o))),u.setLocal("itIn2",u.i32_sub(u.getLocal("itIn2"),u.i32_const(o))),u.setLocal("itOut",u.i32_sub(u.getLocal("itOut"),u.i32_const(a))),u.setLocal("i",u.i32_add(u.getLocal("i"),u.i32_const(1))),u.br(0)))):f.addCode(u.setLocal("itIn1",u.getLocal("pIn1")),u.setLocal("itIn2",u.getLocal("pIn2")),u.setLocal("itOut",u.getLocal("pOut")),u.setLocal("i",u.i32_const(0)),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("i"),u.getLocal("n"))),u.call(n,u.getLocal("itIn1"),u.getLocal("itIn2"),u.getLocal("itOut")),u.setLocal("itIn1",u.i32_add(u.getLocal("itIn1"),u.i32_const(o))),u.setLocal("itIn2",u.i32_add(u.getLocal("itIn2"),u.i32_const(o))),u.setLocal("itOut",u.i32_add(u.getLocal("itOut"),u.i32_const(a))),u.setLocal("i",u.i32_add(u.getLocal("i"),u.i32_const(1))),u.br(0))))}var Nt={};function ia(c,t){return c===t?0:c>t?1:-1}function _o(c){return c*c}function ea(c){return c%2n!==0n}function go(c){return c%2n===0n}function Wn(c){return c<0n}function Le(c){return c>0n}function ca(c){return Wn(c)?c.toString(2).length-1:c.toString(2).length}function qn(c){return c<0n?-c:c}function Bn(c){return qn(c)===1n}function sa(c,t){for(var n=0n,o=1n,a=t,l=qn(c),f,u,y;l!==0n;)f=a/l,u=n,y=a,n=o,a=l,o=u-f*o,l=y-f*l;if(!Bn(a))throw new Error(c.toString()+" and "+t.toString()+" are not co-prime");return ia(n,0n)===-1&&(n=n+t),Wn(c)?-n:n}function la(c,t,n){if(n===0n)throw new Error("Cannot take modPow with modulus 0");var o=1n,a=c%n;for(Wn(t)&&(t=t*-1n,a=sa(a,n));Le(t);){if(a===0n)return 0n;ea(t)&&(o=o*a%n),t=t/2n,a=_o(a)%n}return o}function pe(c,t){return c=c>=0n?c:-c,t=t>=0n?t:-t,c===t?0:c>t?1:-1}function ra(c,t){return t===0n?!1:Bn(t)?!0:pe(t,2n)===0?go(c):c%t===0n}function Ae(c){var t=qn(c);if(Bn(t))return!1;if(t===2n||t===3n||t===5n)return!0;if(go(t)||ra(t,3n)||ra(t,5n))return!1;if(t<49n)return!0}function be(c){return c-1n}function da(c,t){for(var n=be(c),o=n,a=0,l,f,u;go(o);)o=o/2n,a++;t:for(f=0;f<t.length;f++)if(!(c<t[f])&&(u=la(BigInt(t[f]),o,c),!(Bn(u)||u===n))){for(l=a-1;l!=0;l--){if(u=_o(u)%c,Bn(u))return!1;if(u===n)continue t}return!1}return!0}function Ie(c){var t=Ae(c);if(t!==void 0)return t;var n=qn(c),o=ca(n);if(o<=64)return da(n,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var a=Math.log(2)*Number(o),l=Math.ceil(a),f=[],u=0;u<l;u++)f.push(BigInt(u+2));return da(n,f)}Nt.bitLength=ca,Nt.isOdd=ea,Nt.isNegative=Wn,Nt.abs=qn,Nt.isUnit=Bn,Nt.compare=ia,Nt.modInv=sa,Nt.modPow=la,Nt.isPrime=Ie,Nt.square=_o;const ye=_e,on=dn,Ce=lo,me=ro,uo=aa,ho=he,{bitLength:we,modInv:fo,modPow:_a,isPrime:ga,isOdd:Be,square:Ee}=Nt;var Lo=function(t,n,o,a){const l=BigInt(n),f=Math.floor((we(l-1n)-1)/64)+1,u=f*2,y=f*8,g=o||"f1m";if(t.modules[g])return g;const s=ye(t,f,a),E=t.alloc(y,on.bigInt2BytesLE(l,y)),F=t.alloc(on.bigInt2BytesLE(Ee(1n<<BigInt(f*64))%l,y)),A=t.alloc(on.bigInt2BytesLE((1n<<BigInt(f*64))%l,y)),D=t.alloc(on.bigInt2BytesLE(0n,y)),k=l-1n,B=k>>1n,G=t.alloc(y,on.bigInt2BytesLE(B,y)),S=B+1n,st=t.alloc(y,on.bigInt2BytesLE(S,y));t.modules[g]={pq:E,pR2:F,n64:f,q:l,pOne:A,pZero:D,pePlusOne:st};function U(){const I=t.addFunction(g+"_one");I.addParam("pr","i32");const h=I.getCodeBuilder();I.addCode(h.call(s+"_copy",h.i32_const(A),h.getLocal("pr")))}function lt(){const I=t.addFunction(g+"_add");I.addParam("x","i32"),I.addParam("y","i32"),I.addParam("r","i32");const h=I.getCodeBuilder();I.addCode(h.if(h.call(s+"_add",h.getLocal("x"),h.getLocal("y"),h.getLocal("r")),h.drop(h.call(s+"_sub",h.getLocal("r"),h.i32_const(E),h.getLocal("r"))),h.if(h.call(s+"_gte",h.getLocal("r"),h.i32_const(E)),h.drop(h.call(s+"_sub",h.getLocal("r"),h.i32_const(E),h.getLocal("r"))))))}function w(){const I=t.addFunction(g+"_sub");I.addParam("x","i32"),I.addParam("y","i32"),I.addParam("r","i32");const h=I.getCodeBuilder();I.addCode(h.if(h.call(s+"_sub",h.getLocal("x"),h.getLocal("y"),h.getLocal("r")),h.drop(h.call(s+"_add",h.getLocal("r"),h.i32_const(E),h.getLocal("r")))))}function _(){const I=t.addFunction(g+"_neg");I.addParam("x","i32"),I.addParam("r","i32");const h=I.getCodeBuilder();I.addCode(h.call(g+"_sub",h.i32_const(D),h.getLocal("x"),h.getLocal("r")))}function p(){const I=t.addFunction(g+"_isNegative");I.addParam("x","i32"),I.setReturnType("i32");const h=I.getCodeBuilder(),v=h.i32_const(t.alloc(y));I.addCode(h.call(g+"_fromMontgomery",h.getLocal("x"),v),h.call(s+"_gte",v,h.i32_const(st)))}function V(){const I=t.addFunction(g+"_sign");I.addParam("x","i32"),I.setReturnType("i32");const h=I.getCodeBuilder(),v=h.i32_const(t.alloc(y));I.addCode(h.if(h.call(s+"_isZero",h.getLocal("x")),h.ret(h.i32_const(0))),h.call(g+"_fromMontgomery",h.getLocal("x"),v),h.if(h.call(s+"_gte",v,h.i32_const(st)),h.ret(h.i32_const(-1))),h.ret(h.i32_const(1)))}function $(){const I=t.alloc(u*u*8),h=t.addFunction(g+"_mReduct");h.addParam("t","i32"),h.addParam("r","i32"),h.addLocal("np32","i64"),h.addLocal("c","i64"),h.addLocal("m","i64");const v=h.getCodeBuilder(),J=Number(0x100000000n-fo(l,0x100000000n));h.addCode(v.setLocal("np32",v.i64_const(J)));for(let R=0;R<u;R++){h.addCode(v.setLocal("c",v.i64_const(0))),h.addCode(v.setLocal("m",v.i64_and(v.i64_mul(v.i64_load32_u(v.getLocal("t"),R*4),v.getLocal("np32")),v.i64_const("0xFFFFFFFF"))));for(let at=0;at<u;at++)h.addCode(v.setLocal("c",v.i64_add(v.i64_add(v.i64_load32_u(v.getLocal("t"),(R+at)*4),v.i64_shr_u(v.getLocal("c"),v.i64_const(32))),v.i64_mul(v.i64_load32_u(v.i32_const(E),at*4),v.getLocal("m"))))),h.addCode(v.i64_store32(v.getLocal("t"),(R+at)*4,v.getLocal("c")));h.addCode(v.i64_store32(v.i32_const(I),R*4,v.i64_shr_u(v.getLocal("c"),v.i64_const(32))))}h.addCode(v.call(g+"_add",v.i32_const(I),v.i32_add(v.getLocal("t"),v.i32_const(u*4)),v.getLocal("r")))}function X(){const I=t.addFunction(g+"_mul");I.addParam("x","i32"),I.addParam("y","i32"),I.addParam("r","i32"),I.addLocal("c0","i64"),I.addLocal("c1","i64"),I.addLocal("np32","i64");for(let gt=0;gt<u;gt++)I.addLocal("x"+gt,"i64"),I.addLocal("y"+gt,"i64"),I.addLocal("m"+gt,"i64"),I.addLocal("q"+gt,"i64");const h=I.getCodeBuilder(),v=Number(0x100000000n-fo(l,0x100000000n));I.addCode(h.setLocal("np32",h.i64_const(v)));const J=[],R=[],at=[];function It(gt,rt){let bt,xt;return J[gt]?bt=h.getLocal("x"+gt):(bt=h.teeLocal("x"+gt,h.i64_load32_u(h.getLocal("x"),gt*4)),J[gt]=!0),R[rt]?xt=h.getLocal("y"+rt):(xt=h.teeLocal("y"+rt,h.i64_load32_u(h.getLocal("y"),rt*4)),R[rt]=!0),h.i64_mul(bt,xt)}function dt(gt,rt){let bt,xt;return at[gt]?bt=h.getLocal("q"+gt):(bt=h.teeLocal("q"+gt,h.i64_load32_u(h.i32_const(0),E+gt*4)),at[gt]=!0),xt=h.getLocal("m"+rt),h.i64_mul(bt,xt)}let Lt="c0",St="c1";for(let gt=0;gt<u*2-1;gt++){for(let rt=Math.max(0,gt-u+1);rt<=gt&&rt<u;rt++){const bt=gt-rt;I.addCode(h.setLocal(Lt,h.i64_add(h.i64_and(h.getLocal(Lt),h.i64_const(4294967295)),It(rt,bt)))),I.addCode(h.setLocal(St,h.i64_add(h.getLocal(St),h.i64_shr_u(h.getLocal(Lt),h.i64_const(32)))))}for(let rt=Math.max(1,gt-u+1);rt<=gt&&rt<u;rt++){const bt=gt-rt;I.addCode(h.setLocal(Lt,h.i64_add(h.i64_and(h.getLocal(Lt),h.i64_const(4294967295)),dt(rt,bt)))),I.addCode(h.setLocal(St,h.i64_add(h.getLocal(St),h.i64_shr_u(h.getLocal(Lt),h.i64_const(32)))))}gt<u&&(I.addCode(h.setLocal("m"+gt,h.i64_and(h.i64_mul(h.i64_and(h.getLocal(Lt),h.i64_const(4294967295)),h.getLocal("np32")),h.i64_const("0xFFFFFFFF")))),I.addCode(h.setLocal(Lt,h.i64_add(h.i64_and(h.getLocal(Lt),h.i64_const(4294967295)),dt(0,gt)))),I.addCode(h.setLocal(St,h.i64_add(h.getLocal(St),h.i64_shr_u(h.getLocal(Lt),h.i64_const(32)))))),gt>=u&&I.addCode(h.i64_store32(h.getLocal("r"),(gt-u)*4,h.getLocal(Lt))),[Lt,St]=[St,Lt],I.addCode(h.setLocal(St,h.i64_shr_u(h.getLocal(Lt),h.i64_const(32))))}I.addCode(h.i64_store32(h.getLocal("r"),u*4-4,h.getLocal(Lt))),I.addCode(h.if(h.i32_wrap_i64(h.getLocal(St)),h.drop(h.call(s+"_sub",h.getLocal("r"),h.i32_const(E),h.getLocal("r"))),h.if(h.call(s+"_gte",h.getLocal("r"),h.i32_const(E)),h.drop(h.call(s+"_sub",h.getLocal("r"),h.i32_const(E),h.getLocal("r"))))))}function Q(){const I=t.addFunction(g+"_square");I.addParam("x","i32"),I.addParam("r","i32"),I.addLocal("c0","i64"),I.addLocal("c1","i64"),I.addLocal("c0_old","i64"),I.addLocal("c1_old","i64"),I.addLocal("np32","i64");for(let rt=0;rt<u;rt++)I.addLocal("x"+rt,"i64"),I.addLocal("m"+rt,"i64"),I.addLocal("q"+rt,"i64");const h=I.getCodeBuilder(),v=Number(0x100000000n-fo(l,0x100000000n));I.addCode(h.setLocal("np32",h.i64_const(v)));const J=[],R=[];function at(rt,bt){let xt,Mt;return J[rt]?xt=h.getLocal("x"+rt):(xt=h.teeLocal("x"+rt,h.i64_load32_u(h.getLocal("x"),rt*4)),J[rt]=!0),J[bt]?Mt=h.getLocal("x"+bt):(Mt=h.teeLocal("x"+bt,h.i64_load32_u(h.getLocal("x"),bt*4)),J[bt]=!0),h.i64_mul(xt,Mt)}function It(rt,bt){let xt,Mt;return R[rt]?xt=h.getLocal("q"+rt):(xt=h.teeLocal("q"+rt,h.i64_load32_u(h.i32_const(0),E+rt*4)),R[rt]=!0),Mt=h.getLocal("m"+bt),h.i64_mul(xt,Mt)}let dt="c0",Lt="c1",St="c0_old",gt="c1_old";for(let rt=0;rt<u*2-1;rt++){I.addCode(h.setLocal(dt,h.i64_const(0)),h.setLocal(Lt,h.i64_const(0)));for(let bt=Math.max(0,rt-u+1);bt<rt+1>>1&&bt<u;bt++){const xt=rt-bt;I.addCode(h.setLocal(dt,h.i64_add(h.i64_and(h.getLocal(dt),h.i64_const(4294967295)),at(bt,xt)))),I.addCode(h.setLocal(Lt,h.i64_add(h.getLocal(Lt),h.i64_shr_u(h.getLocal(dt),h.i64_const(32)))))}I.addCode(h.setLocal(dt,h.i64_shl(h.i64_and(h.getLocal(dt),h.i64_const(4294967295)),h.i64_const(1)))),I.addCode(h.setLocal(Lt,h.i64_add(h.i64_shl(h.getLocal(Lt),h.i64_const(1)),h.i64_shr_u(h.getLocal(dt),h.i64_const(32))))),rt%2==0&&(I.addCode(h.setLocal(dt,h.i64_add(h.i64_and(h.getLocal(dt),h.i64_const(4294967295)),at(rt>>1,rt>>1)))),I.addCode(h.setLocal(Lt,h.i64_add(h.getLocal(Lt),h.i64_shr_u(h.getLocal(dt),h.i64_const(32)))))),rt>0&&(I.addCode(h.setLocal(dt,h.i64_add(h.i64_and(h.getLocal(dt),h.i64_const(4294967295)),h.i64_and(h.getLocal(St),h.i64_const(4294967295))))),I.addCode(h.setLocal(Lt,h.i64_add(h.i64_add(h.getLocal(Lt),h.i64_shr_u(h.getLocal(dt),h.i64_const(32))),h.getLocal(gt)))));for(let bt=Math.max(1,rt-u+1);bt<=rt&&bt<u;bt++){const xt=rt-bt;I.addCode(h.setLocal(dt,h.i64_add(h.i64_and(h.getLocal(dt),h.i64_const(4294967295)),It(bt,xt)))),I.addCode(h.setLocal(Lt,h.i64_add(h.getLocal(Lt),h.i64_shr_u(h.getLocal(dt),h.i64_const(32)))))}rt<u&&(I.addCode(h.setLocal("m"+rt,h.i64_and(h.i64_mul(h.i64_and(h.getLocal(dt),h.i64_const(4294967295)),h.getLocal("np32")),h.i64_const("0xFFFFFFFF")))),I.addCode(h.setLocal(dt,h.i64_add(h.i64_and(h.getLocal(dt),h.i64_const(4294967295)),It(0,rt)))),I.addCode(h.setLocal(Lt,h.i64_add(h.getLocal(Lt),h.i64_shr_u(h.getLocal(dt),h.i64_const(32)))))),rt>=u&&I.addCode(h.i64_store32(h.getLocal("r"),(rt-u)*4,h.getLocal(dt))),I.addCode(h.setLocal(St,h.getLocal(Lt)),h.setLocal(gt,h.i64_shr_u(h.getLocal(St),h.i64_const(32))))}I.addCode(h.i64_store32(h.getLocal("r"),u*4-4,h.getLocal(St))),I.addCode(h.if(h.i32_wrap_i64(h.getLocal(gt)),h.drop(h.call(s+"_sub",h.getLocal("r"),h.i32_const(E),h.getLocal("r"))),h.if(h.call(s+"_gte",h.getLocal("r"),h.i32_const(E)),h.drop(h.call(s+"_sub",h.getLocal("r"),h.i32_const(E),h.getLocal("r"))))))}function b(){const I=t.addFunction(g+"_squareOld");I.addParam("x","i32"),I.addParam("r","i32");const h=I.getCodeBuilder();I.addCode(h.call(g+"_mul",h.getLocal("x"),h.getLocal("x"),h.getLocal("r")))}function x(){const I=t.addFunction(g+"_toMontgomery");I.addParam("x","i32"),I.addParam("r","i32");const h=I.getCodeBuilder();I.addCode(h.call(g+"_mul",h.getLocal("x"),h.i32_const(F),h.getLocal("r")))}function z(){const I=t.alloc(y*2),h=t.addFunction(g+"_fromMontgomery");h.addParam("x","i32"),h.addParam("r","i32");const v=h.getCodeBuilder();h.addCode(v.call(s+"_copy",v.getLocal("x"),v.i32_const(I))),h.addCode(v.call(s+"_zero",v.i32_const(I+y))),h.addCode(v.call(g+"_mReduct",v.i32_const(I),v.getLocal("r")))}function ot(){const I=t.addFunction(g+"_inverse");I.addParam("x","i32"),I.addParam("r","i32");const h=I.getCodeBuilder();I.addCode(h.call(g+"_fromMontgomery",h.getLocal("x"),h.getLocal("r"))),I.addCode(h.call(s+"_inverseMod",h.getLocal("r"),h.i32_const(E),h.getLocal("r"))),I.addCode(h.call(g+"_toMontgomery",h.getLocal("r"),h.getLocal("r")))}let tt=2n;if(ga(l))for(;_a(tt,B,l)!==k;)tt=tt+1n;let K=0,it=k;for(;!Be(it)&&it!==0n;)K++,it=it>>1n;const W=t.alloc(y,on.bigInt2BytesLE(it,y)),et=_a(tt,it,l),pt=t.alloc(on.bigInt2BytesLE((et<<BigInt(f*64))%l,y)),wt=it+1n>>1n,ft=t.alloc(y,on.bigInt2BytesLE(wt,y));function L(){const I=t.addFunction(g+"_sqrt");I.addParam("n","i32"),I.addParam("r","i32"),I.addLocal("m","i32"),I.addLocal("i","i32"),I.addLocal("j","i32");const h=I.getCodeBuilder(),v=h.i32_const(A),J=h.i32_const(t.alloc(y)),R=h.i32_const(t.alloc(y)),at=h.i32_const(t.alloc(y)),It=h.i32_const(t.alloc(y)),dt=h.i32_const(t.alloc(y));I.addCode(h.if(h.call(g+"_isZero",h.getLocal("n")),h.ret(h.call(g+"_zero",h.getLocal("r")))),h.setLocal("m",h.i32_const(K)),h.call(g+"_copy",h.i32_const(pt),J),h.call(g+"_exp",h.getLocal("n"),h.i32_const(W),h.i32_const(y),R),h.call(g+"_exp",h.getLocal("n"),h.i32_const(ft),h.i32_const(y),at),h.block(h.loop(h.br_if(1,h.call(g+"_eq",R,v)),h.call(g+"_square",R,It),h.setLocal("i",h.i32_const(1)),h.block(h.loop(h.br_if(1,h.call(g+"_eq",It,v)),h.call(g+"_square",It,It),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))),h.call(g+"_copy",J,dt),h.setLocal("j",h.i32_sub(h.i32_sub(h.getLocal("m"),h.getLocal("i")),h.i32_const(1))),h.block(h.loop(h.br_if(1,h.i32_eqz(h.getLocal("j"))),h.call(g+"_square",dt,dt),h.setLocal("j",h.i32_sub(h.getLocal("j"),h.i32_const(1))),h.br(0))),h.setLocal("m",h.getLocal("i")),h.call(g+"_square",dt,J),h.call(g+"_mul",R,J,R),h.call(g+"_mul",at,dt,at),h.br(0))),h.if(h.call(g+"_isNegative",at),h.call(g+"_neg",at,h.getLocal("r")),h.call(g+"_copy",at,h.getLocal("r"))))}function i(){const I=t.addFunction(g+"_isSquare");I.addParam("n","i32"),I.setReturnType("i32");const h=I.getCodeBuilder(),v=h.i32_const(A),J=h.i32_const(t.alloc(y));I.addCode(h.if(h.call(g+"_isZero",h.getLocal("n")),h.ret(h.i32_const(1))),h.call(g+"_exp",h.getLocal("n"),h.i32_const(G),h.i32_const(y),J),h.call(g+"_eq",J,v))}function C(){const I=t.addFunction(g+"_load");I.addParam("scalar","i32"),I.addParam("scalarLen","i32"),I.addParam("r","i32"),I.addLocal("p","i32"),I.addLocal("l","i32"),I.addLocal("i","i32"),I.addLocal("j","i32");const h=I.getCodeBuilder(),v=h.i32_const(t.alloc(y)),J=t.alloc(y),R=h.i32_const(J);I.addCode(h.call(s+"_zero",h.getLocal("r")),h.setLocal("i",h.i32_const(y)),h.setLocal("p",h.getLocal("scalar")),h.block(h.loop(h.br_if(1,h.i32_gt_u(h.getLocal("i"),h.getLocal("scalarLen"))),h.if(h.i32_eq(h.getLocal("i"),h.i32_const(y)),h.call(g+"_one",v),h.call(g+"_mul",v,h.i32_const(F),v)),h.call(g+"_mul",h.getLocal("p"),v,R),h.call(g+"_add",h.getLocal("r"),R,h.getLocal("r")),h.setLocal("p",h.i32_add(h.getLocal("p"),h.i32_const(y))),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(y))),h.br(0))),h.setLocal("l",h.i32_rem_u(h.getLocal("scalarLen"),h.i32_const(y))),h.if(h.i32_eqz(h.getLocal("l")),h.ret([])),h.call(s+"_zero",R),h.setLocal("j",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("j"),h.getLocal("l"))),h.i32_store8(h.getLocal("j"),J,h.i32_load8_u(h.getLocal("p"))),h.setLocal("p",h.i32_add(h.getLocal("p"),h.i32_const(1))),h.setLocal("j",h.i32_add(h.getLocal("j"),h.i32_const(1))),h.br(0))),h.if(h.i32_eq(h.getLocal("i"),h.i32_const(y)),h.call(g+"_one",v),h.call(g+"_mul",v,h.i32_const(F),v)),h.call(g+"_mul",R,v,R),h.call(g+"_add",h.getLocal("r"),R,h.getLocal("r")))}function e(){const I=t.addFunction(g+"_timesScalar");I.addParam("x","i32"),I.addParam("scalar","i32"),I.addParam("scalarLen","i32"),I.addParam("r","i32");const h=I.getCodeBuilder(),v=h.i32_const(t.alloc(y));I.addCode(h.call(g+"_load",h.getLocal("scalar"),h.getLocal("scalarLen"),v),h.call(g+"_toMontgomery",v,v),h.call(g+"_mul",h.getLocal("x"),v,h.getLocal("r")))}function m(){const I=t.addFunction(g+"_isOne");I.addParam("x","i32"),I.setReturnType("i32");const h=I.getCodeBuilder();I.addCode(h.ret(h.call(s+"_eq",h.getLocal("x"),h.i32_const(A))))}return t.exportFunction(s+"_copy",g+"_copy"),t.exportFunction(s+"_zero",g+"_zero"),t.exportFunction(s+"_isZero",g+"_isZero"),t.exportFunction(s+"_eq",g+"_eq"),m(),lt(),w(),_(),$(),X(),Q(),b(),x(),z(),p(),V(),ot(),U(),C(),e(),me(t,g),uo(t,g+"_batchToMontgomery",g+"_toMontgomery",y,y),uo(t,g+"_batchFromMontgomery",g+"_fromMontgomery",y,y),uo(t,g+"_batchNeg",g+"_neg",y,y),ho(t,g+"_batchAdd",g+"_add",y,y),ho(t,g+"_batchSub",g+"_sub",y,y),ho(t,g+"_batchMul",g+"_mul",y,y),t.exportFunction(g+"_add"),t.exportFunction(g+"_sub"),t.exportFunction(g+"_neg"),t.exportFunction(g+"_isNegative"),t.exportFunction(g+"_isOne"),t.exportFunction(g+"_sign"),t.exportFunction(g+"_mReduct"),t.exportFunction(g+"_mul"),t.exportFunction(g+"_square"),t.exportFunction(g+"_squareOld"),t.exportFunction(g+"_fromMontgomery"),t.exportFunction(g+"_toMontgomery"),t.exportFunction(g+"_inverse"),t.exportFunction(g+"_one"),t.exportFunction(g+"_load"),t.exportFunction(g+"_timesScalar"),Ce(t,g+"_exp",y,g+"_mul",g+"_square",s+"_copy",g+"_one"),t.exportFunction(g+"_exp"),t.exportFunction(g+"_batchInverse"),ga(l)&&(L(),i(),t.exportFunction(g+"_sqrt"),t.exportFunction(g+"_isSquare")),t.exportFunction(g+"_batchToMontgomery"),t.exportFunction(g+"_batchFromMontgomery"),g};const Fe=Lo,{bitLength:Se}=Nt;var ua=function(t,n,o,a,l){const f=BigInt(n),u=Math.floor((Se(f-1n)-1)/64)+1,y=u*8,g=o||"f1";if(t.modules[g])return g;t.modules[g]={n64:u};const s=l||"int",E=Fe(t,f,a,s),F=t.modules[E].pR2,A=t.modules[E].pq,D=t.modules[E].pePlusOne;function k(){const st=t.alloc(y),U=t.addFunction(g+"_mul");U.addParam("x","i32"),U.addParam("y","i32"),U.addParam("r","i32");const lt=U.getCodeBuilder();U.addCode(lt.call(E+"_mul",lt.getLocal("x"),lt.getLocal("y"),lt.i32_const(st))),U.addCode(lt.call(E+"_mul",lt.i32_const(st),lt.i32_const(F),lt.getLocal("r")))}function B(){const st=t.addFunction(g+"_square");st.addParam("x","i32"),st.addParam("r","i32");const U=st.getCodeBuilder();st.addCode(U.call(g+"_mul",U.getLocal("x"),U.getLocal("x"),U.getLocal("r")))}function G(){const st=t.addFunction(g+"_inverse");st.addParam("x","i32"),st.addParam("r","i32");const U=st.getCodeBuilder();st.addCode(U.call(s+"_inverseMod",U.getLocal("x"),U.i32_const(A),U.getLocal("r")))}function S(){const st=t.addFunction(g+"_isNegative");st.addParam("x","i32"),st.setReturnType("i32");const U=st.getCodeBuilder();st.addCode(U.call(s+"_gte",U.getLocal("x"),U.i32_const(D)))}return k(),B(),G(),S(),t.exportFunction(E+"_add",g+"_add"),t.exportFunction(E+"_sub",g+"_sub"),t.exportFunction(E+"_neg",g+"_neg"),t.exportFunction(g+"_mul"),t.exportFunction(g+"_square"),t.exportFunction(g+"_inverse"),t.exportFunction(g+"_isNegative"),t.exportFunction(E+"_copy",g+"_copy"),t.exportFunction(E+"_zero",g+"_zero"),t.exportFunction(E+"_one",g+"_one"),t.exportFunction(E+"_isZero",g+"_isZero"),t.exportFunction(E+"_eq",g+"_eq"),g};const ve=lo,xe=ro,po=dn;var ha=function(t,n,o,a){if(t.modules[o])return o;const l=t.modules[a].n64*8,f=t.modules[a].q;t.modules[o]={n64:t.modules[a].n64*2};function u(){const Q=t.addFunction(o+"_add");Q.addParam("x","i32"),Q.addParam("y","i32"),Q.addParam("r","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l)),ot=b.getLocal("y"),tt=b.i32_add(b.getLocal("y"),b.i32_const(l)),K=b.getLocal("r"),it=b.i32_add(b.getLocal("r"),b.i32_const(l));Q.addCode(b.call(a+"_add",x,ot,K),b.call(a+"_add",z,tt,it))}function y(){const Q=t.addFunction(o+"_timesScalar");Q.addParam("x","i32"),Q.addParam("scalar","i32"),Q.addParam("scalarLen","i32"),Q.addParam("r","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l)),ot=b.getLocal("r"),tt=b.i32_add(b.getLocal("r"),b.i32_const(l));Q.addCode(b.call(a+"_timesScalar",x,b.getLocal("scalar"),b.getLocal("scalarLen"),ot),b.call(a+"_timesScalar",z,b.getLocal("scalar"),b.getLocal("scalarLen"),tt))}function g(){const Q=t.addFunction(o+"_sub");Q.addParam("x","i32"),Q.addParam("y","i32"),Q.addParam("r","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l)),ot=b.getLocal("y"),tt=b.i32_add(b.getLocal("y"),b.i32_const(l)),K=b.getLocal("r"),it=b.i32_add(b.getLocal("r"),b.i32_const(l));Q.addCode(b.call(a+"_sub",x,ot,K),b.call(a+"_sub",z,tt,it))}function s(){const Q=t.addFunction(o+"_neg");Q.addParam("x","i32"),Q.addParam("r","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l)),ot=b.getLocal("r"),tt=b.i32_add(b.getLocal("r"),b.i32_const(l));Q.addCode(b.call(a+"_neg",x,ot),b.call(a+"_neg",z,tt))}function E(){const Q=t.addFunction(o+"_conjugate");Q.addParam("x","i32"),Q.addParam("r","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l)),ot=b.getLocal("r"),tt=b.i32_add(b.getLocal("r"),b.i32_const(l));Q.addCode(b.call(a+"_copy",x,ot),b.call(a+"_neg",z,tt))}function F(){const Q=t.addFunction(o+"_isNegative");Q.addParam("x","i32"),Q.setReturnType("i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l));Q.addCode(b.if(b.call(a+"_isZero",z),b.ret(b.call(a+"_isNegative",x))),b.ret(b.call(a+"_isNegative",z)))}function A(){const Q=t.addFunction(o+"_mul");Q.addParam("x","i32"),Q.addParam("y","i32"),Q.addParam("r","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l)),ot=b.getLocal("y"),tt=b.i32_add(b.getLocal("y"),b.i32_const(l)),K=b.getLocal("r"),it=b.i32_add(b.getLocal("r"),b.i32_const(l)),W=b.i32_const(t.alloc(l)),et=b.i32_const(t.alloc(l)),pt=b.i32_const(t.alloc(l)),wt=b.i32_const(t.alloc(l));Q.addCode(b.call(a+"_mul",x,ot,W),b.call(a+"_mul",z,tt,et),b.call(a+"_add",x,z,pt),b.call(a+"_add",ot,tt,wt),b.call(a+"_mul",pt,wt,pt),b.call(n,et,K),b.call(a+"_add",W,K,K),b.call(a+"_add",W,et,it),b.call(a+"_sub",pt,it,it))}function D(){const Q=t.addFunction(o+"_mul1");Q.addParam("x","i32"),Q.addParam("y","i32"),Q.addParam("r","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l)),ot=b.getLocal("y"),tt=b.getLocal("r"),K=b.i32_add(b.getLocal("r"),b.i32_const(l));Q.addCode(b.call(a+"_mul",x,ot,tt),b.call(a+"_mul",z,ot,K))}function k(){const Q=t.addFunction(o+"_square");Q.addParam("x","i32"),Q.addParam("r","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l)),ot=b.getLocal("r"),tt=b.i32_add(b.getLocal("r"),b.i32_const(l)),K=b.i32_const(t.alloc(l)),it=b.i32_const(t.alloc(l)),W=b.i32_const(t.alloc(l)),et=b.i32_const(t.alloc(l));Q.addCode(b.call(a+"_mul",x,z,K),b.call(a+"_add",x,z,it),b.call(n,z,W),b.call(a+"_add",x,W,W),b.call(n,K,et),b.call(a+"_add",et,K,et),b.call(a+"_mul",it,W,ot),b.call(a+"_sub",ot,et,ot),b.call(a+"_add",K,K,tt))}function B(){const Q=t.addFunction(o+"_toMontgomery");Q.addParam("x","i32"),Q.addParam("r","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l)),ot=b.getLocal("r"),tt=b.i32_add(b.getLocal("r"),b.i32_const(l));Q.addCode(b.call(a+"_toMontgomery",x,ot),b.call(a+"_toMontgomery",z,tt))}function G(){const Q=t.addFunction(o+"_fromMontgomery");Q.addParam("x","i32"),Q.addParam("r","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l)),ot=b.getLocal("r"),tt=b.i32_add(b.getLocal("r"),b.i32_const(l));Q.addCode(b.call(a+"_fromMontgomery",x,ot),b.call(a+"_fromMontgomery",z,tt))}function S(){const Q=t.addFunction(o+"_copy");Q.addParam("x","i32"),Q.addParam("r","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l)),ot=b.getLocal("r"),tt=b.i32_add(b.getLocal("r"),b.i32_const(l));Q.addCode(b.call(a+"_copy",x,ot),b.call(a+"_copy",z,tt))}function st(){const Q=t.addFunction(o+"_zero");Q.addParam("x","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l));Q.addCode(b.call(a+"_zero",x),b.call(a+"_zero",z))}function U(){const Q=t.addFunction(o+"_one");Q.addParam("x","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l));Q.addCode(b.call(a+"_one",x),b.call(a+"_zero",z))}function lt(){const Q=t.addFunction(o+"_eq");Q.addParam("x","i32"),Q.addParam("y","i32"),Q.setReturnType("i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l)),ot=b.getLocal("y"),tt=b.i32_add(b.getLocal("y"),b.i32_const(l));Q.addCode(b.i32_and(b.call(a+"_eq",x,ot),b.call(a+"_eq",z,tt)))}function w(){const Q=t.addFunction(o+"_isZero");Q.addParam("x","i32"),Q.setReturnType("i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l));Q.addCode(b.i32_and(b.call(a+"_isZero",x),b.call(a+"_isZero",z)))}function _(){const Q=t.addFunction(o+"_inverse");Q.addParam("x","i32"),Q.addParam("r","i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l)),ot=b.getLocal("r"),tt=b.i32_add(b.getLocal("r"),b.i32_const(l)),K=b.i32_const(t.alloc(l)),it=b.i32_const(t.alloc(l)),W=b.i32_const(t.alloc(l)),et=b.i32_const(t.alloc(l));Q.addCode(b.call(a+"_square",x,K),b.call(a+"_square",z,it),b.call(n,it,W),b.call(a+"_sub",K,W,W),b.call(a+"_inverse",W,et),b.call(a+"_mul",x,et,ot),b.call(a+"_mul",z,et,tt),b.call(a+"_neg",tt,tt))}function p(){const Q=t.addFunction(o+"_sign");Q.addParam("x","i32"),Q.addLocal("s","i32"),Q.setReturnType("i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l));Q.addCode(b.setLocal("s",b.call(a+"_sign",z)),b.if(b.getLocal("s"),b.ret(b.getLocal("s"))),b.ret(b.call(a+"_sign",x)))}function V(){const Q=t.addFunction(o+"_isOne");Q.addParam("x","i32"),Q.setReturnType("i32");const b=Q.getCodeBuilder(),x=b.getLocal("x"),z=b.i32_add(b.getLocal("x"),b.i32_const(l));Q.addCode(b.ret(b.i32_and(b.call(a+"_isOne",x),b.call(a+"_isZero",z))))}function $(){const Q=t.addFunction(o+"_sqrt");Q.addParam("a","i32"),Q.addParam("pr","i32");const b=Q.getCodeBuilder(),x=b.i32_const(t.alloc(po.bigInt2BytesLE((BigInt(f||0)-3n)/4n,l))),z=b.i32_const(t.alloc(po.bigInt2BytesLE((BigInt(f||0)-1n)/2n,l))),ot=b.getLocal("a"),tt=b.i32_const(t.alloc(l*2)),K=b.i32_const(t.alloc(l*2)),it=b.i32_const(t.alloc(l*2)),W=t.alloc(l*2),et=b.i32_const(W),pt=b.i32_const(W),wt=b.i32_const(W+l),ft=b.i32_const(t.alloc(l*2)),L=b.i32_const(t.alloc(l*2));Q.addCode(b.call(o+"_one",et),b.call(o+"_neg",et,et),b.call(o+"_exp",ot,x,b.i32_const(l),tt),b.call(o+"_square",tt,K),b.call(o+"_mul",ot,K,K),b.call(o+"_conjugate",K,it),b.call(o+"_mul",it,K,it),b.if(b.call(o+"_eq",it,et),b.unreachable()),b.call(o+"_mul",tt,ot,ft),b.if(b.call(o+"_eq",K,et),[...b.call(a+"_zero",pt),...b.call(a+"_one",wt),...b.call(o+"_mul",et,ft,b.getLocal("pr"))],[...b.call(o+"_one",L),...b.call(o+"_add",L,K,L),...b.call(o+"_exp",L,z,b.i32_const(l),L),...b.call(o+"_mul",L,ft,b.getLocal("pr"))]))}function X(){const Q=t.addFunction(o+"_isSquare");Q.addParam("a","i32"),Q.setReturnType("i32");const b=Q.getCodeBuilder(),x=b.i32_const(t.alloc(po.bigInt2BytesLE((BigInt(f||0)-3n)/4n,l))),z=b.getLocal("a"),ot=b.i32_const(t.alloc(l*2)),tt=b.i32_const(t.alloc(l*2)),K=b.i32_const(t.alloc(l*2)),it=t.alloc(l*2),W=b.i32_const(it);Q.addCode(b.call(o+"_one",W),b.call(o+"_neg",W,W),b.call(o+"_exp",z,x,b.i32_const(l),ot),b.call(o+"_square",ot,tt),b.call(o+"_mul",z,tt,tt),b.call(o+"_conjugate",tt,K),b.call(o+"_mul",K,tt,K),b.if(b.call(o+"_eq",K,W),b.ret(b.i32_const(0))),b.ret(b.i32_const(1)))}return w(),V(),st(),U(),S(),A(),D(),k(),u(),g(),s(),E(),B(),G(),lt(),_(),y(),p(),F(),t.exportFunction(o+"_isZero"),t.exportFunction(o+"_isOne"),t.exportFunction(o+"_zero"),t.exportFunction(o+"_one"),t.exportFunction(o+"_copy"),t.exportFunction(o+"_mul"),t.exportFunction(o+"_mul1"),t.exportFunction(o+"_square"),t.exportFunction(o+"_add"),t.exportFunction(o+"_sub"),t.exportFunction(o+"_neg"),t.exportFunction(o+"_sign"),t.exportFunction(o+"_conjugate"),t.exportFunction(o+"_fromMontgomery"),t.exportFunction(o+"_toMontgomery"),t.exportFunction(o+"_eq"),t.exportFunction(o+"_inverse"),xe(t,o),ve(t,o+"_exp",l*2,o+"_mul",o+"_square",o+"_copy",o+"_one"),$(),X(),t.exportFunction(o+"_exp"),t.exportFunction(o+"_timesScalar"),t.exportFunction(o+"_batchInverse"),t.exportFunction(o+"_sqrt"),t.exportFunction(o+"_isSquare"),t.exportFunction(o+"_isNegative"),o};const Oe=lo,Qe=ro;var fa=function(t,n,o,a){if(t.modules[o])return o;const l=t.modules[a].n64*8;t.modules[o]={n64:t.modules[a].n64*3};function f(){const _=t.addFunction(o+"_add");_.addParam("x","i32"),_.addParam("y","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l)),Q=p.getLocal("y"),b=p.i32_add(p.getLocal("y"),p.i32_const(l)),x=p.i32_add(p.getLocal("y"),p.i32_const(2*l)),z=p.getLocal("r"),ot=p.i32_add(p.getLocal("r"),p.i32_const(l)),tt=p.i32_add(p.getLocal("r"),p.i32_const(2*l));_.addCode(p.call(a+"_add",V,Q,z),p.call(a+"_add",$,b,ot),p.call(a+"_add",X,x,tt))}function u(){const _=t.addFunction(o+"_timesScalar");_.addParam("x","i32"),_.addParam("scalar","i32"),_.addParam("scalarLen","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l)),Q=p.getLocal("r"),b=p.i32_add(p.getLocal("r"),p.i32_const(l)),x=p.i32_add(p.getLocal("r"),p.i32_const(2*l));_.addCode(p.call(a+"_timesScalar",V,p.getLocal("scalar"),p.getLocal("scalarLen"),Q),p.call(a+"_timesScalar",$,p.getLocal("scalar"),p.getLocal("scalarLen"),b),p.call(a+"_timesScalar",X,p.getLocal("scalar"),p.getLocal("scalarLen"),x))}function y(){const _=t.addFunction(o+"_sub");_.addParam("x","i32"),_.addParam("y","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l)),Q=p.getLocal("y"),b=p.i32_add(p.getLocal("y"),p.i32_const(l)),x=p.i32_add(p.getLocal("y"),p.i32_const(2*l)),z=p.getLocal("r"),ot=p.i32_add(p.getLocal("r"),p.i32_const(l)),tt=p.i32_add(p.getLocal("r"),p.i32_const(2*l));_.addCode(p.call(a+"_sub",V,Q,z),p.call(a+"_sub",$,b,ot),p.call(a+"_sub",X,x,tt))}function g(){const _=t.addFunction(o+"_neg");_.addParam("x","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l)),Q=p.getLocal("r"),b=p.i32_add(p.getLocal("r"),p.i32_const(l)),x=p.i32_add(p.getLocal("r"),p.i32_const(2*l));_.addCode(p.call(a+"_neg",V,Q),p.call(a+"_neg",$,b),p.call(a+"_neg",X,x))}function s(){const _=t.addFunction(o+"_isNegative");_.addParam("x","i32"),_.setReturnType("i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l));_.addCode(p.if(p.call(a+"_isZero",X),p.if(p.call(a+"_isZero",$),p.ret(p.call(a+"_isNegative",V)),p.ret(p.call(a+"_isNegative",$)))),p.ret(p.call(a+"_isNegative",X)))}function E(){const _=t.addFunction(o+"_mul");_.addParam("x","i32"),_.addParam("y","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l)),Q=p.getLocal("y"),b=p.i32_add(p.getLocal("y"),p.i32_const(l)),x=p.i32_add(p.getLocal("y"),p.i32_const(2*l)),z=p.getLocal("r"),ot=p.i32_add(p.getLocal("r"),p.i32_const(l)),tt=p.i32_add(p.getLocal("r"),p.i32_const(2*l)),K=p.i32_const(t.alloc(l)),it=p.i32_const(t.alloc(l)),W=p.i32_const(t.alloc(l)),et=p.i32_const(t.alloc(l)),pt=p.i32_const(t.alloc(l)),wt=p.i32_const(t.alloc(l)),ft=p.i32_const(t.alloc(l)),L=p.i32_const(t.alloc(l)),i=p.i32_const(t.alloc(l)),C=p.i32_const(t.alloc(l)),e=p.i32_const(t.alloc(l)),m=p.i32_const(t.alloc(l)),I=p.i32_const(t.alloc(l));_.addCode(p.call(a+"_mul",V,Q,K),p.call(a+"_mul",$,b,it),p.call(a+"_mul",X,x,W),p.call(a+"_add",V,$,et),p.call(a+"_add",Q,b,pt),p.call(a+"_add",V,X,wt),p.call(a+"_add",Q,x,ft),p.call(a+"_add",$,X,L),p.call(a+"_add",b,x,i),p.call(a+"_add",K,it,C),p.call(a+"_add",K,W,e),p.call(a+"_add",it,W,m),p.call(a+"_mul",L,i,z),p.call(a+"_sub",z,m,z),p.call(n,z,z),p.call(a+"_add",K,z,z),p.call(a+"_mul",et,pt,ot),p.call(a+"_sub",ot,C,ot),p.call(n,W,I),p.call(a+"_add",ot,I,ot),p.call(a+"_mul",wt,ft,tt),p.call(a+"_sub",tt,e,tt),p.call(a+"_add",tt,it,tt))}function F(){const _=t.addFunction(o+"_square");_.addParam("x","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l)),Q=p.getLocal("r"),b=p.i32_add(p.getLocal("r"),p.i32_const(l)),x=p.i32_add(p.getLocal("r"),p.i32_const(2*l)),z=p.i32_const(t.alloc(l)),ot=p.i32_const(t.alloc(l)),tt=p.i32_const(t.alloc(l)),K=p.i32_const(t.alloc(l)),it=p.i32_const(t.alloc(l)),W=p.i32_const(t.alloc(l)),et=p.i32_const(t.alloc(l));_.addCode(p.call(a+"_square",V,z),p.call(a+"_mul",V,$,ot),p.call(a+"_add",ot,ot,tt),p.call(a+"_sub",V,$,K),p.call(a+"_add",K,X,K),p.call(a+"_square",K,K),p.call(a+"_mul",$,X,it),p.call(a+"_add",it,it,W),p.call(a+"_square",X,et),p.call(n,W,Q),p.call(a+"_add",z,Q,Q),p.call(n,et,b),p.call(a+"_add",tt,b,b),p.call(a+"_add",z,et,x),p.call(a+"_sub",W,x,x),p.call(a+"_add",K,x,x),p.call(a+"_add",tt,x,x))}function A(){const _=t.addFunction(o+"_toMontgomery");_.addParam("x","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l)),Q=p.getLocal("r"),b=p.i32_add(p.getLocal("r"),p.i32_const(l)),x=p.i32_add(p.getLocal("r"),p.i32_const(2*l));_.addCode(p.call(a+"_toMontgomery",V,Q),p.call(a+"_toMontgomery",$,b),p.call(a+"_toMontgomery",X,x))}function D(){const _=t.addFunction(o+"_fromMontgomery");_.addParam("x","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l)),Q=p.getLocal("r"),b=p.i32_add(p.getLocal("r"),p.i32_const(l)),x=p.i32_add(p.getLocal("r"),p.i32_const(2*l));_.addCode(p.call(a+"_fromMontgomery",V,Q),p.call(a+"_fromMontgomery",$,b),p.call(a+"_fromMontgomery",X,x))}function k(){const _=t.addFunction(o+"_copy");_.addParam("x","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l)),Q=p.getLocal("r"),b=p.i32_add(p.getLocal("r"),p.i32_const(l)),x=p.i32_add(p.getLocal("r"),p.i32_const(2*l));_.addCode(p.call(a+"_copy",V,Q),p.call(a+"_copy",$,b),p.call(a+"_copy",X,x))}function B(){const _=t.addFunction(o+"_zero");_.addParam("x","i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l));_.addCode(p.call(a+"_zero",V),p.call(a+"_zero",$),p.call(a+"_zero",X))}function G(){const _=t.addFunction(o+"_one");_.addParam("x","i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l));_.addCode(p.call(a+"_one",V),p.call(a+"_zero",$),p.call(a+"_zero",X))}function S(){const _=t.addFunction(o+"_eq");_.addParam("x","i32"),_.addParam("y","i32"),_.setReturnType("i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l)),Q=p.getLocal("y"),b=p.i32_add(p.getLocal("y"),p.i32_const(l)),x=p.i32_add(p.getLocal("y"),p.i32_const(2*l));_.addCode(p.i32_and(p.i32_and(p.call(a+"_eq",V,Q),p.call(a+"_eq",$,b)),p.call(a+"_eq",X,x)))}function st(){const _=t.addFunction(o+"_isZero");_.addParam("x","i32"),_.setReturnType("i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l));_.addCode(p.i32_and(p.i32_and(p.call(a+"_isZero",V),p.call(a+"_isZero",$)),p.call(a+"_isZero",X)))}function U(){const _=t.addFunction(o+"_inverse");_.addParam("x","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l)),Q=p.getLocal("r"),b=p.i32_add(p.getLocal("r"),p.i32_const(l)),x=p.i32_add(p.getLocal("r"),p.i32_const(2*l)),z=p.i32_const(t.alloc(l)),ot=p.i32_const(t.alloc(l)),tt=p.i32_const(t.alloc(l)),K=p.i32_const(t.alloc(l)),it=p.i32_const(t.alloc(l)),W=p.i32_const(t.alloc(l)),et=p.i32_const(t.alloc(l)),pt=p.i32_const(t.alloc(l)),wt=p.i32_const(t.alloc(l)),ft=p.i32_const(t.alloc(l)),L=p.i32_const(t.alloc(l));_.addCode(p.call(a+"_square",V,z),p.call(a+"_square",$,ot),p.call(a+"_square",X,tt),p.call(a+"_mul",V,$,K),p.call(a+"_mul",V,X,it),p.call(a+"_mul",$,X,W),p.call(n,W,et),p.call(a+"_sub",z,et,et),p.call(n,tt,pt),p.call(a+"_sub",pt,K,pt),p.call(a+"_sub",ot,it,wt),p.call(a+"_mul",X,pt,ft),p.call(a+"_mul",$,wt,L),p.call(a+"_add",ft,L,ft),p.call(n,ft,ft),p.call(a+"_mul",V,et,L),p.call(a+"_add",L,ft,ft),p.call(a+"_inverse",ft,ft),p.call(a+"_mul",ft,et,Q),p.call(a+"_mul",ft,pt,b),p.call(a+"_mul",ft,wt,x))}function lt(){const _=t.addFunction(o+"_sign");_.addParam("x","i32"),_.addLocal("s","i32"),_.setReturnType("i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(2*l));_.addCode(p.setLocal("s",p.call(a+"_sign",X)),p.if(p.getLocal("s"),p.ret(p.getLocal("s"))),p.setLocal("s",p.call(a+"_sign",$)),p.if(p.getLocal("s"),p.ret(p.getLocal("s"))),p.ret(p.call(a+"_sign",V)))}function w(){const _=t.addFunction(o+"_isOne");_.addParam("x","i32"),_.setReturnType("i32");const p=_.getCodeBuilder(),V=p.getLocal("x"),$=p.i32_add(p.getLocal("x"),p.i32_const(l)),X=p.i32_add(p.getLocal("x"),p.i32_const(l*2));_.addCode(p.ret(p.i32_and(p.i32_and(p.call(a+"_isOne",V),p.call(a+"_isZero",$)),p.call(a+"_isZero",X))))}return st(),w(),B(),G(),k(),E(),F(),f(),y(),g(),lt(),A(),D(),S(),U(),u(),s(),t.exportFunction(o+"_isZero"),t.exportFunction(o+"_isOne"),t.exportFunction(o+"_zero"),t.exportFunction(o+"_one"),t.exportFunction(o+"_copy"),t.exportFunction(o+"_mul"),t.exportFunction(o+"_square"),t.exportFunction(o+"_add"),t.exportFunction(o+"_sub"),t.exportFunction(o+"_neg"),t.exportFunction(o+"_sign"),t.exportFunction(o+"_fromMontgomery"),t.exportFunction(o+"_toMontgomery"),t.exportFunction(o+"_eq"),t.exportFunction(o+"_inverse"),Qe(t,o),Oe(t,o+"_exp",l*3,o+"_mul",o+"_square",o+"_copy",o+"_one"),t.exportFunction(o+"_exp"),t.exportFunction(o+"_timesScalar"),t.exportFunction(o+"_batchInverse"),t.exportFunction(o+"_isNegative"),o},Pe=function(t,n,o,a,l,f,u,y){const g=t.addFunction(n);g.addParam("base","i32"),g.addParam("scalar","i32"),g.addParam("scalarLength","i32"),g.addParam("r","i32"),g.addLocal("old0","i32"),g.addLocal("nbits","i32"),g.addLocal("i","i32"),g.addLocal("last","i32"),g.addLocal("cur","i32"),g.addLocal("carry","i32"),g.addLocal("p","i32");const s=g.getCodeBuilder(),E=s.i32_const(t.alloc(o));function F(D){return s.i32_and(s.i32_shr_u(s.i32_load(s.i32_add(s.getLocal("scalar"),s.i32_and(s.i32_shr_u(D,s.i32_const(3)),s.i32_const(4294967292)))),s.i32_and(D,s.i32_const(31))),s.i32_const(1))}function A(D){return[...s.i32_store8(s.getLocal("p"),s.i32_const(D)),...s.setLocal("p",s.i32_add(s.getLocal("p"),s.i32_const(1)))]}g.addCode(s.if(s.i32_eqz(s.getLocal("scalarLength")),[...s.call(y,s.getLocal("r")),...s.ret([])]),s.setLocal("nbits",s.i32_shl(s.getLocal("scalarLength"),s.i32_const(3))),s.setLocal("old0",s.i32_load(s.i32_const(0))),s.setLocal("p",s.getLocal("old0")),s.i32_store(s.i32_const(0),s.i32_and(s.i32_add(s.i32_add(s.getLocal("old0"),s.i32_const(32)),s.getLocal("nbits")),s.i32_const(4294967288))),s.setLocal("i",s.i32_const(1)),s.setLocal("last",F(s.i32_const(0))),s.setLocal("carry",s.i32_const(0)),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("i"),s.getLocal("nbits"))),s.setLocal("cur",F(s.getLocal("i"))),s.if(s.getLocal("last"),s.if(s.getLocal("cur"),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...A(1)],[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...A(255)]),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...A(255)],[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(0)),...A(1)])),s.if(s.getLocal("cur"),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...A(0)],[...s.setLocal("last",s.i32_const(1)),...s.setLocal("carry",s.i32_const(0)),...A(0)]),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(1)),...s.setLocal("carry",s.i32_const(0)),...A(0)],[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(0)),...A(0)]))),s.setLocal("i",s.i32_add(s.getLocal("i"),s.i32_const(1))),s.br(0))),s.if(s.getLocal("last"),s.if(s.getLocal("carry"),[...A(255),...A(0),...A(1)],[...A(1)]),s.if(s.getLocal("carry"),[...A(0),...A(1)])),s.setLocal("p",s.i32_sub(s.getLocal("p"),s.i32_const(1))),s.call(u,s.getLocal("base"),E),s.call(y,s.getLocal("r")),s.block(s.loop(s.call(l,s.getLocal("r"),s.getLocal("r")),s.setLocal("cur",s.i32_load8_u(s.getLocal("p"))),s.if(s.getLocal("cur"),s.if(s.i32_eq(s.getLocal("cur"),s.i32_const(1)),s.call(a,s.getLocal("r"),E,s.getLocal("r")),s.call(f,s.getLocal("r"),E,s.getLocal("r")))),s.br_if(1,s.i32_eq(s.getLocal("old0"),s.getLocal("p"))),s.setLocal("p",s.i32_sub(s.getLocal("p"),s.i32_const(1))),s.br(0))),s.i32_store(s.i32_const(0),s.getLocal("old0")))},Me=function(t,n,o,a,l){const u=t.modules[n].n64*8;function y(){const F=t.addFunction(o+"_getChunk");F.addParam("pScalar","i32"),F.addParam("scalarSize","i32"),F.addParam("startBit","i32"),F.addParam("chunkSize","i32"),F.addLocal("bitsToEnd","i32"),F.addLocal("mask","i32"),F.setReturnType("i32");const A=F.getCodeBuilder();F.addCode(A.setLocal("bitsToEnd",A.i32_sub(A.i32_mul(A.getLocal("scalarSize"),A.i32_const(8)),A.getLocal("startBit"))),A.if(A.i32_gt_s(A.getLocal("chunkSize"),A.getLocal("bitsToEnd")),A.setLocal("mask",A.i32_sub(A.i32_shl(A.i32_const(1),A.getLocal("bitsToEnd")),A.i32_const(1))),A.setLocal("mask",A.i32_sub(A.i32_shl(A.i32_const(1),A.getLocal("chunkSize")),A.i32_const(1)))),A.i32_and(A.i32_shr_u(A.i32_load(A.i32_add(A.getLocal("pScalar"),A.i32_shr_u(A.getLocal("startBit"),A.i32_const(3))),0,0),A.i32_and(A.getLocal("startBit"),A.i32_const(7))),A.getLocal("mask")))}function g(){const F=t.addFunction(o+"_chunk");F.addParam("pBases","i32"),F.addParam("pScalars","i32"),F.addParam("scalarSize","i32"),F.addParam("n","i32"),F.addParam("startBit","i32"),F.addParam("chunkSize","i32"),F.addParam("pr","i32"),F.addLocal("nChunks","i32"),F.addLocal("itScalar","i32"),F.addLocal("endScalar","i32"),F.addLocal("itBase","i32"),F.addLocal("i","i32"),F.addLocal("j","i32"),F.addLocal("nTable","i32"),F.addLocal("pTable","i32"),F.addLocal("idx","i32"),F.addLocal("pIdxTable","i32");const A=F.getCodeBuilder();F.addCode(A.if(A.i32_eqz(A.getLocal("n")),[...A.call(n+"_zero",A.getLocal("pr")),...A.ret([])]),A.setLocal("nTable",A.i32_shl(A.i32_const(1),A.getLocal("chunkSize"))),A.setLocal("pTable",A.i32_load(A.i32_const(0))),A.i32_store(A.i32_const(0),A.i32_add(A.getLocal("pTable"),A.i32_mul(A.getLocal("nTable"),A.i32_const(u)))),A.setLocal("j",A.i32_const(0)),A.block(A.loop(A.br_if(1,A.i32_eq(A.getLocal("j"),A.getLocal("nTable"))),A.call(n+"_zero",A.i32_add(A.getLocal("pTable"),A.i32_mul(A.getLocal("j"),A.i32_const(u)))),A.setLocal("j",A.i32_add(A.getLocal("j"),A.i32_const(1))),A.br(0))),A.setLocal("itBase",A.getLocal("pBases")),A.setLocal("itScalar",A.getLocal("pScalars")),A.setLocal("endScalar",A.i32_add(A.getLocal("pScalars"),A.i32_mul(A.getLocal("n"),A.getLocal("scalarSize")))),A.block(A.loop(A.br_if(1,A.i32_eq(A.getLocal("itScalar"),A.getLocal("endScalar"))),A.setLocal("idx",A.call(o+"_getChunk",A.getLocal("itScalar"),A.getLocal("scalarSize"),A.getLocal("startBit"),A.getLocal("chunkSize"))),A.if(A.getLocal("idx"),[...A.setLocal("pIdxTable",A.i32_add(A.getLocal("pTable"),A.i32_mul(A.i32_sub(A.getLocal("idx"),A.i32_const(1)),A.i32_const(u)))),...A.call(a,A.getLocal("pIdxTable"),A.getLocal("itBase"),A.getLocal("pIdxTable"))]),A.setLocal("itScalar",A.i32_add(A.getLocal("itScalar"),A.getLocal("scalarSize"))),A.setLocal("itBase",A.i32_add(A.getLocal("itBase"),A.i32_const(l))),A.br(0))),A.call(o+"_reduceTable",A.getLocal("pTable"),A.getLocal("chunkSize")),A.call(n+"_copy",A.getLocal("pTable"),A.getLocal("pr")),A.i32_store(A.i32_const(0),A.getLocal("pTable")))}function s(){const F=t.addFunction(o);F.addParam("pBases","i32"),F.addParam("pScalars","i32"),F.addParam("scalarSize","i32"),F.addParam("n","i32"),F.addParam("pr","i32"),F.addLocal("chunkSize","i32"),F.addLocal("nChunks","i32"),F.addLocal("itScalar","i32"),F.addLocal("endScalar","i32"),F.addLocal("itBase","i32"),F.addLocal("itBit","i32"),F.addLocal("i","i32"),F.addLocal("j","i32"),F.addLocal("nTable","i32"),F.addLocal("pTable","i32"),F.addLocal("idx","i32"),F.addLocal("pIdxTable","i32");const A=F.getCodeBuilder(),D=A.i32_const(t.alloc(u)),k=t.alloc([17,17,17,17,17,17,17,17,17,17,16,16,15,14,13,13,12,11,10,9,8,7,7,6,5,4,3,2,1,1,1,1]);F.addCode(A.call(n+"_zero",A.getLocal("pr")),A.if(A.i32_eqz(A.getLocal("n")),A.ret([])),A.setLocal("chunkSize",A.i32_load8_u(A.i32_clz(A.getLocal("n")),k)),A.setLocal("nChunks",A.i32_add(A.i32_div_u(A.i32_sub(A.i32_shl(A.getLocal("scalarSize"),A.i32_const(3)),A.i32_const(1)),A.getLocal("chunkSize")),A.i32_const(1))),A.setLocal("itBit",A.i32_mul(A.i32_sub(A.getLocal("nChunks"),A.i32_const(1)),A.getLocal("chunkSize"))),A.block(A.loop(A.br_if(1,A.i32_lt_s(A.getLocal("itBit"),A.i32_const(0))),A.if(A.i32_eqz(A.call(n+"_isZero",A.getLocal("pr"))),[...A.setLocal("j",A.i32_const(0)),...A.block(A.loop(A.br_if(1,A.i32_eq(A.getLocal("j"),A.getLocal("chunkSize"))),A.call(n+"_double",A.getLocal("pr"),A.getLocal("pr")),A.setLocal("j",A.i32_add(A.getLocal("j"),A.i32_const(1))),A.br(0)))]),A.call(o+"_chunk",A.getLocal("pBases"),A.getLocal("pScalars"),A.getLocal("scalarSize"),A.getLocal("n"),A.getLocal("itBit"),A.getLocal("chunkSize"),D),A.call(n+"_add",A.getLocal("pr"),D,A.getLocal("pr")),A.setLocal("itBit",A.i32_sub(A.getLocal("itBit"),A.getLocal("chunkSize"))),A.br(0))))}function E(){const F=t.addFunction(o+"_reduceTable");F.addParam("pTable","i32"),F.addParam("p","i32"),F.addLocal("half","i32"),F.addLocal("it1","i32"),F.addLocal("it2","i32"),F.addLocal("pAcc","i32");const A=F.getCodeBuilder();F.addCode(A.if(A.i32_eq(A.getLocal("p"),A.i32_const(1)),A.ret([])),A.setLocal("half",A.i32_shl(A.i32_const(1),A.i32_sub(A.getLocal("p"),A.i32_const(1)))),A.setLocal("it1",A.getLocal("pTable")),A.setLocal("it2",A.i32_add(A.getLocal("pTable"),A.i32_mul(A.getLocal("half"),A.i32_const(u)))),A.setLocal("pAcc",A.i32_sub(A.getLocal("it2"),A.i32_const(u))),A.block(A.loop(A.br_if(1,A.i32_eq(A.getLocal("it1"),A.getLocal("pAcc"))),A.call(n+"_add",A.getLocal("it1"),A.getLocal("it2"),A.getLocal("it1")),A.call(n+"_add",A.getLocal("pAcc"),A.getLocal("it2"),A.getLocal("pAcc")),A.setLocal("it1",A.i32_add(A.getLocal("it1"),A.i32_const(u))),A.setLocal("it2",A.i32_add(A.getLocal("it2"),A.i32_const(u))),A.br(0))),A.call(o+"_reduceTable",A.getLocal("pTable"),A.i32_sub(A.getLocal("p"),A.i32_const(1))),A.setLocal("p",A.i32_sub(A.getLocal("p"),A.i32_const(1))),A.block(A.loop(A.br_if(1,A.i32_eqz(A.getLocal("p"))),A.call(n+"_double",A.getLocal("pAcc"),A.getLocal("pAcc")),A.setLocal("p",A.i32_sub(A.getLocal("p"),A.i32_const(1))),A.br(0))),A.call(n+"_add",A.getLocal("pTable"),A.getLocal("pAcc"),A.getLocal("pTable")))}y(),E(),g(),s(),t.exportFunction(o),t.exportFunction(o+"_chunk")};const La=Pe,Un=aa,pa=Me;var Aa=function(t,n,o,a){const l=t.modules[o].n64,f=l*8;if(t.modules[n])return n;t.modules[n]={n64:l*3};function u(){const L=t.addFunction(n+"_isZero");L.addParam("p1","i32"),L.setReturnType("i32");const i=L.getCodeBuilder();L.addCode(i.call(o+"_isZero",i.i32_add(i.getLocal("p1"),i.i32_const(f*2))))}function y(){const L=t.addFunction(n+"_isZeroAffine");L.addParam("p1","i32"),L.setReturnType("i32");const i=L.getCodeBuilder();L.addCode(i.i32_and(i.call(o+"_isZero",i.getLocal("p1")),i.call(o+"_isZero",i.i32_add(i.getLocal("p1"),i.i32_const(f)))))}function g(){const L=t.addFunction(n+"_copy");L.addParam("ps","i32"),L.addParam("pd","i32");const i=L.getCodeBuilder();for(let C=0;C<l*3;C++)L.addCode(i.i64_store(i.getLocal("pd"),C*8,i.i64_load(i.getLocal("ps"),C*8)))}function s(){const L=t.addFunction(n+"_copyAffine");L.addParam("ps","i32"),L.addParam("pd","i32");const i=L.getCodeBuilder();for(let C=0;C<l*2;C++)L.addCode(i.i64_store(i.getLocal("pd"),C*8,i.i64_load(i.getLocal("ps"),C*8)))}function E(){const L=t.addFunction(n+"_zero");L.addParam("pr","i32");const i=L.getCodeBuilder();L.addCode(i.call(o+"_zero",i.getLocal("pr"))),L.addCode(i.call(o+"_one",i.i32_add(i.getLocal("pr"),i.i32_const(f)))),L.addCode(i.call(o+"_zero",i.i32_add(i.getLocal("pr"),i.i32_const(f*2))))}function F(){const L=t.addFunction(n+"_zeroAffine");L.addParam("pr","i32");const i=L.getCodeBuilder();L.addCode(i.call(o+"_zero",i.getLocal("pr"))),L.addCode(i.call(o+"_zero",i.i32_add(i.getLocal("pr"),i.i32_const(f))))}function A(){const L=t.addFunction(n+"_eq");L.addParam("p1","i32"),L.addParam("p2","i32"),L.setReturnType("i32"),L.addLocal("z1","i32"),L.addLocal("z2","i32");const i=L.getCodeBuilder(),C=i.getLocal("p1"),e=i.i32_add(i.getLocal("p1"),i.i32_const(f));L.addCode(i.setLocal("z1",i.i32_add(i.getLocal("p1"),i.i32_const(f*2))));const m=i.getLocal("z1"),I=i.getLocal("p2"),h=i.i32_add(i.getLocal("p2"),i.i32_const(f));L.addCode(i.setLocal("z2",i.i32_add(i.getLocal("p2"),i.i32_const(f*2))));const v=i.getLocal("z2"),J=i.i32_const(t.alloc(f)),R=i.i32_const(t.alloc(f)),at=i.i32_const(t.alloc(f)),It=i.i32_const(t.alloc(f)),dt=i.i32_const(t.alloc(f)),Lt=i.i32_const(t.alloc(f)),St=i.i32_const(t.alloc(f)),gt=i.i32_const(t.alloc(f));L.addCode(i.if(i.call(n+"_isZero",i.getLocal("p1")),i.ret(i.call(n+"_isZero",i.getLocal("p2")))),i.if(i.call(n+"_isZero",i.getLocal("p2")),i.ret(i.i32_const(0))),i.if(i.call(o+"_isOne",m),i.ret(i.call(n+"_eqMixed",i.getLocal("p2"),i.getLocal("p1")))),i.if(i.call(o+"_isOne",v),i.ret(i.call(n+"_eqMixed",i.getLocal("p1"),i.getLocal("p2")))),i.call(o+"_square",m,J),i.call(o+"_square",v,R),i.call(o+"_mul",C,R,at),i.call(o+"_mul",I,J,It),i.call(o+"_mul",m,J,dt),i.call(o+"_mul",v,R,Lt),i.call(o+"_mul",e,Lt,St),i.call(o+"_mul",h,dt,gt),i.if(i.call(o+"_eq",at,It),i.if(i.call(o+"_eq",St,gt),i.ret(i.i32_const(1)))),i.ret(i.i32_const(0)))}function D(){const L=t.addFunction(n+"_eqMixed");L.addParam("p1","i32"),L.addParam("p2","i32"),L.setReturnType("i32"),L.addLocal("z1","i32");const i=L.getCodeBuilder(),C=i.getLocal("p1"),e=i.i32_add(i.getLocal("p1"),i.i32_const(f));L.addCode(i.setLocal("z1",i.i32_add(i.getLocal("p1"),i.i32_const(f*2))));const m=i.getLocal("z1"),I=i.getLocal("p2"),h=i.i32_add(i.getLocal("p2"),i.i32_const(f)),v=i.i32_const(t.alloc(f)),J=i.i32_const(t.alloc(f)),R=i.i32_const(t.alloc(f)),at=i.i32_const(t.alloc(f));L.addCode(i.if(i.call(n+"_isZero",i.getLocal("p1")),i.ret(i.call(n+"_isZeroAffine",i.getLocal("p2")))),i.if(i.call(n+"_isZeroAffine",i.getLocal("p2")),i.ret(i.i32_const(0))),i.if(i.call(o+"_isOne",m),i.ret(i.call(n+"_eqAffine",i.getLocal("p1"),i.getLocal("p2")))),i.call(o+"_square",m,v),i.call(o+"_mul",I,v,J),i.call(o+"_mul",m,v,R),i.call(o+"_mul",h,R,at),i.if(i.call(o+"_eq",C,J),i.if(i.call(o+"_eq",e,at),i.ret(i.i32_const(1)))),i.ret(i.i32_const(0)))}function k(){const L=t.addFunction(n+"_double");L.addParam("p1","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder(),C=i.getLocal("p1"),e=i.i32_add(i.getLocal("p1"),i.i32_const(f)),m=i.i32_add(i.getLocal("p1"),i.i32_const(f*2)),I=i.getLocal("pr"),h=i.i32_add(i.getLocal("pr"),i.i32_const(f)),v=i.i32_add(i.getLocal("pr"),i.i32_const(f*2)),J=i.i32_const(t.alloc(f)),R=i.i32_const(t.alloc(f)),at=i.i32_const(t.alloc(f)),It=i.i32_const(t.alloc(f)),dt=i.i32_const(t.alloc(f)),Lt=i.i32_const(t.alloc(f)),St=i.i32_const(t.alloc(f)),gt=i.i32_const(t.alloc(f));L.addCode(i.if(i.call(n+"_isZero",i.getLocal("p1")),[...i.call(n+"_copy",i.getLocal("p1"),i.getLocal("pr")),...i.ret([])]),i.if(i.call(o+"_isOne",m),[...i.ret(i.call(n+"_doubleAffine",i.getLocal("p1"),i.getLocal("pr"))),...i.ret([])]),i.call(o+"_square",C,J),i.call(o+"_square",e,R),i.call(o+"_square",R,at),i.call(o+"_add",C,R,It),i.call(o+"_square",It,It),i.call(o+"_sub",It,J,It),i.call(o+"_sub",It,at,It),i.call(o+"_add",It,It,It),i.call(o+"_add",J,J,dt),i.call(o+"_add",dt,J,dt),i.call(o+"_square",dt,Lt),i.call(o+"_mul",e,m,St),i.call(o+"_add",It,It,I),i.call(o+"_sub",Lt,I,I),i.call(o+"_add",at,at,gt),i.call(o+"_add",gt,gt,gt),i.call(o+"_add",gt,gt,gt),i.call(o+"_sub",It,I,h),i.call(o+"_mul",h,dt,h),i.call(o+"_sub",h,gt,h),i.call(o+"_add",St,St,v))}function B(){const L=t.addFunction(n+"_doubleAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder(),C=i.getLocal("p1"),e=i.i32_add(i.getLocal("p1"),i.i32_const(f)),m=i.getLocal("pr"),I=i.i32_add(i.getLocal("pr"),i.i32_const(f)),h=i.i32_add(i.getLocal("pr"),i.i32_const(f*2)),v=i.i32_const(t.alloc(f)),J=i.i32_const(t.alloc(f)),R=i.i32_const(t.alloc(f)),at=i.i32_const(t.alloc(f)),It=i.i32_const(t.alloc(f)),dt=i.i32_const(t.alloc(f));L.addCode(i.if(i.call(n+"_isZeroAffine",i.getLocal("p1")),[...i.call(n+"_toJacobian",i.getLocal("p1"),i.getLocal("pr")),...i.ret([])]),i.call(o+"_square",C,v),i.call(o+"_square",e,J),i.call(o+"_square",J,R),i.call(o+"_add",C,J,at),i.call(o+"_square",at,at),i.call(o+"_sub",at,v,at),i.call(o+"_sub",at,R,at),i.call(o+"_add",at,at,at),i.call(o+"_add",v,v,It),i.call(o+"_add",It,v,It),i.call(o+"_add",e,e,h),i.call(o+"_square",It,m),i.call(o+"_sub",m,at,m),i.call(o+"_sub",m,at,m),i.call(o+"_add",R,R,dt),i.call(o+"_add",dt,dt,dt),i.call(o+"_add",dt,dt,dt),i.call(o+"_sub",at,m,I),i.call(o+"_mul",I,It,I),i.call(o+"_sub",I,dt,I))}function G(){const L=t.addFunction(n+"_eqAffine");L.addParam("p1","i32"),L.addParam("p2","i32"),L.setReturnType("i32"),L.addLocal("z1","i32");const i=L.getCodeBuilder();L.addCode(i.ret(i.i32_and(i.call(o+"_eq",i.getLocal("p1"),i.getLocal("p2")),i.call(o+"_eq",i.i32_add(i.getLocal("p1"),i.i32_const(f)),i.i32_add(i.getLocal("p2"),i.i32_const(f))))))}function S(){const L=t.addFunction(n+"_toMontgomery");L.addParam("p1","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder();L.addCode(i.call(o+"_toMontgomery",i.getLocal("p1"),i.getLocal("pr")));for(let C=1;C<3;C++)L.addCode(i.call(o+"_toMontgomery",i.i32_add(i.getLocal("p1"),i.i32_const(C*f)),i.i32_add(i.getLocal("pr"),i.i32_const(C*f))))}function st(){const L=t.addFunction(n+"_toMontgomeryAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder();L.addCode(i.call(o+"_toMontgomery",i.getLocal("p1"),i.getLocal("pr")));for(let C=1;C<2;C++)L.addCode(i.call(o+"_toMontgomery",i.i32_add(i.getLocal("p1"),i.i32_const(C*f)),i.i32_add(i.getLocal("pr"),i.i32_const(C*f))))}function U(){const L=t.addFunction(n+"_fromMontgomery");L.addParam("p1","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder();L.addCode(i.call(o+"_fromMontgomery",i.getLocal("p1"),i.getLocal("pr")));for(let C=1;C<3;C++)L.addCode(i.call(o+"_fromMontgomery",i.i32_add(i.getLocal("p1"),i.i32_const(C*f)),i.i32_add(i.getLocal("pr"),i.i32_const(C*f))))}function lt(){const L=t.addFunction(n+"_fromMontgomeryAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder();L.addCode(i.call(o+"_fromMontgomery",i.getLocal("p1"),i.getLocal("pr")));for(let C=1;C<2;C++)L.addCode(i.call(o+"_fromMontgomery",i.i32_add(i.getLocal("p1"),i.i32_const(C*f)),i.i32_add(i.getLocal("pr"),i.i32_const(C*f))))}function w(){const L=t.addFunction(n+"_add");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32"),L.addLocal("z1","i32"),L.addLocal("z2","i32");const i=L.getCodeBuilder(),C=i.getLocal("p1"),e=i.i32_add(i.getLocal("p1"),i.i32_const(f));L.addCode(i.setLocal("z1",i.i32_add(i.getLocal("p1"),i.i32_const(f*2))));const m=i.getLocal("z1"),I=i.getLocal("p2"),h=i.i32_add(i.getLocal("p2"),i.i32_const(f));L.addCode(i.setLocal("z2",i.i32_add(i.getLocal("p2"),i.i32_const(f*2))));const v=i.getLocal("z2"),J=i.getLocal("pr"),R=i.i32_add(i.getLocal("pr"),i.i32_const(f)),at=i.i32_add(i.getLocal("pr"),i.i32_const(f*2)),It=i.i32_const(t.alloc(f)),dt=i.i32_const(t.alloc(f)),Lt=i.i32_const(t.alloc(f)),St=i.i32_const(t.alloc(f)),gt=i.i32_const(t.alloc(f)),rt=i.i32_const(t.alloc(f)),bt=i.i32_const(t.alloc(f)),xt=i.i32_const(t.alloc(f)),Mt=i.i32_const(t.alloc(f)),Ht=i.i32_const(t.alloc(f)),Dt=i.i32_const(t.alloc(f)),Vt=i.i32_const(t.alloc(f)),qt=i.i32_const(t.alloc(f)),kt=i.i32_const(t.alloc(f)),Gt=i.i32_const(t.alloc(f)),Jt=i.i32_const(t.alloc(f)),$t=i.i32_const(t.alloc(f));L.addCode(i.if(i.call(n+"_isZero",i.getLocal("p1")),[...i.call(n+"_copy",i.getLocal("p2"),i.getLocal("pr")),...i.ret([])]),i.if(i.call(n+"_isZero",i.getLocal("p2")),[...i.call(n+"_copy",i.getLocal("p1"),i.getLocal("pr")),...i.ret([])]),i.if(i.call(o+"_isOne",m),[...i.call(n+"_addMixed",I,C,J),...i.ret([])]),i.if(i.call(o+"_isOne",v),[...i.call(n+"_addMixed",C,I,J),...i.ret([])]),i.call(o+"_square",m,It),i.call(o+"_square",v,dt),i.call(o+"_mul",C,dt,Lt),i.call(o+"_mul",I,It,St),i.call(o+"_mul",m,It,gt),i.call(o+"_mul",v,dt,rt),i.call(o+"_mul",e,rt,bt),i.call(o+"_mul",h,gt,xt),i.if(i.call(o+"_eq",Lt,St),i.if(i.call(o+"_eq",bt,xt),[...i.call(n+"_double",i.getLocal("p1"),i.getLocal("pr")),...i.ret([])])),i.call(o+"_sub",St,Lt,Mt),i.call(o+"_sub",xt,bt,Ht),i.call(o+"_add",Mt,Mt,Dt),i.call(o+"_square",Dt,Dt),i.call(o+"_mul",Mt,Dt,Vt),i.call(o+"_add",Ht,Ht,qt),i.call(o+"_mul",Lt,Dt,Gt),i.call(o+"_square",qt,kt),i.call(o+"_add",Gt,Gt,Jt),i.call(o+"_sub",kt,Vt,J),i.call(o+"_sub",J,Jt,J),i.call(o+"_mul",bt,Vt,$t),i.call(o+"_add",$t,$t,$t),i.call(o+"_sub",Gt,J,R),i.call(o+"_mul",R,qt,R),i.call(o+"_sub",R,$t,R),i.call(o+"_add",m,v,at),i.call(o+"_square",at,at),i.call(o+"_sub",at,It,at),i.call(o+"_sub",at,dt,at),i.call(o+"_mul",at,Mt,at))}function _(){const L=t.addFunction(n+"_addMixed");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32"),L.addLocal("z1","i32");const i=L.getCodeBuilder(),C=i.getLocal("p1"),e=i.i32_add(i.getLocal("p1"),i.i32_const(f));L.addCode(i.setLocal("z1",i.i32_add(i.getLocal("p1"),i.i32_const(f*2))));const m=i.getLocal("z1"),I=i.getLocal("p2"),h=i.i32_add(i.getLocal("p2"),i.i32_const(f)),v=i.getLocal("pr"),J=i.i32_add(i.getLocal("pr"),i.i32_const(f)),R=i.i32_add(i.getLocal("pr"),i.i32_const(f*2)),at=i.i32_const(t.alloc(f)),It=i.i32_const(t.alloc(f)),dt=i.i32_const(t.alloc(f)),Lt=i.i32_const(t.alloc(f)),St=i.i32_const(t.alloc(f)),gt=i.i32_const(t.alloc(f)),rt=i.i32_const(t.alloc(f)),bt=i.i32_const(t.alloc(f)),xt=i.i32_const(t.alloc(f)),Mt=i.i32_const(t.alloc(f)),Ht=i.i32_const(t.alloc(f)),Dt=i.i32_const(t.alloc(f)),Vt=i.i32_const(t.alloc(f)),qt=i.i32_const(t.alloc(f));L.addCode(i.if(i.call(n+"_isZero",i.getLocal("p1")),[...i.call(n+"_copyAffine",i.getLocal("p2"),i.getLocal("pr")),...i.call(o+"_one",i.i32_add(i.getLocal("pr"),i.i32_const(f*2))),...i.ret([])]),i.if(i.call(n+"_isZeroAffine",i.getLocal("p2")),[...i.call(n+"_copy",i.getLocal("p1"),i.getLocal("pr")),...i.ret([])]),i.if(i.call(o+"_isOne",m),[...i.call(n+"_addAffine",C,I,v),...i.ret([])]),i.call(o+"_square",m,at),i.call(o+"_mul",I,at,It),i.call(o+"_mul",m,at,dt),i.call(o+"_mul",h,dt,Lt),i.if(i.call(o+"_eq",C,It),i.if(i.call(o+"_eq",e,Lt),[...i.call(n+"_doubleAffine",i.getLocal("p2"),i.getLocal("pr")),...i.ret([])])),i.call(o+"_sub",It,C,St),i.call(o+"_sub",Lt,e,rt),i.call(o+"_square",St,gt),i.call(o+"_add",gt,gt,bt),i.call(o+"_add",bt,bt,bt),i.call(o+"_mul",St,bt,xt),i.call(o+"_add",rt,rt,Mt),i.call(o+"_mul",C,bt,Dt),i.call(o+"_square",Mt,Ht),i.call(o+"_add",Dt,Dt,Vt),i.call(o+"_sub",Ht,xt,v),i.call(o+"_sub",v,Vt,v),i.call(o+"_mul",e,xt,qt),i.call(o+"_add",qt,qt,qt),i.call(o+"_sub",Dt,v,J),i.call(o+"_mul",J,Mt,J),i.call(o+"_sub",J,qt,J),i.call(o+"_add",m,St,R),i.call(o+"_square",R,R),i.call(o+"_sub",R,at,R),i.call(o+"_sub",R,gt,R))}function p(){const L=t.addFunction(n+"_addAffine");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32"),L.addLocal("z1","i32");const i=L.getCodeBuilder(),C=i.getLocal("p1"),e=i.i32_add(i.getLocal("p1"),i.i32_const(f));L.addCode(i.setLocal("z1",i.i32_add(i.getLocal("p1"),i.i32_const(f*2))));const m=i.getLocal("p2"),I=i.i32_add(i.getLocal("p2"),i.i32_const(f)),h=i.getLocal("pr"),v=i.i32_add(i.getLocal("pr"),i.i32_const(f)),J=i.i32_add(i.getLocal("pr"),i.i32_const(f*2)),R=i.i32_const(t.alloc(f)),at=i.i32_const(t.alloc(f)),It=i.i32_const(t.alloc(f)),dt=i.i32_const(t.alloc(f)),Lt=i.i32_const(t.alloc(f)),St=i.i32_const(t.alloc(f)),gt=i.i32_const(t.alloc(f)),rt=i.i32_const(t.alloc(f)),bt=i.i32_const(t.alloc(f)),xt=i.i32_const(t.alloc(f));L.addCode(i.if(i.call(n+"_isZeroAffine",i.getLocal("p1")),[...i.call(n+"_copyAffine",i.getLocal("p2"),i.getLocal("pr")),...i.call(o+"_one",i.i32_add(i.getLocal("pr"),i.i32_const(f*2))),...i.ret([])]),i.if(i.call(n+"_isZeroAffine",i.getLocal("p2")),[...i.call(n+"_copyAffine",i.getLocal("p1"),i.getLocal("pr")),...i.call(o+"_one",i.i32_add(i.getLocal("pr"),i.i32_const(f*2))),...i.ret([])]),i.if(i.call(o+"_eq",C,m),i.if(i.call(o+"_eq",e,I),[...i.call(n+"_doubleAffine",i.getLocal("p2"),i.getLocal("pr")),...i.ret([])])),i.call(o+"_sub",m,C,R),i.call(o+"_sub",I,e,It),i.call(o+"_square",R,at),i.call(o+"_add",at,at,dt),i.call(o+"_add",dt,dt,dt),i.call(o+"_mul",R,dt,Lt),i.call(o+"_add",It,It,St),i.call(o+"_mul",C,dt,rt),i.call(o+"_square",St,gt),i.call(o+"_add",rt,rt,bt),i.call(o+"_sub",gt,Lt,h),i.call(o+"_sub",h,bt,h),i.call(o+"_mul",e,Lt,xt),i.call(o+"_add",xt,xt,xt),i.call(o+"_sub",rt,h,v),i.call(o+"_mul",v,St,v),i.call(o+"_sub",v,xt,v),i.call(o+"_add",R,R,J))}function V(){const L=t.addFunction(n+"_neg");L.addParam("p1","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder(),C=i.getLocal("p1"),e=i.i32_add(i.getLocal("p1"),i.i32_const(f)),m=i.i32_add(i.getLocal("p1"),i.i32_const(f*2)),I=i.getLocal("pr"),h=i.i32_add(i.getLocal("pr"),i.i32_const(f)),v=i.i32_add(i.getLocal("pr"),i.i32_const(f*2));L.addCode(i.call(o+"_copy",C,I),i.call(o+"_neg",e,h),i.call(o+"_copy",m,v))}function $(){const L=t.addFunction(n+"_negAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder(),C=i.getLocal("p1"),e=i.i32_add(i.getLocal("p1"),i.i32_const(f)),m=i.getLocal("pr"),I=i.i32_add(i.getLocal("pr"),i.i32_const(f));L.addCode(i.call(o+"_copy",C,m),i.call(o+"_neg",e,I))}function X(){const L=t.addFunction(n+"_sub");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder(),C=i.i32_const(t.alloc(f*3));L.addCode(i.call(n+"_neg",i.getLocal("p2"),C),i.call(n+"_add",i.getLocal("p1"),C,i.getLocal("pr")))}function Q(){const L=t.addFunction(n+"_subMixed");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder(),C=i.i32_const(t.alloc(f*3));L.addCode(i.call(n+"_negAffine",i.getLocal("p2"),C),i.call(n+"_addMixed",i.getLocal("p1"),C,i.getLocal("pr")))}function b(){const L=t.addFunction(n+"_subAffine");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder(),C=i.i32_const(t.alloc(f*3));L.addCode(i.call(n+"_negAffine",i.getLocal("p2"),C),i.call(n+"_addAffine",i.getLocal("p1"),C,i.getLocal("pr")))}function x(){const L=t.addFunction(n+"_normalize");L.addParam("p1","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder(),C=i.getLocal("p1"),e=i.i32_add(i.getLocal("p1"),i.i32_const(f)),m=i.i32_add(i.getLocal("p1"),i.i32_const(f*2)),I=i.getLocal("pr"),h=i.i32_add(i.getLocal("pr"),i.i32_const(f)),v=i.i32_add(i.getLocal("pr"),i.i32_const(f*2)),J=i.i32_const(t.alloc(f)),R=i.i32_const(t.alloc(f)),at=i.i32_const(t.alloc(f));L.addCode(i.if(i.call(n+"_isZero",i.getLocal("p1")),i.call(n+"_zero",i.getLocal("pr")),[...i.call(o+"_inverse",m,J),...i.call(o+"_square",J,R),...i.call(o+"_mul",J,R,at),...i.call(o+"_mul",C,R,I),...i.call(o+"_mul",e,at,h),...i.call(o+"_one",v)]))}function z(){const L=t.addFunction(n+"_toAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder(),C=i.getLocal("p1"),e=i.i32_add(i.getLocal("p1"),i.i32_const(f)),m=i.i32_add(i.getLocal("p1"),i.i32_const(f*2)),I=i.getLocal("pr"),h=i.i32_add(i.getLocal("pr"),i.i32_const(f)),v=i.i32_const(t.alloc(f)),J=i.i32_const(t.alloc(f)),R=i.i32_const(t.alloc(f));L.addCode(i.if(i.call(n+"_isZero",i.getLocal("p1")),[...i.call(o+"_zero",I),...i.call(o+"_zero",h)],[...i.call(o+"_inverse",m,v),...i.call(o+"_square",v,J),...i.call(o+"_mul",v,J,R),...i.call(o+"_mul",C,J,I),...i.call(o+"_mul",e,R,h)]))}function ot(){const L=t.addFunction(n+"_toJacobian");L.addParam("p1","i32"),L.addParam("pr","i32");const i=L.getCodeBuilder(),C=i.getLocal("p1"),e=i.i32_add(i.getLocal("p1"),i.i32_const(f)),m=i.getLocal("pr"),I=i.i32_add(i.getLocal("pr"),i.i32_const(f)),h=i.i32_add(i.getLocal("pr"),i.i32_const(f*2));L.addCode(i.if(i.call(n+"_isZeroAffine",i.getLocal("p1")),i.call(n+"_zero",i.getLocal("pr")),[...i.call(o+"_one",h),...i.call(o+"_copy",e,I),...i.call(o+"_copy",C,m)]))}function tt(){const L=t.addFunction(n+"_batchToAffine");L.addParam("pIn","i32"),L.addParam("n","i32"),L.addParam("pOut","i32"),L.addLocal("pAux","i32"),L.addLocal("itIn","i32"),L.addLocal("itAux","i32"),L.addLocal("itOut","i32"),L.addLocal("i","i32");const i=L.getCodeBuilder(),C=i.i32_const(t.alloc(f));L.addCode(i.setLocal("pAux",i.i32_load(i.i32_const(0))),i.i32_store(i.i32_const(0),i.i32_add(i.getLocal("pAux"),i.i32_mul(i.getLocal("n"),i.i32_const(f)))),i.call(o+"_batchInverse",i.i32_add(i.getLocal("pIn"),i.i32_const(f*2)),i.i32_const(f*3),i.getLocal("n"),i.getLocal("pAux"),i.i32_const(f)),i.setLocal("itIn",i.getLocal("pIn")),i.setLocal("itAux",i.getLocal("pAux")),i.setLocal("itOut",i.getLocal("pOut")),i.setLocal("i",i.i32_const(0)),i.block(i.loop(i.br_if(1,i.i32_eq(i.getLocal("i"),i.getLocal("n"))),i.if(i.call(o+"_isZero",i.getLocal("itAux")),[...i.call(o+"_zero",i.getLocal("itOut")),...i.call(o+"_zero",i.i32_add(i.getLocal("itOut"),i.i32_const(f)))],[...i.call(o+"_mul",i.getLocal("itAux"),i.i32_add(i.getLocal("itIn"),i.i32_const(f)),C),...i.call(o+"_square",i.getLocal("itAux"),i.getLocal("itAux")),...i.call(o+"_mul",i.getLocal("itAux"),i.getLocal("itIn"),i.getLocal("itOut")),...i.call(o+"_mul",i.getLocal("itAux"),C,i.i32_add(i.getLocal("itOut"),i.i32_const(f)))]),i.setLocal("itIn",i.i32_add(i.getLocal("itIn"),i.i32_const(f*3))),i.setLocal("itOut",i.i32_add(i.getLocal("itOut"),i.i32_const(f*2))),i.setLocal("itAux",i.i32_add(i.getLocal("itAux"),i.i32_const(f))),i.setLocal("i",i.i32_add(i.getLocal("i"),i.i32_const(1))),i.br(0))),i.i32_store(i.i32_const(0),i.getLocal("pAux")))}function K(){const L=t.addFunction(n+"__reverseBytes");L.addParam("pIn","i32"),L.addParam("n","i32"),L.addParam("pOut","i32"),L.addLocal("itOut","i32"),L.addLocal("itIn","i32");const i=L.getCodeBuilder();L.addCode(i.setLocal("itOut",i.i32_sub(i.i32_add(i.getLocal("pOut"),i.getLocal("n")),i.i32_const(1))),i.setLocal("itIn",i.getLocal("pIn")),i.block(i.loop(i.br_if(1,i.i32_lt_s(i.getLocal("itOut"),i.getLocal("pOut"))),i.i32_store8(i.getLocal("itOut"),i.i32_load8_u(i.getLocal("itIn"))),i.setLocal("itOut",i.i32_sub(i.getLocal("itOut"),i.i32_const(1))),i.setLocal("itIn",i.i32_add(i.getLocal("itIn"),i.i32_const(1))),i.br(0))))}function it(){const L=t.addFunction(n+"_LEMtoC");L.addParam("pIn","i32"),L.addParam("pOut","i32");const i=L.getCodeBuilder(),C=i.i32_const(t.alloc(f));L.addCode(i.if(i.call(n+"_isZeroAffine",i.getLocal("pIn")),[...i.call(o+"_zero",i.getLocal("pOut")),...i.i32_store8(i.getLocal("pOut"),i.i32_const(64)),...i.ret([])]),i.call(o+"_fromMontgomery",i.getLocal("pIn"),C),i.call(n+"__reverseBytes",C,i.i32_const(f),i.getLocal("pOut")),i.if(i.i32_eq(i.call(o+"_sign",i.i32_add(i.getLocal("pIn"),i.i32_const(f))),i.i32_const(-1)),i.i32_store8(i.getLocal("pOut"),i.i32_or(i.i32_load8_u(i.getLocal("pOut")),i.i32_const(128)))))}function W(){const L=t.addFunction(n+"_LEMtoU");L.addParam("pIn","i32"),L.addParam("pOut","i32");const i=L.getCodeBuilder(),C=t.alloc(f*2),e=i.i32_const(C),m=i.i32_const(C),I=i.i32_const(C+f);L.addCode(i.if(i.call(n+"_isZeroAffine",i.getLocal("pIn")),[...i.call(n+"_zeroAffine",i.getLocal("pOut")),...i.ret([])]),i.call(n+"_fromMontgomeryAffine",i.getLocal("pIn"),e),i.call(n+"__reverseBytes",m,i.i32_const(f),i.getLocal("pOut")),i.call(n+"__reverseBytes",I,i.i32_const(f),i.i32_add(i.getLocal("pOut"),i.i32_const(f))))}function et(){const L=t.addFunction(n+"_UtoLEM");L.addParam("pIn","i32"),L.addParam("pOut","i32");const i=L.getCodeBuilder(),C=t.alloc(f*2),e=i.i32_const(C),m=i.i32_const(C),I=i.i32_const(C+f);L.addCode(i.if(i.i32_and(i.i32_load8_u(i.getLocal("pIn")),i.i32_const(64)),[...i.call(n+"_zeroAffine",i.getLocal("pOut")),...i.ret([])]),i.call(n+"__reverseBytes",i.getLocal("pIn"),i.i32_const(f),m),i.call(n+"__reverseBytes",i.i32_add(i.getLocal("pIn"),i.i32_const(f)),i.i32_const(f),I),i.call(n+"_toMontgomeryAffine",e,i.getLocal("pOut")))}function pt(){const L=t.addFunction(n+"_CtoLEM");L.addParam("pIn","i32"),L.addParam("pOut","i32"),L.addLocal("firstByte","i32"),L.addLocal("greatest","i32");const i=L.getCodeBuilder(),C=t.alloc(f*2),e=i.i32_const(C),m=i.i32_const(C+f);L.addCode(i.setLocal("firstByte",i.i32_load8_u(i.getLocal("pIn"))),i.if(i.i32_and(i.getLocal("firstByte"),i.i32_const(64)),[...i.call(n+"_zeroAffine",i.getLocal("pOut")),...i.ret([])]),i.setLocal("greatest",i.i32_and(i.getLocal("firstByte"),i.i32_const(128))),i.call(o+"_copy",i.getLocal("pIn"),m),i.i32_store8(m,i.i32_and(i.getLocal("firstByte"),i.i32_const(63))),i.call(n+"__reverseBytes",m,i.i32_const(f),e),i.call(o+"_toMontgomery",e,i.getLocal("pOut")),i.call(o+"_square",i.getLocal("pOut"),m),i.call(o+"_mul",i.getLocal("pOut"),m,m),i.call(o+"_add",m,i.i32_const(a),m),i.call(o+"_sqrt",m,m),i.call(o+"_neg",m,e),i.if(i.i32_eq(i.call(o+"_sign",m),i.i32_const(-1)),i.if(i.getLocal("greatest"),i.call(o+"_copy",m,i.i32_add(i.getLocal("pOut"),i.i32_const(f))),i.call(o+"_neg",m,i.i32_add(i.getLocal("pOut"),i.i32_const(f)))),i.if(i.getLocal("greatest"),i.call(o+"_neg",m,i.i32_add(i.getLocal("pOut"),i.i32_const(f))),i.call(o+"_copy",m,i.i32_add(i.getLocal("pOut"),i.i32_const(f))))))}function wt(){const L=t.addFunction(n+"_inCurveAffine");L.addParam("pIn","i32"),L.setReturnType("i32");const i=L.getCodeBuilder(),C=i.getLocal("pIn"),e=i.i32_add(i.getLocal("pIn"),i.i32_const(f)),m=i.i32_const(t.alloc(f)),I=i.i32_const(t.alloc(f));L.addCode(i.call(o+"_square",e,m),i.call(o+"_square",C,I),i.call(o+"_mul",C,I,I),i.call(o+"_add",I,i.i32_const(a),I),i.ret(i.call(o+"_eq",m,I)))}function ft(){const L=t.addFunction(n+"_inCurve");L.addParam("pIn","i32"),L.setReturnType("i32");const i=L.getCodeBuilder(),C=i.i32_const(t.alloc(f*2));L.addCode(i.call(n+"_toAffine",i.getLocal("pIn"),C),i.ret(i.call(n+"_inCurveAffine",C)))}return y(),u(),F(),E(),s(),g(),ot(),G(),D(),A(),B(),k(),p(),_(),w(),$(),V(),b(),Q(),X(),lt(),U(),st(),S(),z(),wt(),ft(),tt(),x(),K(),W(),it(),et(),pt(),Un(t,n+"_batchLEMtoU",n+"_LEMtoU",f*2,f*2),Un(t,n+"_batchLEMtoC",n+"_LEMtoC",f*2,f),Un(t,n+"_batchUtoLEM",n+"_UtoLEM",f*2,f*2),Un(t,n+"_batchCtoLEM",n+"_CtoLEM",f,f*2,!0),Un(t,n+"_batchToJacobian",n+"_toJacobian",f*2,f*3,!0),pa(t,n,n+"_multiexp",n+"_add",f*3),pa(t,n,n+"_multiexpAffine",n+"_addMixed",f*2),La(t,n+"_timesScalar",f*3,n+"_add",n+"_double",n+"_sub",n+"_copy",n+"_zero"),La(t,n+"_timesScalarAffine",f*2,n+"_addMixed",n+"_double",n+"_subMixed",n+"_copyAffine",n+"_zero"),t.exportFunction(n+"_isZero"),t.exportFunction(n+"_isZeroAffine"),t.exportFunction(n+"_eq"),t.exportFunction(n+"_eqMixed"),t.exportFunction(n+"_eqAffine"),t.exportFunction(n+"_copy"),t.exportFunction(n+"_copyAffine"),t.exportFunction(n+"_zero"),t.exportFunction(n+"_zeroAffine"),t.exportFunction(n+"_double"),t.exportFunction(n+"_doubleAffine"),t.exportFunction(n+"_add"),t.exportFunction(n+"_addMixed"),t.exportFunction(n+"_addAffine"),t.exportFunction(n+"_neg"),t.exportFunction(n+"_negAffine"),t.exportFunction(n+"_sub"),t.exportFunction(n+"_subMixed"),t.exportFunction(n+"_subAffine"),t.exportFunction(n+"_fromMontgomery"),t.exportFunction(n+"_fromMontgomeryAffine"),t.exportFunction(n+"_toMontgomery"),t.exportFunction(n+"_toMontgomeryAffine"),t.exportFunction(n+"_timesScalar"),t.exportFunction(n+"_timesScalarAffine"),t.exportFunction(n+"_normalize"),t.exportFunction(n+"_LEMtoU"),t.exportFunction(n+"_LEMtoC"),t.exportFunction(n+"_UtoLEM"),t.exportFunction(n+"_CtoLEM"),t.exportFunction(n+"_batchLEMtoU"),t.exportFunction(n+"_batchLEMtoC"),t.exportFunction(n+"_batchUtoLEM"),t.exportFunction(n+"_batchCtoLEM"),t.exportFunction(n+"_toAffine"),t.exportFunction(n+"_toJacobian"),t.exportFunction(n+"_batchToAffine"),t.exportFunction(n+"_batchToJacobian"),t.exportFunction(n+"_inCurve"),t.exportFunction(n+"_inCurveAffine"),n};const{isOdd:qe,modInv:ba,modPow:zn}=Nt,Jn=dn;var Ia=function(t,n,o,a,l){const u=t.modules[a].n64*8,g=t.modules[o].n64*8,s=t.modules[a].q;let E=s-1n,F=0;for(;!qe(E);)F++,E=E>>1n;let A=2n;for(;zn(A,s>>1n,s)===1n;)A=A+1n;const D=new Array(F+1);D[F]=zn(A,E,s);let k=F-1;for(;k>=0;)D[k]=zn(D[k+1],2n,s),k--;const B=[],G=(1n<<BigInt(u*8))%s;for(let C=0;C<D.length;C++){const e=D[C]*G%s;B.push(...Jn.bigInt2BytesLE(e,u))}const S=t.alloc(B),st=new Array(F+1);st[0]=1n;for(let C=1;C<=F;C++)st[C]=st[C-1]*2n;const U=[];for(let C=0;C<=F;C++){const e=ba(st[C],s)*G%s;U.push(...Jn.bigInt2BytesLE(e,u))}const lt=t.alloc(U),w=zn(A,2n,s),_=[],p=[];for(let C=0;C<=F;C++){const e=zn(w,2n**BigInt(C),s),m=ba(s+1n-e,s);_.push(...Jn.bigInt2BytesLE(e*G%s,u)),p.push(...Jn.bigInt2BytesLE(m*G%s,u))}const V=t.alloc(_),$=t.alloc(p);function X(C){let e=0;for(let m=0;m<8;m++)C&1<<m&&(e=e|128>>m);return e}const Q=Array(256);for(let C=0;C<256;C++)Q[C]=X(C);const b=t.alloc(Q);function x(){const C=t.addFunction(n+"__log2");C.addParam("n","i32"),C.setReturnType("i32"),C.addLocal("bits","i32"),C.addLocal("aux","i32");const e=C.getCodeBuilder();C.addCode(e.setLocal("aux",e.i32_shr_u(e.getLocal("n"),e.i32_const(1)))),C.addCode(e.setLocal("bits",e.i32_const(0))),C.addCode(e.block(e.loop(e.br_if(1,e.i32_eqz(e.getLocal("aux"))),e.setLocal("aux",e.i32_shr_u(e.getLocal("aux"),e.i32_const(1))),e.setLocal("bits",e.i32_add(e.getLocal("bits"),e.i32_const(1))),e.br(0)))),C.addCode(e.if(e.i32_ne(e.getLocal("n"),e.i32_shl(e.i32_const(1),e.getLocal("bits"))),e.unreachable())),C.addCode(e.if(e.i32_gt_u(e.getLocal("bits"),e.i32_const(F)),e.unreachable())),C.addCode(e.getLocal("bits"))}function z(){const C=t.addFunction(n+"_fft");C.addParam("px","i32"),C.addParam("n","i32"),C.addLocal("bits","i32");const e=C.getCodeBuilder(),m=e.i32_const(t.alloc(u));C.addCode(e.setLocal("bits",e.call(n+"__log2",e.getLocal("n"))),e.call(a+"_one",m),e.call(n+"_rawfft",e.getLocal("px"),e.getLocal("bits"),e.i32_const(0),m))}function ot(){const C=t.addFunction(n+"_ifft");C.addParam("px","i32"),C.addParam("n","i32"),C.addLocal("bits","i32"),C.addLocal("pInv2","i32");const e=C.getCodeBuilder();C.addCode(e.setLocal("bits",e.call(n+"__log2",e.getLocal("n"))),e.setLocal("pInv2",e.i32_add(e.i32_const(lt),e.i32_mul(e.getLocal("bits"),e.i32_const(u)))),e.call(n+"_rawfft",e.getLocal("px"),e.getLocal("bits"),e.i32_const(1),e.getLocal("pInv2")))}function tt(){const C=t.addFunction(n+"_rawfft");C.addParam("px","i32"),C.addParam("bits","i32"),C.addParam("reverse","i32"),C.addParam("mulFactor","i32"),C.addLocal("s","i32"),C.addLocal("k","i32"),C.addLocal("j","i32"),C.addLocal("m","i32"),C.addLocal("mdiv2","i32"),C.addLocal("n","i32"),C.addLocal("pwm","i32"),C.addLocal("idx1","i32"),C.addLocal("idx2","i32");const e=C.getCodeBuilder(),m=e.i32_const(t.alloc(u)),I=e.i32_const(t.alloc(g)),h=e.i32_const(t.alloc(g));C.addCode(e.call(n+"__reversePermutation",e.getLocal("px"),e.getLocal("bits")),e.setLocal("n",e.i32_shl(e.i32_const(1),e.getLocal("bits"))),e.setLocal("s",e.i32_const(1)),e.block(e.loop(e.br_if(1,e.i32_gt_u(e.getLocal("s"),e.getLocal("bits"))),e.setLocal("m",e.i32_shl(e.i32_const(1),e.getLocal("s"))),e.setLocal("pwm",e.i32_add(e.i32_const(S),e.i32_mul(e.getLocal("s"),e.i32_const(u)))),e.setLocal("k",e.i32_const(0)),e.block(e.loop(e.br_if(1,e.i32_ge_u(e.getLocal("k"),e.getLocal("n"))),e.call(a+"_one",m),e.setLocal("mdiv2",e.i32_shr_u(e.getLocal("m"),e.i32_const(1))),e.setLocal("j",e.i32_const(0)),e.block(e.loop(e.br_if(1,e.i32_ge_u(e.getLocal("j"),e.getLocal("mdiv2"))),e.setLocal("idx1",e.i32_add(e.getLocal("px"),e.i32_mul(e.i32_add(e.getLocal("k"),e.getLocal("j")),e.i32_const(g)))),e.setLocal("idx2",e.i32_add(e.getLocal("idx1"),e.i32_mul(e.getLocal("mdiv2"),e.i32_const(g)))),e.call(l,e.getLocal("idx2"),m,I),e.call(o+"_copy",e.getLocal("idx1"),h),e.call(o+"_add",h,I,e.getLocal("idx1")),e.call(o+"_sub",h,I,e.getLocal("idx2")),e.call(a+"_mul",m,e.getLocal("pwm"),m),e.setLocal("j",e.i32_add(e.getLocal("j"),e.i32_const(1))),e.br(0))),e.setLocal("k",e.i32_add(e.getLocal("k"),e.getLocal("m"))),e.br(0))),e.setLocal("s",e.i32_add(e.getLocal("s"),e.i32_const(1))),e.br(0))),e.call(n+"__fftFinal",e.getLocal("px"),e.getLocal("bits"),e.getLocal("reverse"),e.getLocal("mulFactor")))}function K(){const C=t.addFunction(n+"__fftFinal");C.addParam("px","i32"),C.addParam("bits","i32"),C.addParam("reverse","i32"),C.addParam("mulFactor","i32"),C.addLocal("n","i32"),C.addLocal("ndiv2","i32"),C.addLocal("pInv2","i32"),C.addLocal("i","i32"),C.addLocal("mask","i32"),C.addLocal("idx1","i32"),C.addLocal("idx2","i32");const e=C.getCodeBuilder(),m=e.i32_const(t.alloc(g));C.addCode(e.if(e.i32_and(e.i32_eqz(e.getLocal("reverse")),e.call(a+"_isOne",e.getLocal("mulFactor"))),e.ret([])),e.setLocal("n",e.i32_shl(e.i32_const(1),e.getLocal("bits"))),e.setLocal("mask",e.i32_sub(e.getLocal("n"),e.i32_const(1))),e.setLocal("i",e.i32_const(1)),e.setLocal("ndiv2",e.i32_shr_u(e.getLocal("n"),e.i32_const(1))),e.block(e.loop(e.br_if(1,e.i32_ge_u(e.getLocal("i"),e.getLocal("ndiv2"))),e.setLocal("idx1",e.i32_add(e.getLocal("px"),e.i32_mul(e.getLocal("i"),e.i32_const(g)))),e.setLocal("idx2",e.i32_add(e.getLocal("px"),e.i32_mul(e.i32_sub(e.getLocal("n"),e.getLocal("i")),e.i32_const(g)))),e.if(e.getLocal("reverse"),e.if(e.call(a+"_isOne",e.getLocal("mulFactor")),[...e.call(o+"_copy",e.getLocal("idx1"),m),...e.call(o+"_copy",e.getLocal("idx2"),e.getLocal("idx1")),...e.call(o+"_copy",m,e.getLocal("idx2"))],[...e.call(o+"_copy",e.getLocal("idx1"),m),...e.call(l,e.getLocal("idx2"),e.getLocal("mulFactor"),e.getLocal("idx1")),...e.call(l,m,e.getLocal("mulFactor"),e.getLocal("idx2"))]),e.if(e.call(a+"_isOne",e.getLocal("mulFactor")),[],[...e.call(l,e.getLocal("idx1"),e.getLocal("mulFactor"),e.getLocal("idx1")),...e.call(l,e.getLocal("idx2"),e.getLocal("mulFactor"),e.getLocal("idx2"))])),e.setLocal("i",e.i32_add(e.getLocal("i"),e.i32_const(1))),e.br(0))),e.if(e.call(a+"_isOne",e.getLocal("mulFactor")),[],[...e.call(l,e.getLocal("px"),e.getLocal("mulFactor"),e.getLocal("px")),...e.setLocal("idx2",e.i32_add(e.getLocal("px"),e.i32_mul(e.getLocal("ndiv2"),e.i32_const(g)))),...e.call(l,e.getLocal("idx2"),e.getLocal("mulFactor"),e.getLocal("idx2"))]))}function it(){const C=t.addFunction(n+"__reversePermutation");C.addParam("px","i32"),C.addParam("bits","i32"),C.addLocal("n","i32"),C.addLocal("i","i32"),C.addLocal("ri","i32"),C.addLocal("idx1","i32"),C.addLocal("idx2","i32");const e=C.getCodeBuilder(),m=e.i32_const(t.alloc(g));C.addCode(e.setLocal("n",e.i32_shl(e.i32_const(1),e.getLocal("bits"))),e.setLocal("i",e.i32_const(0)),e.block(e.loop(e.br_if(1,e.i32_eq(e.getLocal("i"),e.getLocal("n"))),e.setLocal("idx1",e.i32_add(e.getLocal("px"),e.i32_mul(e.getLocal("i"),e.i32_const(g)))),e.setLocal("ri",e.call(n+"__rev",e.getLocal("i"),e.getLocal("bits"))),e.setLocal("idx2",e.i32_add(e.getLocal("px"),e.i32_mul(e.getLocal("ri"),e.i32_const(g)))),e.if(e.i32_lt_u(e.getLocal("i"),e.getLocal("ri")),[...e.call(o+"_copy",e.getLocal("idx1"),m),...e.call(o+"_copy",e.getLocal("idx2"),e.getLocal("idx1")),...e.call(o+"_copy",m,e.getLocal("idx2"))]),e.setLocal("i",e.i32_add(e.getLocal("i"),e.i32_const(1))),e.br(0))))}function W(){const C=t.addFunction(n+"__rev");C.addParam("x","i32"),C.addParam("bits","i32"),C.setReturnType("i32");const e=C.getCodeBuilder();C.addCode(e.i32_rotl(e.i32_add(e.i32_add(e.i32_shl(e.i32_load8_u(e.i32_and(e.getLocal("x"),e.i32_const(255)),b,0),e.i32_const(24)),e.i32_shl(e.i32_load8_u(e.i32_and(e.i32_shr_u(e.getLocal("x"),e.i32_const(8)),e.i32_const(255)),b,0),e.i32_const(16))),e.i32_add(e.i32_shl(e.i32_load8_u(e.i32_and(e.i32_shr_u(e.getLocal("x"),e.i32_const(16)),e.i32_const(255)),b,0),e.i32_const(8)),e.i32_load8_u(e.i32_and(e.i32_shr_u(e.getLocal("x"),e.i32_const(24)),e.i32_const(255)),b,0))),e.getLocal("bits")))}function et(){const C=t.addFunction(n+"_fftJoin");C.addParam("pBuff1","i32"),C.addParam("pBuff2","i32"),C.addParam("n","i32"),C.addParam("first","i32"),C.addParam("inc","i32"),C.addLocal("idx1","i32"),C.addLocal("idx2","i32"),C.addLocal("i","i32");const e=C.getCodeBuilder(),m=e.i32_const(t.alloc(u)),I=e.i32_const(t.alloc(g)),h=e.i32_const(t.alloc(g));C.addCode(e.call(a+"_copy",e.getLocal("first"),m),e.setLocal("i",e.i32_const(0)),e.block(e.loop(e.br_if(1,e.i32_eq(e.getLocal("i"),e.getLocal("n"))),e.setLocal("idx1",e.i32_add(e.getLocal("pBuff1"),e.i32_mul(e.getLocal("i"),e.i32_const(g)))),e.setLocal("idx2",e.i32_add(e.getLocal("pBuff2"),e.i32_mul(e.getLocal("i"),e.i32_const(g)))),e.call(l,e.getLocal("idx2"),m,I),e.call(o+"_copy",e.getLocal("idx1"),h),e.call(o+"_add",h,I,e.getLocal("idx1")),e.call(o+"_sub",h,I,e.getLocal("idx2")),e.call(a+"_mul",m,e.getLocal("inc"),m),e.setLocal("i",e.i32_add(e.getLocal("i"),e.i32_const(1))),e.br(0))))}function pt(){const C=t.addFunction(n+"_fftJoinExt");C.addParam("pBuff1","i32"),C.addParam("pBuff2","i32"),C.addParam("n","i32"),C.addParam("first","i32"),C.addParam("inc","i32"),C.addParam("totalBits","i32"),C.addLocal("idx1","i32"),C.addLocal("idx2","i32"),C.addLocal("i","i32"),C.addLocal("pShiftToM","i32");const e=C.getCodeBuilder(),m=e.i32_const(t.alloc(u)),I=e.i32_const(t.alloc(g));C.addCode(e.setLocal("pShiftToM",e.i32_add(e.i32_const(V),e.i32_mul(e.getLocal("totalBits"),e.i32_const(u)))),e.call(a+"_copy",e.getLocal("first"),m),e.setLocal("i",e.i32_const(0)),e.block(e.loop(e.br_if(1,e.i32_eq(e.getLocal("i"),e.getLocal("n"))),e.setLocal("idx1",e.i32_add(e.getLocal("pBuff1"),e.i32_mul(e.getLocal("i"),e.i32_const(g)))),e.setLocal("idx2",e.i32_add(e.getLocal("pBuff2"),e.i32_mul(e.getLocal("i"),e.i32_const(g)))),e.call(o+"_add",e.getLocal("idx1"),e.getLocal("idx2"),I),e.call(l,e.getLocal("idx2"),e.getLocal("pShiftToM"),e.getLocal("idx2")),e.call(o+"_add",e.getLocal("idx1"),e.getLocal("idx2"),e.getLocal("idx2")),e.call(l,e.getLocal("idx2"),m,e.getLocal("idx2")),e.call(o+"_copy",I,e.getLocal("idx1")),e.call(a+"_mul",m,e.getLocal("inc"),m),e.setLocal("i",e.i32_add(e.getLocal("i"),e.i32_const(1))),e.br(0))))}function wt(){const C=t.addFunction(n+"_fftJoinExtInv");C.addParam("pBuff1","i32"),C.addParam("pBuff2","i32"),C.addParam("n","i32"),C.addParam("first","i32"),C.addParam("inc","i32"),C.addParam("totalBits","i32"),C.addLocal("idx1","i32"),C.addLocal("idx2","i32"),C.addLocal("i","i32"),C.addLocal("pShiftToM","i32"),C.addLocal("pSConst","i32");const e=C.getCodeBuilder(),m=e.i32_const(t.alloc(u)),I=e.i32_const(t.alloc(g));C.addCode(e.setLocal("pShiftToM",e.i32_add(e.i32_const(V),e.i32_mul(e.getLocal("totalBits"),e.i32_const(u)))),e.setLocal("pSConst",e.i32_add(e.i32_const($),e.i32_mul(e.getLocal("totalBits"),e.i32_const(u)))),e.call(a+"_copy",e.getLocal("first"),m),e.setLocal("i",e.i32_const(0)),e.block(e.loop(e.br_if(1,e.i32_eq(e.getLocal("i"),e.getLocal("n"))),e.setLocal("idx1",e.i32_add(e.getLocal("pBuff1"),e.i32_mul(e.getLocal("i"),e.i32_const(g)))),e.setLocal("idx2",e.i32_add(e.getLocal("pBuff2"),e.i32_mul(e.getLocal("i"),e.i32_const(g)))),e.call(l,e.getLocal("idx2"),m,I),e.call(o+"_sub",e.getLocal("idx1"),I,e.getLocal("idx2")),e.call(l,e.getLocal("idx2"),e.getLocal("pSConst"),e.getLocal("idx2")),e.call(l,e.getLocal("idx1"),e.getLocal("pShiftToM"),e.getLocal("idx1")),e.call(o+"_sub",I,e.getLocal("idx1"),e.getLocal("idx1")),e.call(l,e.getLocal("idx1"),e.getLocal("pSConst"),e.getLocal("idx1")),e.call(a+"_mul",m,e.getLocal("inc"),m),e.setLocal("i",e.i32_add(e.getLocal("i"),e.i32_const(1))),e.br(0))))}function ft(){const C=t.addFunction(n+"_prepareLagrangeEvaluation");C.addParam("pBuff1","i32"),C.addParam("pBuff2","i32"),C.addParam("n","i32"),C.addParam("first","i32"),C.addParam("inc","i32"),C.addParam("totalBits","i32"),C.addLocal("idx1","i32"),C.addLocal("idx2","i32"),C.addLocal("i","i32"),C.addLocal("pShiftToM","i32"),C.addLocal("pSConst","i32");const e=C.getCodeBuilder(),m=e.i32_const(t.alloc(u)),I=e.i32_const(t.alloc(g));C.addCode(e.setLocal("pShiftToM",e.i32_add(e.i32_const(V),e.i32_mul(e.getLocal("totalBits"),e.i32_const(u)))),e.setLocal("pSConst",e.i32_add(e.i32_const($),e.i32_mul(e.getLocal("totalBits"),e.i32_const(u)))),e.call(a+"_copy",e.getLocal("first"),m),e.setLocal("i",e.i32_const(0)),e.block(e.loop(e.br_if(1,e.i32_eq(e.getLocal("i"),e.getLocal("n"))),e.setLocal("idx1",e.i32_add(e.getLocal("pBuff1"),e.i32_mul(e.getLocal("i"),e.i32_const(g)))),e.setLocal("idx2",e.i32_add(e.getLocal("pBuff2"),e.i32_mul(e.getLocal("i"),e.i32_const(g)))),e.call(l,e.getLocal("idx1"),e.getLocal("pShiftToM"),I),e.call(o+"_sub",e.getLocal("idx2"),I,I),e.call(o+"_sub",e.getLocal("idx1"),e.getLocal("idx2"),e.getLocal("idx2")),e.call(l,I,e.getLocal("pSConst"),e.getLocal("idx1")),e.call(l,e.getLocal("idx2"),m,e.getLocal("idx2")),e.call(a+"_mul",m,e.getLocal("inc"),m),e.setLocal("i",e.i32_add(e.getLocal("i"),e.i32_const(1))),e.br(0))))}function L(){const C=t.addFunction(n+"_fftMix");C.addParam("pBuff","i32"),C.addParam("n","i32"),C.addParam("exp","i32"),C.addLocal("nGroups","i32"),C.addLocal("nPerGroup","i32"),C.addLocal("nPerGroupDiv2","i32"),C.addLocal("pairOffset","i32"),C.addLocal("idx1","i32"),C.addLocal("idx2","i32"),C.addLocal("i","i32"),C.addLocal("j","i32"),C.addLocal("pwm","i32");const e=C.getCodeBuilder(),m=e.i32_const(t.alloc(u)),I=e.i32_const(t.alloc(g)),h=e.i32_const(t.alloc(g));C.addCode(e.setLocal("nPerGroup",e.i32_shl(e.i32_const(1),e.getLocal("exp"))),e.setLocal("nPerGroupDiv2",e.i32_shr_u(e.getLocal("nPerGroup"),e.i32_const(1))),e.setLocal("nGroups",e.i32_shr_u(e.getLocal("n"),e.getLocal("exp"))),e.setLocal("pairOffset",e.i32_mul(e.getLocal("nPerGroupDiv2"),e.i32_const(g))),e.setLocal("pwm",e.i32_add(e.i32_const(S),e.i32_mul(e.getLocal("exp"),e.i32_const(u)))),e.setLocal("i",e.i32_const(0)),e.block(e.loop(e.br_if(1,e.i32_eq(e.getLocal("i"),e.getLocal("nGroups"))),e.call(a+"_one",m),e.setLocal("j",e.i32_const(0)),e.block(e.loop(e.br_if(1,e.i32_eq(e.getLocal("j"),e.getLocal("nPerGroupDiv2"))),e.setLocal("idx1",e.i32_add(e.getLocal("pBuff"),e.i32_mul(e.i32_add(e.i32_mul(e.getLocal("i"),e.getLocal("nPerGroup")),e.getLocal("j")),e.i32_const(g)))),e.setLocal("idx2",e.i32_add(e.getLocal("idx1"),e.getLocal("pairOffset"))),e.call(l,e.getLocal("idx2"),m,I),e.call(o+"_copy",e.getLocal("idx1"),h),e.call(o+"_add",h,I,e.getLocal("idx1")),e.call(o+"_sub",h,I,e.getLocal("idx2")),e.call(a+"_mul",m,e.getLocal("pwm"),m),e.setLocal("j",e.i32_add(e.getLocal("j"),e.i32_const(1))),e.br(0))),e.setLocal("i",e.i32_add(e.getLocal("i"),e.i32_const(1))),e.br(0))))}function i(){const C=t.addFunction(n+"_fftFinal");C.addParam("pBuff","i32"),C.addParam("n","i32"),C.addParam("factor","i32"),C.addLocal("idx1","i32"),C.addLocal("idx2","i32"),C.addLocal("i","i32"),C.addLocal("ndiv2","i32");const e=C.getCodeBuilder(),m=e.i32_const(t.alloc(g));C.addCode(e.setLocal("ndiv2",e.i32_shr_u(e.getLocal("n"),e.i32_const(1))),e.if(e.i32_and(e.getLocal("n"),e.i32_const(1)),e.call(l,e.i32_add(e.getLocal("pBuff"),e.i32_mul(e.getLocal("ndiv2"),e.i32_const(g))),e.getLocal("factor"),e.i32_add(e.getLocal("pBuff"),e.i32_mul(e.getLocal("ndiv2"),e.i32_const(g))))),e.setLocal("i",e.i32_const(0)),e.block(e.loop(e.br_if(1,e.i32_ge_u(e.getLocal("i"),e.getLocal("ndiv2"))),e.setLocal("idx1",e.i32_add(e.getLocal("pBuff"),e.i32_mul(e.getLocal("i"),e.i32_const(g)))),e.setLocal("idx2",e.i32_add(e.getLocal("pBuff"),e.i32_mul(e.i32_sub(e.i32_sub(e.getLocal("n"),e.i32_const(1)),e.getLocal("i")),e.i32_const(g)))),e.call(l,e.getLocal("idx2"),e.getLocal("factor"),m),e.call(l,e.getLocal("idx1"),e.getLocal("factor"),e.getLocal("idx2")),e.call(o+"_copy",m,e.getLocal("idx1")),e.setLocal("i",e.i32_add(e.getLocal("i"),e.i32_const(1))),e.br(0))))}W(),it(),K(),tt(),x(),z(),ot(),et(),pt(),wt(),L(),i(),ft(),t.exportFunction(n+"_fft"),t.exportFunction(n+"_ifft"),t.exportFunction(n+"_rawfft"),t.exportFunction(n+"_fftJoin"),t.exportFunction(n+"_fftJoinExt"),t.exportFunction(n+"_fftJoinExtInv"),t.exportFunction(n+"_fftMix"),t.exportFunction(n+"_fftFinal"),t.exportFunction(n+"_prepareLagrangeEvaluation")},ya=function(t,n,o){const l=t.modules[o].n64*8;function f(){const y=t.addFunction(n+"_zero");y.addParam("px","i32"),y.addParam("n","i32"),y.addLocal("lastp","i32"),y.addLocal("p","i32");const g=y.getCodeBuilder();y.addCode(g.setLocal("p",g.getLocal("px")),g.setLocal("lastp",g.i32_add(g.getLocal("px"),g.i32_mul(g.getLocal("n"),g.i32_const(l)))),g.block(g.loop(g.br_if(1,g.i32_eq(g.getLocal("p"),g.getLocal("lastp"))),g.call(o+"_zero",g.getLocal("p")),g.setLocal("p",g.i32_add(g.getLocal("p"),g.i32_const(l))),g.br(0))))}function u(){const y=t.addFunction(n+"_constructLC");y.addParam("ppolynomials","i32"),y.addParam("psignals","i32"),y.addParam("nSignals","i32"),y.addParam("pres","i32"),y.addLocal("i","i32"),y.addLocal("j","i32"),y.addLocal("pp","i32"),y.addLocal("ps","i32"),y.addLocal("pd","i32"),y.addLocal("ncoefs","i32");const g=y.getCodeBuilder(),s=g.i32_const(t.alloc(l));y.addCode(g.setLocal("i",g.i32_const(0)),g.setLocal("pp",g.getLocal("ppolynomials")),g.setLocal("ps",g.getLocal("psignals")),g.block(g.loop(g.br_if(1,g.i32_eq(g.getLocal("i"),g.getLocal("nSignals"))),g.setLocal("ncoefs",g.i32_load(g.getLocal("pp"))),g.setLocal("pp",g.i32_add(g.getLocal("pp"),g.i32_const(4))),g.setLocal("j",g.i32_const(0)),g.block(g.loop(g.br_if(1,g.i32_eq(g.getLocal("j"),g.getLocal("ncoefs"))),g.setLocal("pd",g.i32_add(g.getLocal("pres"),g.i32_mul(g.i32_load(g.getLocal("pp")),g.i32_const(l)))),g.setLocal("pp",g.i32_add(g.getLocal("pp"),g.i32_const(4))),g.call(o+"_mul",g.getLocal("ps"),g.getLocal("pp"),s),g.call(o+"_add",s,g.getLocal("pd"),g.getLocal("pd")),g.setLocal("pp",g.i32_add(g.getLocal("pp"),g.i32_const(l))),g.setLocal("j",g.i32_add(g.getLocal("j"),g.i32_const(1))),g.br(0))),g.setLocal("ps",g.i32_add(g.getLocal("ps"),g.i32_const(l))),g.setLocal("i",g.i32_add(g.getLocal("i"),g.i32_const(1))),g.br(0))))}return f(),u(),t.exportFunction(n+"_zero"),t.exportFunction(n+"_constructLC"),n},Ca=function(t,n,o){const l=t.modules[o].n64*8;function f(){const g=t.addFunction(n+"_buildABC");g.addParam("pCoefs","i32"),g.addParam("nCoefs","i32"),g.addParam("pWitness","i32"),g.addParam("pA","i32"),g.addParam("pB","i32"),g.addParam("pC","i32"),g.addParam("offsetOut","i32"),g.addParam("nOut","i32"),g.addParam("offsetWitness","i32"),g.addParam("nWitness","i32"),g.addLocal("it","i32"),g.addLocal("ita","i32"),g.addLocal("itb","i32"),g.addLocal("last","i32"),g.addLocal("m","i32"),g.addLocal("c","i32"),g.addLocal("s","i32"),g.addLocal("pOut","i32");const s=g.getCodeBuilder(),E=s.i32_const(t.alloc(l));g.addCode(s.setLocal("ita",s.getLocal("pA")),s.setLocal("itb",s.getLocal("pB")),s.setLocal("last",s.i32_add(s.getLocal("pA"),s.i32_mul(s.getLocal("nOut"),s.i32_const(l)))),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("ita"),s.getLocal("last"))),s.call(o+"_zero",s.getLocal("ita")),s.call(o+"_zero",s.getLocal("itb")),s.setLocal("ita",s.i32_add(s.getLocal("ita"),s.i32_const(l))),s.setLocal("itb",s.i32_add(s.getLocal("itb"),s.i32_const(l))),s.br(0))),s.setLocal("it",s.getLocal("pCoefs")),s.setLocal("last",s.i32_add(s.getLocal("pCoefs"),s.i32_mul(s.getLocal("nCoefs"),s.i32_const(l+12)))),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("it"),s.getLocal("last"))),s.setLocal("s",s.i32_load(s.getLocal("it"),8)),s.if(s.i32_or(s.i32_lt_u(s.getLocal("s"),s.getLocal("offsetWitness")),s.i32_ge_u(s.getLocal("s"),s.i32_add(s.getLocal("offsetWitness"),s.getLocal("nWitness")))),[...s.setLocal("it",s.i32_add(s.getLocal("it"),s.i32_const(l+12))),...s.br(1)]),s.setLocal("m",s.i32_load(s.getLocal("it"))),s.if(s.i32_eq(s.getLocal("m"),s.i32_const(0)),s.setLocal("pOut",s.getLocal("pA")),s.if(s.i32_eq(s.getLocal("m"),s.i32_const(1)),s.setLocal("pOut",s.getLocal("pB")),[...s.setLocal("it",s.i32_add(s.getLocal("it"),s.i32_const(l+12))),...s.br(1)])),s.setLocal("c",s.i32_load(s.getLocal("it"),4)),s.if(s.i32_or(s.i32_lt_u(s.getLocal("c"),s.getLocal("offsetOut")),s.i32_ge_u(s.getLocal("c"),s.i32_add(s.getLocal("offsetOut"),s.getLocal("nOut")))),[...s.setLocal("it",s.i32_add(s.getLocal("it"),s.i32_const(l+12))),...s.br(1)]),s.setLocal("pOut",s.i32_add(s.getLocal("pOut"),s.i32_mul(s.i32_sub(s.getLocal("c"),s.getLocal("offsetOut")),s.i32_const(l)))),s.call(o+"_mul",s.i32_add(s.getLocal("pWitness"),s.i32_mul(s.i32_sub(s.getLocal("s"),s.getLocal("offsetWitness")),s.i32_const(l))),s.i32_add(s.getLocal("it"),s.i32_const(12)),E),s.call(o+"_add",s.getLocal("pOut"),E,s.getLocal("pOut")),s.setLocal("it",s.i32_add(s.getLocal("it"),s.i32_const(l+12))),s.br(0))),s.setLocal("ita",s.getLocal("pA")),s.setLocal("itb",s.getLocal("pB")),s.setLocal("it",s.getLocal("pC")),s.setLocal("last",s.i32_add(s.getLocal("pA"),s.i32_mul(s.getLocal("nOut"),s.i32_const(l)))),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("ita"),s.getLocal("last"))),s.call(o+"_mul",s.getLocal("ita"),s.getLocal("itb"),s.getLocal("it")),s.setLocal("ita",s.i32_add(s.getLocal("ita"),s.i32_const(l))),s.setLocal("itb",s.i32_add(s.getLocal("itb"),s.i32_const(l))),s.setLocal("it",s.i32_add(s.getLocal("it"),s.i32_const(l))),s.br(0))))}function u(){const g=t.addFunction(n+"_joinABC");g.addParam("pA","i32"),g.addParam("pB","i32"),g.addParam("pC","i32"),g.addParam("n","i32"),g.addParam("pP","i32"),g.addLocal("ita","i32"),g.addLocal("itb","i32"),g.addLocal("itc","i32"),g.addLocal("itp","i32"),g.addLocal("last","i32");const s=g.getCodeBuilder(),E=s.i32_const(t.alloc(l));g.addCode(s.setLocal("ita",s.getLocal("pA")),s.setLocal("itb",s.getLocal("pB")),s.setLocal("itc",s.getLocal("pC")),s.setLocal("itp",s.getLocal("pP")),s.setLocal("last",s.i32_add(s.getLocal("pA"),s.i32_mul(s.getLocal("n"),s.i32_const(l)))),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("ita"),s.getLocal("last"))),s.call(o+"_mul",s.getLocal("ita"),s.getLocal("itb"),E),s.call(o+"_sub",E,s.getLocal("itc"),s.getLocal("itp")),s.setLocal("ita",s.i32_add(s.getLocal("ita"),s.i32_const(l))),s.setLocal("itb",s.i32_add(s.getLocal("itb"),s.i32_const(l))),s.setLocal("itc",s.i32_add(s.getLocal("itc"),s.i32_const(l))),s.setLocal("itp",s.i32_add(s.getLocal("itp"),s.i32_const(l))),s.br(0))))}function y(){const g=t.addFunction(n+"_batchAdd");g.addParam("pa","i32"),g.addParam("pb","i32"),g.addParam("n","i32"),g.addParam("pr","i32"),g.addLocal("ita","i32"),g.addLocal("itb","i32"),g.addLocal("itr","i32"),g.addLocal("last","i32");const s=g.getCodeBuilder();g.addCode(s.setLocal("ita",s.getLocal("pa")),s.setLocal("itb",s.getLocal("pb")),s.setLocal("itr",s.getLocal("pr")),s.setLocal("last",s.i32_add(s.getLocal("pa"),s.i32_mul(s.getLocal("n"),s.i32_const(l)))),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("ita"),s.getLocal("last"))),s.call(o+"_add",s.getLocal("ita"),s.getLocal("itb"),s.getLocal("itr")),s.setLocal("ita",s.i32_add(s.getLocal("ita"),s.i32_const(l))),s.setLocal("itb",s.i32_add(s.getLocal("itb"),s.i32_const(l))),s.setLocal("itr",s.i32_add(s.getLocal("itr"),s.i32_const(l))),s.br(0))))}return f(),u(),y(),t.exportFunction(n+"_buildABC"),t.exportFunction(n+"_joinABC"),t.exportFunction(n+"_batchAdd"),n},ma=function(t,n,o,a,l,f,u,y){const g=t.addFunction(n);g.addParam("pIn","i32"),g.addParam("n","i32"),g.addParam("pFirst","i32"),g.addParam("pInc","i32"),g.addParam("pOut","i32"),g.addLocal("pOldFree","i32"),g.addLocal("i","i32"),g.addLocal("pFrom","i32"),g.addLocal("pTo","i32");const s=g.getCodeBuilder(),E=s.i32_const(t.alloc(u));g.addCode(s.setLocal("pFrom",s.getLocal("pIn")),s.setLocal("pTo",s.getLocal("pOut"))),g.addCode(s.call(a+"_copy",s.getLocal("pFirst"),E)),g.addCode(s.setLocal("i",s.i32_const(0)),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("i"),s.getLocal("n"))),s.call(y,s.getLocal("pFrom"),E,s.getLocal("pTo")),s.setLocal("pFrom",s.i32_add(s.getLocal("pFrom"),s.i32_const(l))),s.setLocal("pTo",s.i32_add(s.getLocal("pTo"),s.i32_const(f))),s.call(a+"_mul",E,s.getLocal("pInc"),E),s.setLocal("i",s.i32_add(s.getLocal("i"),s.i32_const(1))),s.br(0)))),t.exportFunction(n)};const Ft=dn,Ue=Lo,ze=ua,wa=ha,De=fa,Ba=Aa,Ao=Ia,ke=ya,Te=Ca,Dn=ma,{bitLength:Ge,modInv:Re,isOdd:Ea,isNegative:Ne}=Nt;var Ke=function(t,n){const o=n||"bn128";if(t.modules[o])return o;const a=21888242871839275222246405745257275088696311157297823662689037894645226208583n,l=21888242871839275222246405745257275088548364400416034343698204186575808495617n,f=Math.floor((Ge(a-1n)-1)/64)+1,u=f*8,y=u,g=u,s=g*2,E=g*12,F=t.alloc(Ft.bigInt2BytesLE(l,y)),A=Ue(t,a,"f1m");ze(t,l,"fr","frm");const D=t.alloc(Ft.bigInt2BytesLE(U(3n),g)),k=Ba(t,"g1m","f1m",D);Ao(t,"frm","frm","frm","frm_mul"),ke(t,"pol","frm"),Te(t,"qap","frm");const B=wa(t,"f1m_neg","f2m","f1m"),G=t.alloc([...Ft.bigInt2BytesLE(U(19485874751759354771024239261021720505790618469301721065564631296452457478373n),g),...Ft.bigInt2BytesLE(U(266929791119991161246907387137283842545076965332900288569378510910307636690n),g)]),S=Ba(t,"g2m","f2m",G);function st(N,r){const d=t.addFunction(N);d.addParam("pG","i32"),d.addParam("pFr","i32"),d.addParam("pr","i32");const P=d.getCodeBuilder(),q=P.i32_const(t.alloc(u));d.addCode(P.call("frm_fromMontgomery",P.getLocal("pFr"),q),P.call(r,P.getLocal("pG"),q,P.i32_const(u),P.getLocal("pr"))),t.exportFunction(N)}st("g1m_timesFr","g1m_timesScalar"),Ao(t,"g1m","g1m","frm","g1m_timesFr"),st("g2m_timesFr","g2m_timesScalar"),Ao(t,"g2m","g2m","frm","g2m_timesFr"),st("g1m_timesFrAffine","g1m_timesScalarAffine"),st("g2m_timesFrAffine","g2m_timesScalarAffine"),Dn(t,"frm_batchApplyKey","fmr","frm",u,u,u,"frm_mul"),Dn(t,"g1m_batchApplyKey","g1m","frm",u*3,u*3,u,"g1m_timesFr"),Dn(t,"g1m_batchApplyKeyMixed","g1m","frm",u*2,u*3,u,"g1m_timesFrAffine"),Dn(t,"g2m_batchApplyKey","g2m","frm",u*2*3,u*3*2,u,"g2m_timesFr"),Dn(t,"g2m_batchApplyKeyMixed","g2m","frm",u*2*2,u*3*2,u,"g2m_timesFrAffine");function U(N){return BigInt(N)*(1n<<BigInt(g*8))%a}const lt=[1n,2n,1n],w=t.alloc([...Ft.bigInt2BytesLE(U(lt[0]),g),...Ft.bigInt2BytesLE(U(lt[1]),g),...Ft.bigInt2BytesLE(U(lt[2]),g)]),_=[0n,1n,0n],p=t.alloc([...Ft.bigInt2BytesLE(U(_[0]),g),...Ft.bigInt2BytesLE(U(_[1]),g),...Ft.bigInt2BytesLE(U(_[2]),g)]),V=[[10857046999023057135944570762232829481370756359578518086990519993285655852781n,11559732032986387107991004021392285783925812861821192530917403151452391805634n],[8495653923123431417604973247489272438418190587263600148770280649306958101930n,4082367875863433681332203403145435568316851327593401208105741076214120093531n],[1n,0n]],$=t.alloc([...Ft.bigInt2BytesLE(U(V[0][0]),g),...Ft.bigInt2BytesLE(U(V[0][1]),g),...Ft.bigInt2BytesLE(U(V[1][0]),g),...Ft.bigInt2BytesLE(U(V[1][1]),g),...Ft.bigInt2BytesLE(U(V[2][0]),g),...Ft.bigInt2BytesLE(U(V[2][1]),g)]),X=[[0n,0n],[1n,0n],[0n,0n]],Q=t.alloc([...Ft.bigInt2BytesLE(U(X[0][0]),g),...Ft.bigInt2BytesLE(U(X[0][1]),g),...Ft.bigInt2BytesLE(U(X[1][0]),g),...Ft.bigInt2BytesLE(U(X[1][1]),g),...Ft.bigInt2BytesLE(U(X[2][0]),g),...Ft.bigInt2BytesLE(U(X[2][1]),g)]),b=t.alloc([...Ft.bigInt2BytesLE(U(1),g),...Ft.bigInt2BytesLE(U(0),g),...Ft.bigInt2BytesLE(U(0),g),...Ft.bigInt2BytesLE(U(0),g),...Ft.bigInt2BytesLE(U(0),g),...Ft.bigInt2BytesLE(U(0),g),...Ft.bigInt2BytesLE(U(0),g),...Ft.bigInt2BytesLE(U(0),g),...Ft.bigInt2BytesLE(U(0),g),...Ft.bigInt2BytesLE(U(0),g),...Ft.bigInt2BytesLE(U(0),g),...Ft.bigInt2BytesLE(U(0),g)]),x=t.alloc([...Ft.bigInt2BytesLE(U(9),g),...Ft.bigInt2BytesLE(U(1),g)]),z=t.alloc([...Ft.bigInt2BytesLE(U(Re(2n,a)),g),...Ft.bigInt2BytesLE(0n,g)]),ot=x,tt=t.alloc([...Ft.bigInt2BytesLE(U(19485874751759354771024239261021720505790618469301721065564631296452457478373n),g),...Ft.bigInt2BytesLE(U(266929791119991161246907387137283842545076965332900288569378510910307636690n),g)]);function K(){const N=t.addFunction(o+"_mulNR6");N.addParam("x","i32"),N.addParam("pr","i32");const r=N.getCodeBuilder();N.addCode(r.call(B+"_mul",r.i32_const(x),r.getLocal("x"),r.getLocal("pr")))}K();const it=De(t,o+"_mulNR6","f6m","f2m");function W(){const N=t.addFunction(o+"_mulNR12");N.addParam("x","i32"),N.addParam("pr","i32");const r=N.getCodeBuilder();N.addCode(r.call(B+"_mul",r.i32_const(x),r.i32_add(r.getLocal("x"),r.i32_const(u*4)),r.getLocal("pr")),r.call(B+"_copy",r.getLocal("x"),r.i32_add(r.getLocal("pr"),r.i32_const(u*2))),r.call(B+"_copy",r.i32_add(r.getLocal("x"),r.i32_const(u*2)),r.i32_add(r.getLocal("pr"),r.i32_const(u*4))))}W();const et=wa(t,o+"_mulNR12","ftm",it),wt=J(29793968203157093288n),ft=t.alloc(wt),L=3*s,i=wt.length-1,e=wt.reduce((N,r)=>N+(r!=0?1:0),0)+i+1,m=6*u,I=3*u*2+e*L;t.modules[o]={n64:f,pG1gen:w,pG1zero:p,pG1b:D,pG2gen:$,pG2zero:Q,pG2b:G,pq:t.modules.f1m.pq,pr:F,pOneT:b,prePSize:m,preQSize:I,r:l.toString(),q:a.toString()};const h=4965661367192848881n;function v(N){let r=N;const d=[];for(;r>0n;){if(Ea(r)){const P=2-Number(r%4n);d.push(P),r=r-BigInt(P)}else d.push(0);r=r>>1n}return d}function J(N){let r=N;const d=[];for(;r>0n;)Ea(r)?d.push(1):d.push(0),r=r>>1n;return d}function R(){const N=t.addFunction(o+"_prepareG1");N.addParam("pP","i32"),N.addParam("ppreP","i32");const r=N.getCodeBuilder();N.addCode(r.call(k+"_normalize",r.getLocal("pP"),r.getLocal("ppreP")))}function at(){const N=t.addFunction(o+"_prepAddStep");N.addParam("pQ","i32"),N.addParam("pR","i32"),N.addParam("pCoef","i32");const r=N.getCodeBuilder(),d=r.getLocal("pQ"),P=r.i32_add(r.getLocal("pQ"),r.i32_const(s)),q=r.getLocal("pR"),O=r.i32_add(r.getLocal("pR"),r.i32_const(s)),T=r.i32_add(r.getLocal("pR"),r.i32_const(2*s)),M=r.getLocal("pCoef"),j=r.i32_add(r.getLocal("pCoef"),r.i32_const(s)),Y=r.i32_add(r.getLocal("pCoef"),r.i32_const(2*s)),Z=j,H=r.i32_const(t.alloc(s)),nt=r.i32_const(t.alloc(s)),ut=r.i32_const(t.alloc(s)),_t=r.i32_const(t.alloc(s)),ct=r.i32_const(t.alloc(s)),At=r.i32_const(t.alloc(s)),Ct=r.i32_const(t.alloc(s));N.addCode(r.call(B+"_mul",d,T,Z),r.call(B+"_sub",q,Z,Z),r.call(B+"_mul",P,T,H),r.call(B+"_sub",O,H,H),r.call(B+"_square",Z,nt),r.call(B+"_square",H,ut),r.call(B+"_mul",Z,nt,_t),r.call(B+"_mul",q,nt,ct),r.call(B+"_add",ct,ct,Ct),r.call(B+"_mul",T,ut,At),r.call(B+"_add",_t,At,At),r.call(B+"_sub",At,Ct,At),r.call(B+"_mul",Z,At,q),r.call(B+"_mul",_t,O,O),r.call(B+"_sub",ct,At,Ct),r.call(B+"_mul",H,Ct,Ct),r.call(B+"_sub",Ct,O,O),r.call(B+"_mul",T,_t,T),r.call(B+"_mul",Z,P,Ct),r.call(B+"_mul",H,d,M),r.call(B+"_sub",M,Ct,M),r.call(B+"_mul",M,r.i32_const(ot),M),r.call(B+"_neg",H,Y))}function It(){const N=t.addFunction(o+"_prepDblStep");N.addParam("pR","i32"),N.addParam("pCoef","i32");const r=N.getCodeBuilder(),d=r.getLocal("pR"),P=r.i32_add(r.getLocal("pR"),r.i32_const(s)),q=r.i32_add(r.getLocal("pR"),r.i32_const(2*s)),O=r.getLocal("pCoef"),T=r.i32_add(r.getLocal("pCoef"),r.i32_const(s)),M=r.i32_add(r.getLocal("pCoef"),r.i32_const(2*s)),j=r.i32_const(t.alloc(s)),Y=r.i32_const(t.alloc(s)),Z=r.i32_const(t.alloc(s)),H=r.i32_const(t.alloc(s)),nt=r.i32_const(t.alloc(s)),ut=r.i32_const(t.alloc(s)),_t=r.i32_const(t.alloc(s)),ct=r.i32_const(t.alloc(s)),At=r.i32_const(t.alloc(s)),Ct=r.i32_const(t.alloc(s)),vt=r.i32_const(t.alloc(s)),yt=r.i32_const(t.alloc(s));N.addCode(r.call(B+"_mul",P,r.i32_const(z),j),r.call(B+"_mul",d,j,j),r.call(B+"_square",P,Y),r.call(B+"_square",q,Z),r.call(B+"_add",Z,Z,H),r.call(B+"_add",H,Z,H),r.call(B+"_mul",r.i32_const(tt),H,nt),r.call(B+"_add",nt,nt,ut),r.call(B+"_add",nt,ut,ut),r.call(B+"_add",Y,ut,_t),r.call(B+"_mul",_t,r.i32_const(z),_t),r.call(B+"_add",Y,Z,yt),r.call(B+"_add",P,q,ct),r.call(B+"_square",ct,ct),r.call(B+"_sub",ct,yt,ct),r.call(B+"_sub",nt,Y,At),r.call(B+"_square",d,Ct),r.call(B+"_square",nt,vt),r.call(B+"_sub",Y,ut,yt),r.call(B+"_mul",j,yt,d),r.call(B+"_add",vt,vt,yt),r.call(B+"_add",vt,yt,yt),r.call(B+"_square",_t,P),r.call(B+"_sub",P,yt,P),r.call(B+"_mul",Y,ct,q),r.call(B+"_mul",r.i32_const(ot),At,O),r.call(B+"_neg",ct,T),r.call(B+"_add",Ct,Ct,M),r.call(B+"_add",Ct,M,M))}function dt(){const N=t.addFunction(o+"_mulByQ");N.addParam("p1","i32"),N.addParam("pr","i32");const r=N.getCodeBuilder(),d=r.getLocal("p1"),P=r.i32_add(r.getLocal("p1"),r.i32_const(s)),q=r.i32_add(r.getLocal("p1"),r.i32_const(s*2)),O=r.getLocal("pr"),T=r.i32_add(r.getLocal("pr"),r.i32_const(s)),M=r.i32_add(r.getLocal("pr"),r.i32_const(s*2)),j=r.i32_const(t.alloc([...Ft.bigInt2BytesLE(U("21575463638280843010398324269430826099269044274347216827212613867836435027261"),g),...Ft.bigInt2BytesLE(U("10307601595873709700152284273816112264069230130616436755625194854815875713954"),g)])),Y=r.i32_const(t.alloc([...Ft.bigInt2BytesLE(U("2821565182194536844548159561693502659359617185244120367078079554186484126554"),g),...Ft.bigInt2BytesLE(U("3505843767911556378687030309984248845540243509899259641013678093033130930403"),g)]));N.addCode(r.call(B+"_conjugate",d,O),r.call(B+"_mul",j,O,O),r.call(B+"_conjugate",P,T),r.call(B+"_mul",Y,T,T),r.call(B+"_conjugate",q,M))}function Lt(){dt();const N=t.addFunction(o+"_prepareG2");N.addParam("pQ","i32"),N.addParam("ppreQ","i32"),N.addLocal("pCoef","i32"),N.addLocal("i","i32");const r=N.getCodeBuilder(),d=r.getLocal("pQ"),P=t.alloc(s*3),q=r.i32_const(P),O=r.i32_const(P),T=r.i32_const(P+s),M=r.i32_const(P+2*s),j=r.i32_add(r.getLocal("ppreQ"),r.i32_const(0)),Y=r.i32_add(r.getLocal("ppreQ"),r.i32_const(s)),Z=t.alloc(s*3),H=r.i32_const(Z),nt=t.alloc(s*3),ut=r.i32_const(nt),_t=r.i32_const(nt+s);N.addCode(r.call(S+"_normalize",d,j),r.call(B+"_copy",j,O),r.call(B+"_copy",Y,T),r.call(B+"_one",M)),N.addCode(r.setLocal("pCoef",r.i32_add(r.getLocal("ppreQ"),r.i32_const(s*3))),r.setLocal("i",r.i32_const(wt.length-2)),r.block(r.loop(r.call(o+"_prepDblStep",q,r.getLocal("pCoef")),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))),r.if(r.i32_load8_s(r.getLocal("i"),ft),[...r.call(o+"_prepAddStep",j,q,r.getLocal("pCoef")),...r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L)))]),r.br_if(1,r.i32_eqz(r.getLocal("i"))),r.setLocal("i",r.i32_sub(r.getLocal("i"),r.i32_const(1))),r.br(0)))),N.addCode(r.call(o+"_mulByQ",j,H),r.call(o+"_mulByQ",H,ut)),N.addCode(r.call(B+"_neg",_t,_t),r.call(o+"_prepAddStep",H,q,r.getLocal("pCoef")),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))),r.call(o+"_prepAddStep",ut,q,r.getLocal("pCoef")),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))))}function St(){const N=t.addFunction(o+"__mulBy024Old");N.addParam("pEll0","i32"),N.addParam("pEllVW","i32"),N.addParam("pEllVV","i32"),N.addParam("pR","i32");const r=N.getCodeBuilder(),d=r.getLocal("pEll0"),P=r.getLocal("pEllVV"),q=r.getLocal("pEllVW"),O=r.getLocal("pR"),T=t.alloc(E),M=r.i32_const(T),j=r.i32_const(T),Y=r.i32_const(T+s),Z=r.i32_const(T+s*2),H=r.i32_const(T+s*3),nt=r.i32_const(T+s*4),ut=r.i32_const(T+s*5);N.addCode(r.call(B+"_copy",d,j),r.call(B+"_zero",Y),r.call(B+"_copy",P,Z),r.call(B+"_zero",H),r.call(B+"_copy",q,nt),r.call(B+"_zero",ut),r.call(et+"_mul",M,O,O))}function gt(){const N=t.addFunction(o+"__mulBy024");N.addParam("pEll0","i32"),N.addParam("pEllVW","i32"),N.addParam("pEllVV","i32"),N.addParam("pR","i32");const r=N.getCodeBuilder(),d=r.getLocal("pEll0"),P=r.getLocal("pEllVV"),q=r.getLocal("pEllVW"),O=r.getLocal("pR"),T=r.i32_add(r.getLocal("pR"),r.i32_const(2*u)),M=r.i32_add(r.getLocal("pR"),r.i32_const(4*u)),j=r.i32_add(r.getLocal("pR"),r.i32_const(6*u)),Y=r.i32_add(r.getLocal("pR"),r.i32_const(8*u)),Z=r.i32_add(r.getLocal("pR"),r.i32_const(10*u)),H=r.i32_const(t.alloc(s)),nt=r.i32_const(t.alloc(s)),ut=r.i32_const(t.alloc(s)),_t=r.i32_const(t.alloc(s)),ct=r.i32_const(t.alloc(s)),At=r.i32_const(t.alloc(s)),Ct=r.i32_const(t.alloc(s)),vt=r.i32_const(t.alloc(s)),yt=r.i32_const(t.alloc(s)),mt=r.i32_const(t.alloc(s)),ht=r.i32_const(t.alloc(s));N.addCode(r.call(B+"_mul",O,d,Ct),r.call(B+"_mul",M,P,vt),r.call(B+"_mul",Y,q,yt),r.call(B+"_add",O,Y,ut),r.call(B+"_add",O,M,nt),r.call(B+"_add",T,j,_t),r.call(B+"_add",_t,Z,_t),r.call(B+"_mul",T,P,mt),r.call(B+"_add",mt,yt,ct),r.call(B+"_mul",r.i32_const(x),ct,At),r.call(B+"_add",At,Ct,O),r.call(B+"_mul",Z,q,ct),r.call(B+"_add",mt,ct,mt),r.call(B+"_add",ct,vt,ct),r.call(B+"_mul",r.i32_const(x),ct,At),r.call(B+"_mul",T,d,ct),r.call(B+"_add",mt,ct,mt),r.call(B+"_add",At,ct,T),r.call(B+"_add",d,P,H),r.call(B+"_mul",nt,H,ct),r.call(B+"_add",Ct,vt,ht),r.call(B+"_sub",ct,ht,ct),r.call(B+"_mul",j,q,At),r.call(B+"_add",mt,At,mt),r.call(B+"_add",M,Y,H),r.call(B+"_add",ct,At,M),r.call(B+"_add",P,q,nt),r.call(B+"_mul",nt,H,ct),r.call(B+"_add",vt,yt,ht),r.call(B+"_sub",ct,ht,ct),r.call(B+"_mul",r.i32_const(x),ct,At),r.call(B+"_mul",j,d,ct),r.call(B+"_add",mt,ct,mt),r.call(B+"_add",At,ct,j),r.call(B+"_mul",Z,P,ct),r.call(B+"_add",mt,ct,mt),r.call(B+"_mul",r.i32_const(x),ct,At),r.call(B+"_add",d,q,H),r.call(B+"_mul",ut,H,ct),r.call(B+"_add",Ct,yt,ht),r.call(B+"_sub",ct,ht,ct),r.call(B+"_add",At,ct,Y),r.call(B+"_add",d,P,H),r.call(B+"_add",H,q,H),r.call(B+"_mul",_t,H,ct),r.call(B+"_sub",ct,mt,Z))}function rt(){const N=t.addFunction(o+"_millerLoop");N.addParam("ppreP","i32"),N.addParam("ppreQ","i32"),N.addParam("r","i32"),N.addLocal("pCoef","i32"),N.addLocal("i","i32");const r=N.getCodeBuilder(),d=r.getLocal("ppreP"),P=r.i32_add(r.getLocal("ppreP"),r.i32_const(g)),q=r.getLocal("pCoef"),O=r.i32_add(r.getLocal("pCoef"),r.i32_const(s)),T=r.i32_add(r.getLocal("pCoef"),r.i32_const(2*s)),M=t.alloc(s),j=r.i32_const(M),Y=t.alloc(s),Z=r.i32_const(Y),H=r.getLocal("r");N.addCode(r.call(et+"_one",H),r.setLocal("pCoef",r.i32_add(r.getLocal("ppreQ"),r.i32_const(s*3))),r.setLocal("i",r.i32_const(wt.length-2)),r.block(r.loop(r.call(et+"_square",H,H),r.call(B+"_mul1",O,P,j),r.call(B+"_mul1",T,d,Z),r.call(o+"__mulBy024",q,j,Z,H),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))),r.if(r.i32_load8_s(r.getLocal("i"),ft),[...r.call(B+"_mul1",O,P,j),...r.call(B+"_mul1",T,d,Z),...r.call(o+"__mulBy024",q,j,Z,H),...r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L)))]),r.br_if(1,r.i32_eqz(r.getLocal("i"))),r.setLocal("i",r.i32_sub(r.getLocal("i"),r.i32_const(1))),r.br(0)))),N.addCode(r.call(B+"_mul1",O,P,j),r.call(B+"_mul1",T,d,Z),r.call(o+"__mulBy024",q,j,Z,H),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))),r.call(B+"_mul1",O,P,j),r.call(B+"_mul1",T,d,Z),r.call(o+"__mulBy024",q,j,Z,H),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))))}function bt(N){const r=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[8376118865763821496583973867626364092589906065868298776909617916018768340080n,16469823323077808223889137241176536799009286646108169935659301613961712198316n],[21888242871839275220042445260109153167277707414472061641714758635765020556617n,0n],[11697423496358154304825782922584725312912383441159505038794027105778954184319n,303847389135065887422783454877609941456349188919719272345083954437860409601n],[21888242871839275220042445260109153167277707414472061641714758635765020556616n,0n],[3321304630594332808241809054958361220322477375291206261884409189760185844239n,5722266937896532885780051958958348231143373700109372999374820235121374419868n],[21888242871839275222246405745257275088696311157297823662689037894645226208582n,0n],[13512124006075453725662431877630910996106405091429524885779419978626457868503n,5418419548761466998357268504080738289687024511189653727029736280683514010267n],[2203960485148121921418603742825762020974279258880205651966n,0n],[10190819375481120917420622822672549775783927716138318623895010788866272024264n,21584395482704209334823622290379665147239961968378104390343953940207365798982n],[2203960485148121921418603742825762020974279258880205651967n,0n],[18566938241244942414004596690298913868373833782006617400804628704885040364344n,16165975933942742336466353786298926857552937457188450663314217659523851788715n]]],d=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[21575463638280843010398324269430826099269044274347216827212613867836435027261n,10307601595873709700152284273816112264069230130616436755625194854815875713954n],[21888242871839275220042445260109153167277707414472061641714758635765020556616n,0n],[3772000881919853776433695186713858239009073593817195771773381919316419345261n,2236595495967245188281701248203181795121068902605861227855261137820944008926n],[2203960485148121921418603742825762020974279258880205651966n,0n],[18429021223477853657660792034369865839114504446431234726392080002137598044644n,9344045779998320333812420223237981029506012124075525679208581902008406485703n]],[[1n,0n],[2581911344467009335267311115468803099551665605076196740867805258568234346338n,19937756971775647987995932169929341994314640652964949448313374472400716661030n],[2203960485148121921418603742825762020974279258880205651966n,0n],[5324479202449903542726783395506214481928257762400643279780343368557297135718n,16208900380737693084919495127334387981393726419856888799917914180988844123039n],[21888242871839275220042445260109153167277707414472061641714758635765020556616n,0n],[13981852324922362344252311234282257507216387789820983642040889267519694726527n,7629828391165209371577384193250820201684255241773809077146787135900891633097n]]],P=t.addFunction(o+"__frobeniusMap"+N);P.addParam("x","i32"),P.addParam("r","i32");const q=P.getCodeBuilder();for(let T=0;T<6;T++){const M=T==0?q.getLocal("x"):q.i32_add(q.getLocal("x"),q.i32_const(T*s)),j=M,Y=q.i32_add(q.getLocal("x"),q.i32_const(T*s+g)),Z=T==0?q.getLocal("r"):q.i32_add(q.getLocal("r"),q.i32_const(T*s)),H=Z,nt=q.i32_add(q.getLocal("r"),q.i32_const(T*s+g)),ut=O(r[Math.floor(T/3)][N%12],d[T%3][N%6]),_t=t.alloc([...Ft.bigInt2BytesLE(U(ut[0]),32),...Ft.bigInt2BytesLE(U(ut[1]),32)]);N%2==1?P.addCode(q.call(A+"_copy",j,H),q.call(A+"_neg",Y,nt),q.call(B+"_mul",Z,q.i32_const(_t),Z)):P.addCode(q.call(B+"_mul",M,q.i32_const(_t),Z))}function O(T,M){const j=BigInt(T[0]),Y=BigInt(T[1]),Z=BigInt(M[0]),H=BigInt(M[1]),nt=[(j*Z-Y*H)%a,(j*H+Y*Z)%a];return Ne(nt[0])&&(nt[0]=nt[0]+a),nt}}function xt(){const N=t.addFunction(o+"__finalExponentiationFirstChunk");N.addParam("x","i32"),N.addParam("r","i32");const r=N.getCodeBuilder(),d=r.getLocal("x"),P=d,q=r.i32_add(d,r.i32_const(u*6)),O=r.getLocal("r"),T=t.alloc(E),M=r.i32_const(T),j=M,Y=r.i32_const(T+u*6),Z=r.i32_const(t.alloc(E)),H=r.i32_const(t.alloc(E)),nt=r.i32_const(t.alloc(E));N.addCode(r.call(it+"_copy",P,j),r.call(it+"_neg",q,Y),r.call(et+"_inverse",d,Z),r.call(et+"_mul",M,Z,H),r.call(o+"__frobeniusMap2",H,nt),r.call(et+"_mul",H,nt,O))}function Mt(){const N=t.addFunction(o+"__cyclotomicSquare");N.addParam("x","i32"),N.addParam("r","i32");const r=N.getCodeBuilder(),d=r.getLocal("x"),P=r.i32_add(r.getLocal("x"),r.i32_const(s)),q=r.i32_add(r.getLocal("x"),r.i32_const(2*s)),O=r.i32_add(r.getLocal("x"),r.i32_const(3*s)),T=r.i32_add(r.getLocal("x"),r.i32_const(4*s)),M=r.i32_add(r.getLocal("x"),r.i32_const(5*s)),j=r.getLocal("r"),Y=r.i32_add(r.getLocal("r"),r.i32_const(s)),Z=r.i32_add(r.getLocal("r"),r.i32_const(2*s)),H=r.i32_add(r.getLocal("r"),r.i32_const(3*s)),nt=r.i32_add(r.getLocal("r"),r.i32_const(4*s)),ut=r.i32_add(r.getLocal("r"),r.i32_const(5*s)),_t=r.i32_const(t.alloc(s)),ct=r.i32_const(t.alloc(s)),At=r.i32_const(t.alloc(s)),Ct=r.i32_const(t.alloc(s)),vt=r.i32_const(t.alloc(s)),yt=r.i32_const(t.alloc(s)),mt=r.i32_const(t.alloc(s)),ht=r.i32_const(t.alloc(s));N.addCode(r.call(B+"_mul",d,T,mt),r.call(B+"_mul",T,r.i32_const(x),_t),r.call(B+"_add",d,_t,_t),r.call(B+"_add",d,T,ht),r.call(B+"_mul",ht,_t,_t),r.call(B+"_mul",r.i32_const(x),mt,ht),r.call(B+"_add",mt,ht,ht),r.call(B+"_sub",_t,ht,_t),r.call(B+"_add",mt,mt,ct),r.call(B+"_mul",O,q,mt),r.call(B+"_mul",q,r.i32_const(x),At),r.call(B+"_add",O,At,At),r.call(B+"_add",O,q,ht),r.call(B+"_mul",ht,At,At),r.call(B+"_mul",r.i32_const(x),mt,ht),r.call(B+"_add",mt,ht,ht),r.call(B+"_sub",At,ht,At),r.call(B+"_add",mt,mt,Ct),r.call(B+"_mul",P,M,mt),r.call(B+"_mul",M,r.i32_const(x),vt),r.call(B+"_add",P,vt,vt),r.call(B+"_add",P,M,ht),r.call(B+"_mul",ht,vt,vt),r.call(B+"_mul",r.i32_const(x),mt,ht),r.call(B+"_add",mt,ht,ht),r.call(B+"_sub",vt,ht,vt),r.call(B+"_add",mt,mt,yt),r.call(B+"_sub",_t,d,j),r.call(B+"_add",j,j,j),r.call(B+"_add",_t,j,j),r.call(B+"_add",ct,T,nt),r.call(B+"_add",nt,nt,nt),r.call(B+"_add",ct,nt,nt),r.call(B+"_mul",yt,r.i32_const(ot),ht),r.call(B+"_add",ht,O,H),r.call(B+"_add",H,H,H),r.call(B+"_add",ht,H,H),r.call(B+"_sub",vt,q,Z),r.call(B+"_add",Z,Z,Z),r.call(B+"_add",vt,Z,Z),r.call(B+"_sub",At,P,Y),r.call(B+"_add",Y,Y,Y),r.call(B+"_add",At,Y,Y),r.call(B+"_add",Ct,M,ut),r.call(B+"_add",ut,ut,ut),r.call(B+"_add",Ct,ut,ut))}function Ht(N,r){const d=v(N).map(Y=>Y==-1?255:Y),P=t.alloc(d),q=t.addFunction(o+"__cyclotomicExp_"+r);q.addParam("x","i32"),q.addParam("r","i32"),q.addLocal("bit","i32"),q.addLocal("i","i32");const O=q.getCodeBuilder(),T=O.getLocal("x"),M=O.getLocal("r"),j=O.i32_const(t.alloc(E));q.addCode(O.call(et+"_conjugate",T,j),O.call(et+"_one",M),O.if(O.teeLocal("bit",O.i32_load8_s(O.i32_const(d.length-1),P)),O.if(O.i32_eq(O.getLocal("bit"),O.i32_const(1)),O.call(et+"_mul",M,T,M),O.call(et+"_mul",M,j,M))),O.setLocal("i",O.i32_const(d.length-2)),O.block(O.loop(O.call(o+"__cyclotomicSquare",M,M),O.if(O.teeLocal("bit",O.i32_load8_s(O.getLocal("i"),P)),O.if(O.i32_eq(O.getLocal("bit"),O.i32_const(1)),O.call(et+"_mul",M,T,M),O.call(et+"_mul",M,j,M))),O.br_if(1,O.i32_eqz(O.getLocal("i"))),O.setLocal("i",O.i32_sub(O.getLocal("i"),O.i32_const(1))),O.br(0))))}function Dt(){Mt(),Ht(h,"w0");const N=t.addFunction(o+"__finalExponentiationLastChunk");N.addParam("x","i32"),N.addParam("r","i32");const r=N.getCodeBuilder(),d=r.getLocal("x"),P=r.getLocal("r"),q=r.i32_const(t.alloc(E)),O=r.i32_const(t.alloc(E)),T=r.i32_const(t.alloc(E)),M=r.i32_const(t.alloc(E)),j=r.i32_const(t.alloc(E)),Y=r.i32_const(t.alloc(E)),Z=r.i32_const(t.alloc(E)),H=r.i32_const(t.alloc(E)),nt=r.i32_const(t.alloc(E)),ut=r.i32_const(t.alloc(E)),_t=r.i32_const(t.alloc(E)),ct=r.i32_const(t.alloc(E)),At=r.i32_const(t.alloc(E)),Ct=r.i32_const(t.alloc(E)),vt=r.i32_const(t.alloc(E)),yt=r.i32_const(t.alloc(E)),mt=r.i32_const(t.alloc(E)),ht=r.i32_const(t.alloc(E)),Ot=r.i32_const(t.alloc(E)),Rt=r.i32_const(t.alloc(E)),Zt=r.i32_const(t.alloc(E));N.addCode(r.call(o+"__cyclotomicExp_w0",d,q),r.call(et+"_conjugate",q,q),r.call(o+"__cyclotomicSquare",q,O),r.call(o+"__cyclotomicSquare",O,T),r.call(et+"_mul",T,O,M),r.call(o+"__cyclotomicExp_w0",M,j),r.call(et+"_conjugate",j,j),r.call(o+"__cyclotomicSquare",j,Y),r.call(o+"__cyclotomicExp_w0",Y,Z),r.call(et+"_conjugate",Z,Z),r.call(et+"_conjugate",M,H),r.call(et+"_conjugate",Z,nt),r.call(et+"_mul",nt,j,ut),r.call(et+"_mul",ut,H,_t),r.call(et+"_mul",_t,O,ct),r.call(et+"_mul",_t,j,At),r.call(et+"_mul",At,d,Ct),r.call(o+"__frobeniusMap1",ct,vt),r.call(et+"_mul",vt,Ct,yt),r.call(o+"__frobeniusMap2",_t,mt),r.call(et+"_mul",mt,yt,ht),r.call(et+"_conjugate",d,Ot),r.call(et+"_mul",Ot,ct,Rt),r.call(o+"__frobeniusMap3",Rt,Zt),r.call(et+"_mul",Zt,ht,P))}function Vt(){xt(),Dt();const N=t.addFunction(o+"_finalExponentiation");N.addParam("x","i32"),N.addParam("r","i32");const r=N.getCodeBuilder(),d=r.getLocal("x"),P=r.getLocal("r"),q=r.i32_const(t.alloc(E));N.addCode(r.call(o+"__finalExponentiationFirstChunk",d,q),r.call(o+"__finalExponentiationLastChunk",q,P))}function qt(){const N=t.addFunction(o+"_finalExponentiationOld");N.addParam("x","i32"),N.addParam("r","i32");const d=t.alloc(Ft.bigInt2BytesLE(552484233613224096312617126783173147097382103762957654188882734314196910839907541213974502761540629817009608548654680343627701153829446747810907373256841551006201639677726139946029199968412598804882391702273019083653272047566316584365559776493027495458238373902875937659943504873220554161550525926302303331747463515644711876653177129578303191095900909191624817826566688241804408081892785725967931714097716709526092261278071952560171111444072049229123565057483750161460024353346284167282452756217662335528813519139808291170539072125381230815729071544861602750936964829313608137325426383735122175229541155376346436093930287402089517426973178917569713384748081827255472576937471496195752727188261435633271238710131736096299798168852925540549342330775279877006784354801422249722573783561685179618816480037695005515426162362431072245638324744480n,352)),P=N.getCodeBuilder();N.addCode(P.call(et+"_exp",P.getLocal("x"),P.i32_const(d),P.i32_const(352),P.getLocal("r")))}const kt=t.alloc(m),Gt=t.alloc(I);function Jt(N){const r=t.addFunction(o+"_pairingEq"+N);for(let O=0;O<N;O++)r.addParam("p_"+O,"i32"),r.addParam("q_"+O,"i32");r.addParam("c","i32"),r.setReturnType("i32");const d=r.getCodeBuilder(),P=d.i32_const(t.alloc(E)),q=d.i32_const(t.alloc(E));r.addCode(d.call(et+"_one",P));for(let O=0;O<N;O++)r.addCode(d.call(o+"_prepareG1",d.getLocal("p_"+O),d.i32_const(kt))),r.addCode(d.call(o+"_prepareG2",d.getLocal("q_"+O),d.i32_const(Gt))),r.addCode(d.call(o+"_millerLoop",d.i32_const(kt),d.i32_const(Gt),q)),r.addCode(d.call(et+"_mul",P,q,P));r.addCode(d.call(o+"_finalExponentiation",P,P)),r.addCode(d.call(et+"_eq",P,d.getLocal("c")))}function $t(){const N=t.addFunction(o+"_pairing");N.addParam("p","i32"),N.addParam("q","i32"),N.addParam("r","i32");const r=N.getCodeBuilder(),d=r.i32_const(t.alloc(E));N.addCode(r.call(o+"_prepareG1",r.getLocal("p"),r.i32_const(kt))),N.addCode(r.call(o+"_prepareG2",r.getLocal("q"),r.i32_const(Gt))),N.addCode(r.call(o+"_millerLoop",r.i32_const(kt),r.i32_const(Gt),d)),N.addCode(r.call(o+"_finalExponentiation",d,r.getLocal("r")))}at(),It(),R(),Lt(),gt(),St(),rt();for(let N=0;N<10;N++)bt(N),t.exportFunction(o+"__frobeniusMap"+N);qt(),Vt();for(let N=1;N<=5;N++)Jt(N),t.exportFunction(o+"_pairingEq"+N);$t(),t.exportFunction(o+"_pairing"),t.exportFunction(o+"_prepareG1"),t.exportFunction(o+"_prepareG2"),t.exportFunction(o+"_millerLoop"),t.exportFunction(o+"_finalExponentiation"),t.exportFunction(o+"_finalExponentiationOld"),t.exportFunction(o+"__mulBy024"),t.exportFunction(o+"__mulBy024Old"),t.exportFunction(o+"__cyclotomicSquare"),t.exportFunction(o+"__cyclotomicExp_w0")};const Bt=dn,He=Lo,Ve=ua,Fa=ha,je=fa,Sa=Aa,bo=Ia,$e=ya,Ye=Ca,kn=ma,{bitLength:va,isOdd:xa,isNegative:Ze}=Nt;var We=function(t,n){const o=n||"bls12381";if(t.modules[o])return o;const a=0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn,l=0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n,f=Math.floor((va(a-1n)-1)/64)+1,u=f*8,y=u,g=y*2,s=y*12,E=Math.floor((va(l-1n)-1)/64)+1,F=E*8,A=F,D=t.alloc(Bt.bigInt2BytesLE(l,A)),k=He(t,a,"f1m","intq");Ve(t,l,"fr","frm","intr");const B=t.alloc(Bt.bigInt2BytesLE(w(4n),y)),G=Sa(t,"g1m","f1m",B);bo(t,"frm","frm","frm","frm_mul"),$e(t,"pol","frm"),Ye(t,"qap","frm");const S=Fa(t,"f1m_neg","f2m","f1m"),st=t.alloc([...Bt.bigInt2BytesLE(w(4n),y),...Bt.bigInt2BytesLE(w(4n),y)]),U=Sa(t,"g2m","f2m",st);function lt(r,d){const P=t.addFunction(r);P.addParam("pG","i32"),P.addParam("pFr","i32"),P.addParam("pr","i32");const q=P.getCodeBuilder(),O=q.i32_const(t.alloc(F));P.addCode(q.call("frm_fromMontgomery",q.getLocal("pFr"),O),q.call(d,q.getLocal("pG"),O,q.i32_const(F),q.getLocal("pr"))),t.exportFunction(r)}lt("g1m_timesFr","g1m_timesScalar"),bo(t,"g1m","g1m","frm","g1m_timesFr"),lt("g2m_timesFr","g2m_timesScalar"),bo(t,"g2m","g2m","frm","g2m_timesFr"),lt("g1m_timesFrAffine","g1m_timesScalarAffine"),lt("g2m_timesFrAffine","g2m_timesScalarAffine"),kn(t,"frm_batchApplyKey","fmr","frm",F,F,F,"frm_mul"),kn(t,"g1m_batchApplyKey","g1m","frm",u*3,u*3,F,"g1m_timesFr"),kn(t,"g1m_batchApplyKeyMixed","g1m","frm",u*2,u*3,F,"g1m_timesFrAffine"),kn(t,"g2m_batchApplyKey","g2m","frm",u*2*3,u*3*2,F,"g2m_timesFr"),kn(t,"g2m_batchApplyKeyMixed","g2m","frm",u*2*2,u*3*2,F,"g2m_timesFrAffine");function w(r){return BigInt(r)*(1n<<BigInt(y*8))%a}const _=[3685416753713387016781088315183077757961620795782546409894578378688607592378376318836054947676345821548104185464507n,1339506544944476473020471379941921221584933875938349620426543736416511423956333506472724655353366534992391756441569n,1n],p=t.alloc([...Bt.bigInt2BytesLE(w(_[0]),y),...Bt.bigInt2BytesLE(w(_[1]),y),...Bt.bigInt2BytesLE(w(_[2]),y)]),V=[0n,1n,0n],$=t.alloc([...Bt.bigInt2BytesLE(w(V[0]),y),...Bt.bigInt2BytesLE(w(V[1]),y),...Bt.bigInt2BytesLE(w(V[2]),y)]),X=[[352701069587466618187139116011060144890029952792775240219908644239793785735715026873347600343865175952761926303160n,3059144344244213709971259814753781636986470325476647558659373206291635324768958432433509563104347017837885763365758n],[1985150602287291935568054521177171638300868978215655730859378665066344726373823718423869104263333984641494340347905n,927553665492332455747201965776037880757740193453592970025027978793976877002675564980949289727957565575433344219582n],[1n,0n]],Q=t.alloc([...Bt.bigInt2BytesLE(w(X[0][0]),y),...Bt.bigInt2BytesLE(w(X[0][1]),y),...Bt.bigInt2BytesLE(w(X[1][0]),y),...Bt.bigInt2BytesLE(w(X[1][1]),y),...Bt.bigInt2BytesLE(w(X[2][0]),y),...Bt.bigInt2BytesLE(w(X[2][1]),y)]),b=[[0n,0n],[1n,0n],[0n,0n]],x=t.alloc([...Bt.bigInt2BytesLE(w(b[0][0]),y),...Bt.bigInt2BytesLE(w(b[0][1]),y),...Bt.bigInt2BytesLE(w(b[1][0]),y),...Bt.bigInt2BytesLE(w(b[1][1]),y),...Bt.bigInt2BytesLE(w(b[2][0]),y),...Bt.bigInt2BytesLE(w(b[2][1]),y)]),z=t.alloc([...Bt.bigInt2BytesLE(w(1n),y),...Bt.bigInt2BytesLE(w(0n),y),...Bt.bigInt2BytesLE(w(0n),y),...Bt.bigInt2BytesLE(w(0n),y),...Bt.bigInt2BytesLE(w(0n),y),...Bt.bigInt2BytesLE(w(0n),y),...Bt.bigInt2BytesLE(w(0n),y),...Bt.bigInt2BytesLE(w(0n),y),...Bt.bigInt2BytesLE(w(0n),y),...Bt.bigInt2BytesLE(w(0n),y),...Bt.bigInt2BytesLE(w(0n),y),...Bt.bigInt2BytesLE(w(0n),y)]),ot=t.alloc([...Bt.bigInt2BytesLE(w(1n),y),...Bt.bigInt2BytesLE(w(1n),y)]);function tt(){const r=t.addFunction(S+"_mulNR");r.addParam("x","i32"),r.addParam("pr","i32");const d=r.getCodeBuilder(),P=d.i32_const(t.alloc(y)),q=d.getLocal("x"),O=d.i32_add(d.getLocal("x"),d.i32_const(y)),T=d.getLocal("pr"),M=d.i32_add(d.getLocal("pr"),d.i32_const(y));r.addCode(d.call(k+"_copy",q,P),d.call(k+"_sub",q,O,T),d.call(k+"_add",P,O,M))}tt();const K=je(t,S+"_mulNR","f6m","f2m");function it(){const r=t.addFunction(K+"_mulNR");r.addParam("x","i32"),r.addParam("pr","i32");const d=r.getCodeBuilder(),P=d.i32_const(t.alloc(y*2));r.addCode(d.call(S+"_copy",d.getLocal("x"),P),d.call(S+"_mulNR",d.i32_add(d.getLocal("x"),d.i32_const(u*4)),d.getLocal("pr")),d.call(S+"_copy",d.i32_add(d.getLocal("x"),d.i32_const(u*2)),d.i32_add(d.getLocal("pr"),d.i32_const(u*4))),d.call(S+"_copy",P,d.i32_add(d.getLocal("pr"),d.i32_const(u*2))))}it();const W=Fa(t,K+"_mulNR","ftm",K),pt=J(0xd201000000010000n),wt=t.alloc(pt),ft=3*g,L=pt.length-1,C=pt.reduce((r,d)=>r+(d!=0?1:0),0)+L+1,e=6*u,m=3*u*2+C*ft,I=!0,h=15132376222941642752n;t.modules[o]={n64q:f,n64r:E,n8q:u,n8r:F,pG1gen:p,pG1zero:$,pG1b:B,pG2gen:Q,pG2zero:x,pG2b:st,pq:t.modules.f1m.pq,pr:D,pOneT:z,r:l,q:a,prePSize:e,preQSize:m};function v(r){let d=r;const P=[];for(;d>0n;){if(xa(d)){const q=2-Number(d%4n);P.push(q),d=d-BigInt(q)}else P.push(0);d=d>>1n}return P}function J(r){let d=r;const P=[];for(;d>0n;)xa(d)?P.push(1):P.push(0),d=d>>1n;return P}function R(){const r=t.addFunction(o+"_prepareG1");r.addParam("pP","i32"),r.addParam("ppreP","i32");const d=r.getCodeBuilder();r.addCode(d.call(G+"_normalize",d.getLocal("pP"),d.getLocal("ppreP")))}function at(){const r=t.addFunction(o+"_prepDblStep");r.addParam("R","i32"),r.addParam("r","i32");const d=r.getCodeBuilder(),P=d.getLocal("R"),q=d.i32_add(d.getLocal("R"),d.i32_const(2*u)),O=d.i32_add(d.getLocal("R"),d.i32_const(4*u)),T=d.getLocal("r"),M=d.i32_add(d.getLocal("r"),d.i32_const(2*u)),j=d.i32_add(d.getLocal("r"),d.i32_const(4*u)),Y=d.i32_const(t.alloc(g)),Z=d.i32_const(t.alloc(g)),H=d.i32_const(t.alloc(g)),nt=d.i32_const(t.alloc(g)),ut=d.i32_const(t.alloc(g));r.addCode(d.call(S+"_square",P,T),d.call(S+"_square",q,Z),d.call(S+"_square",Z,H),d.call(S+"_add",Z,P,M),d.call(S+"_square",M,M),d.call(S+"_sub",M,T,M),d.call(S+"_sub",M,H,M),d.call(S+"_add",M,M,M),d.call(S+"_add",T,T,nt),d.call(S+"_add",nt,T,nt),d.call(S+"_add",P,nt,j),d.call(S+"_square",nt,ut),d.call(S+"_square",O,Y),d.call(S+"_sub",ut,M,P),d.call(S+"_sub",P,M,P),d.call(S+"_add",O,q,O),d.call(S+"_square",O,O),d.call(S+"_sub",O,Z,O),d.call(S+"_sub",O,Y,O),d.call(S+"_sub",M,P,q),d.call(S+"_mul",q,nt,q),d.call(S+"_add",H,H,H),d.call(S+"_add",H,H,H),d.call(S+"_add",H,H,H),d.call(S+"_sub",q,H,q),d.call(S+"_mul",nt,Y,M),d.call(S+"_add",M,M,M),d.call(S+"_neg",M,M),d.call(S+"_square",j,j),d.call(S+"_sub",j,T,j),d.call(S+"_sub",j,ut,j),d.call(S+"_add",Z,Z,Z),d.call(S+"_add",Z,Z,Z),d.call(S+"_sub",j,Z,j),d.call(S+"_mul",O,Y,T),d.call(S+"_add",T,T,T))}function It(){const r=t.addFunction(o+"_prepAddStep");r.addParam("R","i32"),r.addParam("Q","i32"),r.addParam("r","i32");const d=r.getCodeBuilder(),P=d.getLocal("R"),q=d.i32_add(d.getLocal("R"),d.i32_const(2*u)),O=d.i32_add(d.getLocal("R"),d.i32_const(4*u)),T=d.getLocal("Q"),M=d.i32_add(d.getLocal("Q"),d.i32_const(2*u)),j=d.getLocal("r"),Y=d.i32_add(d.getLocal("r"),d.i32_const(2*u)),Z=d.i32_add(d.getLocal("r"),d.i32_const(4*u)),H=d.i32_const(t.alloc(g)),nt=d.i32_const(t.alloc(g)),ut=d.i32_const(t.alloc(g)),_t=d.i32_const(t.alloc(g)),ct=d.i32_const(t.alloc(g)),At=d.i32_const(t.alloc(g)),Ct=d.i32_const(t.alloc(g)),vt=d.i32_const(t.alloc(g)),yt=d.i32_const(t.alloc(g)),mt=d.i32_const(t.alloc(g)),ht=d.i32_const(t.alloc(g));r.addCode(d.call(S+"_square",O,H),d.call(S+"_square",M,nt),d.call(S+"_mul",H,T,_t),d.call(S+"_add",M,O,Y),d.call(S+"_square",Y,Y),d.call(S+"_sub",Y,nt,Y),d.call(S+"_sub",Y,H,Y),d.call(S+"_mul",Y,H,Y),d.call(S+"_sub",_t,P,ct),d.call(S+"_square",ct,At),d.call(S+"_add",At,At,Ct),d.call(S+"_add",Ct,Ct,Ct),d.call(S+"_mul",Ct,ct,vt),d.call(S+"_sub",Y,q,yt),d.call(S+"_sub",yt,q,yt),d.call(S+"_mul",yt,T,Z),d.call(S+"_mul",Ct,P,mt),d.call(S+"_square",yt,P),d.call(S+"_sub",P,vt,P),d.call(S+"_sub",P,mt,P),d.call(S+"_sub",P,mt,P),d.call(S+"_add",O,ct,O),d.call(S+"_square",O,O),d.call(S+"_sub",O,H,O),d.call(S+"_sub",O,At,O),d.call(S+"_add",M,O,j),d.call(S+"_sub",mt,P,ht),d.call(S+"_mul",ht,yt,ht),d.call(S+"_mul",q,vt,_t),d.call(S+"_add",_t,_t,_t),d.call(S+"_sub",ht,_t,q),d.call(S+"_square",j,j),d.call(S+"_sub",j,nt,j),d.call(S+"_square",O,ut),d.call(S+"_sub",j,ut,j),d.call(S+"_add",Z,Z,Z),d.call(S+"_sub",Z,j,Z),d.call(S+"_add",O,O,j),d.call(S+"_neg",yt,yt),d.call(S+"_add",yt,yt,Y))}function dt(){const r=t.addFunction(o+"_prepareG2");r.addParam("pQ","i32"),r.addParam("ppreQ","i32"),r.addLocal("pCoef","i32"),r.addLocal("i","i32");const d=r.getCodeBuilder(),P=d.getLocal("pQ"),q=t.alloc(g*3),O=d.i32_const(q),T=d.getLocal("ppreQ");r.addCode(d.call(U+"_normalize",P,T),d.if(d.call(U+"_isZero",T),d.ret([])),d.call(U+"_copy",T,O),d.setLocal("pCoef",d.i32_add(d.getLocal("ppreQ"),d.i32_const(g*3)))),r.addCode(d.setLocal("i",d.i32_const(pt.length-2)),d.block(d.loop(d.call(o+"_prepDblStep",O,d.getLocal("pCoef")),d.setLocal("pCoef",d.i32_add(d.getLocal("pCoef"),d.i32_const(ft))),d.if(d.i32_load8_s(d.getLocal("i"),wt),[...d.call(o+"_prepAddStep",O,T,d.getLocal("pCoef")),...d.setLocal("pCoef",d.i32_add(d.getLocal("pCoef"),d.i32_const(ft)))]),d.br_if(1,d.i32_eqz(d.getLocal("i"))),d.setLocal("i",d.i32_sub(d.getLocal("i"),d.i32_const(1))),d.br(0))))}function Lt(){const r=t.addFunction(K+"_mul1");r.addParam("pA","i32"),r.addParam("pC1","i32"),r.addParam("pR","i32");const d=r.getCodeBuilder(),P=d.getLocal("pA"),q=d.i32_add(d.getLocal("pA"),d.i32_const(y*2)),O=d.i32_add(d.getLocal("pA"),d.i32_const(y*4)),T=d.getLocal("pC1"),M=d.getLocal("pR"),j=d.i32_add(d.getLocal("pR"),d.i32_const(y*2)),Y=d.i32_add(d.getLocal("pR"),d.i32_const(y*4)),Z=d.i32_const(t.alloc(y*2)),H=d.i32_const(t.alloc(y*2));r.addCode(d.call(S+"_add",P,q,Z),d.call(S+"_add",q,O,H),d.call(S+"_mul",q,T,Y),d.call(S+"_mul",H,T,M),d.call(S+"_sub",M,Y,M),d.call(S+"_mulNR",M,M),d.call(S+"_mul",Z,T,j),d.call(S+"_sub",j,Y,j))}Lt();function St(){const r=t.addFunction(K+"_mul01");r.addParam("pA","i32"),r.addParam("pC0","i32"),r.addParam("pC1","i32"),r.addParam("pR","i32");const d=r.getCodeBuilder(),P=d.getLocal("pA"),q=d.i32_add(d.getLocal("pA"),d.i32_const(y*2)),O=d.i32_add(d.getLocal("pA"),d.i32_const(y*4)),T=d.getLocal("pC0"),M=d.getLocal("pC1"),j=d.getLocal("pR"),Y=d.i32_add(d.getLocal("pR"),d.i32_const(y*2)),Z=d.i32_add(d.getLocal("pR"),d.i32_const(y*4)),H=d.i32_const(t.alloc(y*2)),nt=d.i32_const(t.alloc(y*2)),ut=d.i32_const(t.alloc(y*2)),_t=d.i32_const(t.alloc(y*2));r.addCode(d.call(S+"_mul",P,T,H),d.call(S+"_mul",q,M,nt),d.call(S+"_add",P,q,ut),d.call(S+"_add",P,O,_t),d.call(S+"_add",q,O,j),d.call(S+"_mul",j,M,j),d.call(S+"_sub",j,nt,j),d.call(S+"_mulNR",j,j),d.call(S+"_add",j,H,j),d.call(S+"_add",T,M,Y),d.call(S+"_mul",Y,ut,Y),d.call(S+"_sub",Y,H,Y),d.call(S+"_sub",Y,nt,Y),d.call(S+"_mul",_t,T,Z),d.call(S+"_sub",Z,H,Z),d.call(S+"_add",Z,nt,Z))}St();function gt(){const r=t.addFunction(W+"_mul014");r.addParam("pA","i32"),r.addParam("pC0","i32"),r.addParam("pC1","i32"),r.addParam("pC4","i32"),r.addParam("pR","i32");const d=r.getCodeBuilder(),P=d.getLocal("pA"),q=d.i32_add(d.getLocal("pA"),d.i32_const(y*6)),O=d.getLocal("pC0"),T=d.getLocal("pC1"),M=d.getLocal("pC4"),j=d.i32_const(t.alloc(y*6)),Y=d.i32_const(t.alloc(y*6)),Z=d.i32_const(t.alloc(y*2)),H=d.getLocal("pR"),nt=d.i32_add(d.getLocal("pR"),d.i32_const(y*6));r.addCode(d.call(K+"_mul01",P,O,T,j),d.call(K+"_mul1",q,M,Y),d.call(S+"_add",T,M,Z),d.call(K+"_add",q,P,nt),d.call(K+"_mul01",nt,O,Z,nt),d.call(K+"_sub",nt,j,nt),d.call(K+"_sub",nt,Y,nt),d.call(K+"_copy",Y,H),d.call(K+"_mulNR",H,H),d.call(K+"_add",H,j,H))}gt();function rt(){const r=t.addFunction(o+"_ell");r.addParam("pP","i32"),r.addParam("pCoefs","i32"),r.addParam("pF","i32");const d=r.getCodeBuilder(),P=d.getLocal("pP"),q=d.i32_add(d.getLocal("pP"),d.i32_const(u)),O=d.getLocal("pF"),T=d.getLocal("pCoefs"),M=d.i32_add(d.getLocal("pCoefs"),d.i32_const(y)),j=d.i32_add(d.getLocal("pCoefs"),d.i32_const(y*2)),Y=d.i32_add(d.getLocal("pCoefs"),d.i32_const(y*3)),Z=d.i32_add(d.getLocal("pCoefs"),d.i32_const(y*4)),H=t.alloc(y*2),nt=d.i32_const(H),ut=d.i32_const(H),_t=d.i32_const(H+y),ct=t.alloc(y*2),At=d.i32_const(ct),Ct=d.i32_const(ct),vt=d.i32_const(ct+y);r.addCode(d.call(k+"_mul",T,q,ut),d.call(k+"_mul",M,q,_t),d.call(k+"_mul",j,P,Ct),d.call(k+"_mul",Y,P,vt),d.call(W+"_mul014",O,Z,At,nt,O))}rt();function bt(){const r=t.addFunction(o+"_millerLoop");r.addParam("ppreP","i32"),r.addParam("ppreQ","i32"),r.addParam("r","i32"),r.addLocal("pCoef","i32"),r.addLocal("i","i32");const d=r.getCodeBuilder(),P=d.getLocal("ppreP"),q=d.getLocal("pCoef"),O=d.getLocal("r");r.addCode(d.call(W+"_one",O),d.if(d.call(G+"_isZero",P),d.ret([])),d.if(d.call(G+"_isZero",d.getLocal("ppreQ")),d.ret([])),d.setLocal("pCoef",d.i32_add(d.getLocal("ppreQ"),d.i32_const(g*3))),d.setLocal("i",d.i32_const(pt.length-2)),d.block(d.loop(d.call(o+"_ell",P,q,O),d.setLocal("pCoef",d.i32_add(d.getLocal("pCoef"),d.i32_const(ft))),d.if(d.i32_load8_s(d.getLocal("i"),wt),[...d.call(o+"_ell",P,q,O),...d.setLocal("pCoef",d.i32_add(d.getLocal("pCoef"),d.i32_const(ft)))]),d.call(W+"_square",O,O),d.br_if(1,d.i32_eq(d.getLocal("i"),d.i32_const(1))),d.setLocal("i",d.i32_sub(d.getLocal("i"),d.i32_const(1))),d.br(0))),d.call(o+"_ell",P,q,O)),r.addCode(d.call(W+"_conjugate",O,O))}function xt(r){const d=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760n,151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351n,0n],[2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n,1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n,0n],[3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557n,877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230n],[4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786n,0n],[151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027n,3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n,0n],[1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257n,2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437n,0n],[877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230n,3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557n]]],P=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0n,4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n,0n],[0n,1n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n,0n],[0n,793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n]],[[1n,0n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437n,0n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n,0n],[4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786n,0n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n,0n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351n,0n]]],q=t.addFunction(W+"_frobeniusMap"+r);q.addParam("x","i32"),q.addParam("r","i32");const O=q.getCodeBuilder();for(let M=0;M<6;M++){const j=M==0?O.getLocal("x"):O.i32_add(O.getLocal("x"),O.i32_const(M*g)),Y=j,Z=O.i32_add(O.getLocal("x"),O.i32_const(M*g+y)),H=M==0?O.getLocal("r"):O.i32_add(O.getLocal("r"),O.i32_const(M*g)),nt=H,ut=O.i32_add(O.getLocal("r"),O.i32_const(M*g+y)),_t=T(d[Math.floor(M/3)][r%12],P[M%3][r%6]),ct=t.alloc([...Bt.bigInt2BytesLE(w(_t[0]),u),...Bt.bigInt2BytesLE(w(_t[1]),u)]);r%2==1?q.addCode(O.call(k+"_copy",Y,nt),O.call(k+"_neg",Z,ut),O.call(S+"_mul",H,O.i32_const(ct),H)):q.addCode(O.call(S+"_mul",j,O.i32_const(ct),H))}function T(M,j){const Y=M[0],Z=M[1],H=j[0],nt=j[1],ut=[(Y*H-Z*nt)%a,(Y*nt+Z*H)%a];return Ze(ut[0])&&(ut[0]=ut[0]+a),ut}}function Mt(){const r=t.addFunction(o+"__cyclotomicSquare");r.addParam("x","i32"),r.addParam("r","i32");const d=r.getCodeBuilder(),P=d.getLocal("x"),q=d.i32_add(d.getLocal("x"),d.i32_const(g)),O=d.i32_add(d.getLocal("x"),d.i32_const(2*g)),T=d.i32_add(d.getLocal("x"),d.i32_const(3*g)),M=d.i32_add(d.getLocal("x"),d.i32_const(4*g)),j=d.i32_add(d.getLocal("x"),d.i32_const(5*g)),Y=d.getLocal("r"),Z=d.i32_add(d.getLocal("r"),d.i32_const(g)),H=d.i32_add(d.getLocal("r"),d.i32_const(2*g)),nt=d.i32_add(d.getLocal("r"),d.i32_const(3*g)),ut=d.i32_add(d.getLocal("r"),d.i32_const(4*g)),_t=d.i32_add(d.getLocal("r"),d.i32_const(5*g)),ct=d.i32_const(t.alloc(g)),At=d.i32_const(t.alloc(g)),Ct=d.i32_const(t.alloc(g)),vt=d.i32_const(t.alloc(g)),yt=d.i32_const(t.alloc(g)),mt=d.i32_const(t.alloc(g)),ht=d.i32_const(t.alloc(g)),Ot=d.i32_const(t.alloc(g));r.addCode(d.call(S+"_mul",P,M,ht),d.call(S+"_mulNR",M,ct),d.call(S+"_add",P,ct,ct),d.call(S+"_add",P,M,Ot),d.call(S+"_mul",Ot,ct,ct),d.call(S+"_mulNR",ht,Ot),d.call(S+"_add",ht,Ot,Ot),d.call(S+"_sub",ct,Ot,ct),d.call(S+"_add",ht,ht,At),d.call(S+"_mul",T,O,ht),d.call(S+"_mulNR",O,Ct),d.call(S+"_add",T,Ct,Ct),d.call(S+"_add",T,O,Ot),d.call(S+"_mul",Ot,Ct,Ct),d.call(S+"_mulNR",ht,Ot),d.call(S+"_add",ht,Ot,Ot),d.call(S+"_sub",Ct,Ot,Ct),d.call(S+"_add",ht,ht,vt),d.call(S+"_mul",q,j,ht),d.call(S+"_mulNR",j,yt),d.call(S+"_add",q,yt,yt),d.call(S+"_add",q,j,Ot),d.call(S+"_mul",Ot,yt,yt),d.call(S+"_mulNR",ht,Ot),d.call(S+"_add",ht,Ot,Ot),d.call(S+"_sub",yt,Ot,yt),d.call(S+"_add",ht,ht,mt),d.call(S+"_sub",ct,P,Y),d.call(S+"_add",Y,Y,Y),d.call(S+"_add",ct,Y,Y),d.call(S+"_add",At,M,ut),d.call(S+"_add",ut,ut,ut),d.call(S+"_add",At,ut,ut),d.call(S+"_mul",mt,d.i32_const(ot),Ot),d.call(S+"_add",Ot,T,nt),d.call(S+"_add",nt,nt,nt),d.call(S+"_add",Ot,nt,nt),d.call(S+"_sub",yt,O,H),d.call(S+"_add",H,H,H),d.call(S+"_add",yt,H,H),d.call(S+"_sub",Ct,q,Z),d.call(S+"_add",Z,Z,Z),d.call(S+"_add",Ct,Z,Z),d.call(S+"_add",vt,j,_t),d.call(S+"_add",_t,_t,_t),d.call(S+"_add",vt,_t,_t))}function Ht(r,d,P){const q=v(r).map(H=>H==-1?255:H),O=t.alloc(q),T=t.addFunction(o+"__cyclotomicExp_"+P);T.addParam("x","i32"),T.addParam("r","i32"),T.addLocal("bit","i32"),T.addLocal("i","i32");const M=T.getCodeBuilder(),j=M.getLocal("x"),Y=M.getLocal("r"),Z=M.i32_const(t.alloc(s));T.addCode(M.call(W+"_conjugate",j,Z),M.call(W+"_one",Y),M.if(M.teeLocal("bit",M.i32_load8_s(M.i32_const(q.length-1),O)),M.if(M.i32_eq(M.getLocal("bit"),M.i32_const(1)),M.call(W+"_mul",Y,j,Y),M.call(W+"_mul",Y,Z,Y))),M.setLocal("i",M.i32_const(q.length-2)),M.block(M.loop(M.call(o+"__cyclotomicSquare",Y,Y),M.if(M.teeLocal("bit",M.i32_load8_s(M.getLocal("i"),O)),M.if(M.i32_eq(M.getLocal("bit"),M.i32_const(1)),M.call(W+"_mul",Y,j,Y),M.call(W+"_mul",Y,Z,Y))),M.br_if(1,M.i32_eqz(M.getLocal("i"))),M.setLocal("i",M.i32_sub(M.getLocal("i"),M.i32_const(1))),M.br(0)))),T.addCode(M.call(W+"_conjugate",Y,Y))}function Dt(){Mt(),Ht(h,I,"w0");const r=t.addFunction(o+"_finalExponentiation");r.addParam("x","i32"),r.addParam("r","i32");const d=r.getCodeBuilder(),P=d.getLocal("x"),q=d.getLocal("r"),O=d.i32_const(t.alloc(s)),T=d.i32_const(t.alloc(s)),M=d.i32_const(t.alloc(s)),j=d.i32_const(t.alloc(s)),Y=d.i32_const(t.alloc(s)),Z=d.i32_const(t.alloc(s)),H=d.i32_const(t.alloc(s));r.addCode(d.call(W+"_frobeniusMap6",P,O),d.call(W+"_inverse",P,T),d.call(W+"_mul",O,T,M),d.call(W+"_copy",M,T),d.call(W+"_frobeniusMap2",M,M),d.call(W+"_mul",M,T,M),d.call(o+"__cyclotomicSquare",M,T),d.call(W+"_conjugate",T,T),d.call(o+"__cyclotomicExp_w0",M,j),d.call(o+"__cyclotomicSquare",j,Y),d.call(W+"_mul",T,j,Z),d.call(o+"__cyclotomicExp_w0",Z,T),d.call(o+"__cyclotomicExp_w0",T,O),d.call(o+"__cyclotomicExp_w0",O,H),d.call(W+"_mul",H,Y,H),d.call(o+"__cyclotomicExp_w0",H,Y),d.call(W+"_conjugate",Z,Z),d.call(W+"_mul",Y,Z,Y),d.call(W+"_mul",Y,M,Y),d.call(W+"_conjugate",M,Z),d.call(W+"_mul",T,M,T),d.call(W+"_frobeniusMap3",T,T),d.call(W+"_mul",H,Z,H),d.call(W+"_frobeniusMap1",H,H),d.call(W+"_mul",j,O,j),d.call(W+"_frobeniusMap2",j,j),d.call(W+"_mul",j,T,j),d.call(W+"_mul",j,H,j),d.call(W+"_mul",j,Y,q))}function Vt(){const r=t.addFunction(o+"_finalExponentiationOld");r.addParam("x","i32"),r.addParam("r","i32");const P=t.alloc(Bt.bigInt2BytesLE(322277361516934140462891564586510139908379969514828494218366688025288661041104682794998680497580008899973249814104447692778988208376779573819485263026159588510513834876303014016798809919343532899164848730280942609956670917565618115867287399623286813270357901731510188149934363360381614501334086825442271920079363289954510565375378443704372994881406797882676971082200626541916413184642520269678897559532260949334760604962086348898118982248842634379637598665468817769075878555493752214492790122785850202957575200176084204422751485957336465472324810982833638490904279282696134323072515220044451592646885410572234451732790590013479358343841220074174848221722017083597872017638514103174122784843925578370430843522959600095676285723737049438346544753168912974976791528535276317256904336520179281145394686565050419250614107803233314658825463117900250701199181529205942363159325765991819433914303908860460720581408201373164047773794825411011922305820065611121544561808414055302212057471395719432072209245600258134364584636810093520285711072578721435517884103526483832733289802426157301542744476740008494780363354305116978805620671467071400711358839553375340724899735460480144599782014906586543813292157922220645089192130209334926661588737007768565838519456601560804957985667880395221049249803753582637708560n,544)),q=r.getCodeBuilder();r.addCode(q.call(W+"_exp",q.getLocal("x"),q.i32_const(P),q.i32_const(544),q.getLocal("r")))}const qt=t.alloc(e),kt=t.alloc(m);function Gt(r){const d=t.addFunction(o+"_pairingEq"+r);for(let T=0;T<r;T++)d.addParam("p_"+T,"i32"),d.addParam("q_"+T,"i32");d.addParam("c","i32"),d.setReturnType("i32");const P=d.getCodeBuilder(),q=P.i32_const(t.alloc(s)),O=P.i32_const(t.alloc(s));d.addCode(P.call(W+"_one",q));for(let T=0;T<r;T++)d.addCode(P.call(o+"_prepareG1",P.getLocal("p_"+T),P.i32_const(qt))),d.addCode(P.call(o+"_prepareG2",P.getLocal("q_"+T),P.i32_const(kt))),d.addCode(P.if(P.i32_eqz(P.call(G+"_inGroupAffine",P.i32_const(qt))),P.ret(P.i32_const(0))),P.if(P.i32_eqz(P.call(U+"_inGroupAffine",P.i32_const(kt))),P.ret(P.i32_const(0)))),d.addCode(P.call(o+"_millerLoop",P.i32_const(qt),P.i32_const(kt),O)),d.addCode(P.call(W+"_mul",q,O,q));d.addCode(P.call(o+"_finalExponentiation",q,q)),d.addCode(P.call(W+"_eq",q,P.getLocal("c")))}function Jt(){const r=t.addFunction(o+"_pairing");r.addParam("p","i32"),r.addParam("q","i32"),r.addParam("r","i32");const d=r.getCodeBuilder(),P=d.i32_const(t.alloc(s));r.addCode(d.call(o+"_prepareG1",d.getLocal("p"),d.i32_const(qt))),r.addCode(d.call(o+"_prepareG2",d.getLocal("q"),d.i32_const(kt))),r.addCode(d.call(o+"_millerLoop",d.i32_const(qt),d.i32_const(kt),P)),r.addCode(d.call(o+"_finalExponentiation",P,d.getLocal("r")))}function $t(){const r=t.addFunction(U+"_inGroupAffine");r.addParam("p","i32"),r.setReturnType("i32");const d=r.getCodeBuilder(),P=[2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279894n,2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279893n],q=4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n,O=[2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n,2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n],T=d.i32_const(t.alloc([...Bt.bigInt2BytesLE(w(P[0]),u),...Bt.bigInt2BytesLE(w(P[1]),u)])),M=d.i32_const(t.alloc(Bt.bigInt2BytesLE(w(q),u))),j=d.i32_const(t.alloc([...Bt.bigInt2BytesLE(w(O[0]),u),...Bt.bigInt2BytesLE(w(O[1]),u)])),Y=d.i32_const(t.alloc(Bt.bigInt2BytesLE(h,8))),Z=d.getLocal("p"),H=d.i32_add(d.getLocal("p"),d.i32_const(g)),nt=d.i32_const(t.alloc(y)),ut=d.i32_const(t.alloc(g)),_t=d.i32_const(t.alloc(g)),ct=t.alloc(g*2),At=d.i32_const(ct),Ct=d.i32_const(ct),vt=d.i32_const(ct),yt=d.i32_const(ct+y),mt=d.i32_const(ct+g),ht=d.i32_const(ct+g),Ot=d.i32_const(ct+g+y),Rt=t.alloc(g*3),Zt=d.i32_const(Rt),Sn=d.i32_const(Rt),gn=d.i32_const(Rt),un=d.i32_const(Rt+y),vn=d.i32_const(Rt+g),hn=d.i32_const(Rt+g),fn=d.i32_const(Rt+g+y),xn=d.i32_const(Rt+g*2);r.addCode(d.if(d.call(U+"_isZeroAffine",d.getLocal("p")),d.ret(d.i32_const(1))),d.if(d.i32_eqz(d.call(U+"_inCurveAffine",d.getLocal("p"))),d.ret(d.i32_const(0))),d.call(S+"_mul",Z,T,ut),d.call(S+"_mul",H,T,_t),d.call(S+"_mul1",ut,M,Ct),d.call(S+"_neg",_t,mt),d.call(S+"_neg",ut,Sn),d.call(S+"_mul",_t,j,vn),d.call(k+"_sub",vt,yt,nt),d.call(k+"_add",vt,yt,yt),d.call(k+"_copy",nt,vt),d.call(k+"_sub",ht,Ot,nt),d.call(k+"_add",ht,Ot,Ot),d.call(k+"_copy",nt,ht),d.call(k+"_add",gn,un,nt),d.call(k+"_sub",gn,un,un),d.call(k+"_copy",nt,gn),d.call(k+"_sub",fn,hn,nt),d.call(k+"_add",hn,fn,fn),d.call(k+"_copy",nt,hn),d.call(S+"_one",xn),d.call(U+"_timesScalar",Zt,Y,d.i32_const(8),Zt),d.call(U+"_addMixed",Zt,At,Zt),d.ret(d.call(U+"_eqMixed",Zt,d.getLocal("p"))));const ln=t.addFunction(U+"_inGroup");ln.addParam("pIn","i32"),ln.setReturnType("i32");const tn=ln.getCodeBuilder(),yn=tn.i32_const(t.alloc(g*2));ln.addCode(tn.call(U+"_toAffine",tn.getLocal("pIn"),yn),tn.ret(tn.call(U+"_inGroupAffine",yn)))}function N(){const r=t.addFunction(G+"_inGroupAffine");r.addParam("p","i32"),r.setReturnType("i32");const d=r.getCodeBuilder(),P=4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n,q=793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n,O=(h*h-1n)/3n,T=d.i32_const(t.alloc(Bt.bigInt2BytesLE(w(P),u))),M=d.i32_const(t.alloc(Bt.bigInt2BytesLE(w(q),u))),j=d.i32_const(t.alloc(Bt.bigInt2BytesLE(O,16))),Y=d.getLocal("p"),Z=d.i32_add(d.getLocal("p"),d.i32_const(y)),H=t.alloc(y*3),nt=d.i32_const(H),ut=d.i32_const(H),_t=d.i32_const(H+y),ct=t.alloc(y*2),At=d.i32_const(ct),Ct=d.i32_const(ct),vt=d.i32_const(ct+y);r.addCode(d.if(d.call(G+"_isZeroAffine",d.getLocal("p")),d.ret(d.i32_const(1))),d.if(d.i32_eqz(d.call(G+"_inCurveAffine",d.getLocal("p"))),d.ret(d.i32_const(0))),d.call(k+"_mul",Y,T,ut),d.call(k+"_copy",Z,_t),d.call(k+"_mul",Y,M,Ct),d.call(k+"_copy",Z,vt),d.call(G+"_doubleAffine",nt,nt),d.call(G+"_subMixed",nt,d.getLocal("p"),nt),d.call(G+"_subMixed",nt,At,nt),d.call(G+"_timesScalar",nt,j,d.i32_const(16),nt),d.ret(d.call(G+"_eqMixed",nt,At)));const yt=t.addFunction(G+"_inGroup");yt.addParam("pIn","i32"),yt.setReturnType("i32");const mt=yt.getCodeBuilder(),ht=mt.i32_const(t.alloc(y*2));yt.addCode(mt.call(G+"_toAffine",mt.getLocal("pIn"),ht),mt.ret(mt.call(G+"_inGroupAffine",ht)))}for(let r=0;r<10;r++)xt(r),t.exportFunction(W+"_frobeniusMap"+r);N(),$t(),It(),at(),R(),dt(),bt(),Vt(),Dt();for(let r=1;r<=5;r++)Gt(r),t.exportFunction(o+"_pairingEq"+r);Jt(),t.exportFunction(o+"_pairing"),t.exportFunction(o+"_prepareG1"),t.exportFunction(o+"_prepareG2"),t.exportFunction(o+"_millerLoop"),t.exportFunction(o+"_finalExponentiation"),t.exportFunction(o+"_finalExponentiationOld"),t.exportFunction(o+"__cyclotomicSquare"),t.exportFunction(o+"__cyclotomicExp_w0"),t.exportFunction(K+"_mul1"),t.exportFunction(K+"_mul01"),t.exportFunction(W+"_mul014"),t.exportFunction(G+"_inGroupAffine"),t.exportFunction(G+"_inGroup"),t.exportFunction(U+"_inGroupAffine"),t.exportFunction(U+"_inGroup")},Je=Ke,Xe=We;function Io(c){if(typeof c=="bigint"||c.eq!==void 0)return c.toString(10);if(c instanceof Uint8Array)return Mn(c,0);if(Array.isArray(c))return c.map(Io);if(typeof c=="object"){const t={};return Object.keys(c).forEach(o=>{t[o]=Io(c[o])}),t}else return c}function yo(c){if(typeof c=="string"&&/^[0-9]+$/.test(c))return BigInt(c);if(typeof c=="string"&&/^0x[0-9a-fA-F]+$/.test(c))return BigInt(c);if(Array.isArray(c))return c.map(yo);if(typeof c=="object"){if(c===null)return null;const t={};return Object.keys(c).forEach(o=>{t[o]=yo(c[o])}),t}else return c}function tc(c){let t=BigInt(0),n=c.length,o=0;const a=new DataView(c.buffer,c.byteOffset,c.byteLength);for(;n>0;)n>=4?(n-=4,t+=BigInt(a.getUint32(n))<<BigInt(o*8),o+=4):n>=2?(n-=2,t+=BigInt(a.getUint16(n))<<BigInt(o*8),o+=2):(n-=1,t+=BigInt(a.getUint8(n))<<BigInt(o*8),o+=1);return t}function nc(c,t){let n=c;const o=new Uint8Array(t),a=new DataView(o.buffer);let l=t;for(;l>0;)l-4>=0?(l-=4,a.setUint32(l,Number(n&BigInt(4294967295))),n=n>>BigInt(32)):l-2>=0?(l-=2,a.setUint16(l,Number(n&BigInt(65535))),n=n>>BigInt(16)):(l-=1,a.setUint8(l,Number(n&BigInt(255))),n=n>>BigInt(8));if(n)throw new Error("Number does not fit in this length");return o}function oc(c){let t=BigInt(0),n=0;const o=new DataView(c.buffer,c.byteOffset,c.byteLength);for(;n<c.length;)n+4<=c.length?(t+=BigInt(o.getUint32(n,!0))<<BigInt(n*8),n+=4):n+2<=c.length?(t+=BigInt(o.getUint16(n,!0))<<BigInt(n*8),n+=2):(t+=BigInt(o.getUint8(n,!0))<<BigInt(n*8),n+=1);return t}function Oa(c,t){let n=c;typeof t>"u"&&(t=Math.floor((On(c)-1)/8)+1,t==0&&(t=1));const o=new Uint8Array(t),a=new DataView(o.buffer);let l=0;for(;l<t;)l+4<=t?(a.setUint32(l,Number(n&BigInt(4294967295)),!0),l+=4,n=n>>BigInt(32)):l+2<=t?(a.setUint16(l,Number(n&BigInt(65535)),!0),l+=2,n=n>>BigInt(16)):(a.setUint8(l,Number(n&BigInt(255)),!0),l+=1,n=n>>BigInt(8));if(n)throw new Error("Number does not fit in this length");return o}function Co(c,t){if(typeof t=="bigint"||t.eq!==void 0)return t.toString(10);if(t instanceof Uint8Array)return c.toString(c.e(t));if(Array.isArray(t))return t.map(Co.bind(this,c));if(typeof t=="object"){const n={};return Object.keys(t).forEach(a=>{n[a]=Co(c,t[a])}),n}else return t}function mo(c,t){if(typeof t=="string"&&/^[0-9]+$/.test(t))return c.e(t);if(typeof t=="string"&&/^0x[0-9a-fA-F]+$/.test(t))return c.e(t);if(Array.isArray(t))return t.map(mo.bind(this,c));if(typeof t=="object"){if(t===null)return null;const n={};return Object.keys(t).forEach(a=>{n[a]=mo(c,t[a])}),n}else return t}const Tn=[];for(let c=0;c<256;c++)Tn[c]=ac(c,8);function ac(c,t){let n=0,o=c;for(let a=0;a<t;a++)n<<=1,n=n|o&1,o>>=1;return n}function Qa(c,t){return(Tn[c>>>24]|Tn[c>>>16&255]<<8|Tn[c>>>8&255]<<16|Tn[c&255]<<24)>>>32-t}function jt(c){return((c&4294901760)!==0?(c&=4294901760,16):0)|((c&4278255360)!==0?(c&=4278255360,8):0)|((c&4042322160)!==0?(c&=4042322160,4):0)|((c&3435973836)!==0?(c&=3435973836,2):0)|(c&2863311530)!==0}function Pa(c,t){const n=c.byteLength/t,o=jt(n);if(n!=1<<o)throw new Error("Invalid number of pointers");for(let a=0;a<n;a++){const l=Qa(a,o);if(a>l){const f=c.slice(a*t,(a+1)*t);c.set(c.slice(l*t,(l+1)*t),a*t),c.set(f,l*t)}}}function wo(c,t){const n=new Uint8Array(t*c.length);for(let o=0;o<c.length;o++)n.set(c[o],o*t);return n}function Xn(c,t){const n=c.byteLength/t,o=new Array(n);for(let a=0;a<n;a++)o[a]=c.slice(a*t,a*t+t);return o}var ic=Object.freeze({__proto__:null,array2buffer:wo,beBuff2int:tc,beInt2Buff:nc,bitReverse:Qa,buffReverseBits:Pa,buffer2array:Xn,leBuff2int:oc,leInt2Buff:Oa,log2:jt,stringifyBigInts:Io,stringifyFElements:Co,unstringifyBigInts:yo,unstringifyFElements:mo});const Tt=1<<30;class Qt{constructor(t){this.buffers=[],this.byteLength=t;for(let n=0;n<t;n+=Tt){const o=Math.min(t-n,Tt);this.buffers.push(new Uint8Array(o))}}slice(t,n){n===void 0&&(n=this.byteLength),t===void 0&&(t=0);const o=n-t,a=Math.floor(t/Tt),l=Math.floor((t+o-1)/Tt);if(a==l||o==0)return this.buffers[a].slice(t%Tt,t%Tt+o);let f,u=a,y=t%Tt,g=o;for(;g>0;){const s=y+g>Tt?Tt-y:g,E=new Uint8Array(this.buffers[u].buffer,this.buffers[u].byteOffset+y,s);if(s==o)return E.slice();f||(o<=Tt?f=new Uint8Array(o):f=new Qt(o)),f.set(E,o-g),g=g-s,u++,y=0}return f}set(t,n){n===void 0&&(n=0);const o=t.byteLength;if(o==0)return;const a=Math.floor(n/Tt),l=Math.floor((n+o-1)/Tt);if(a==l)return t instanceof Qt&&t.buffers.length==1?this.buffers[a].set(t.buffers[0],n%Tt):this.buffers[a].set(t,n%Tt);let f=a,u=n%Tt,y=o;for(;y>0;){const g=u+y>Tt?Tt-u:y,s=t.slice(o-y,o-y+g);new Uint8Array(this.buffers[f].buffer,this.buffers[f].byteOffset+u,g).set(s),y=y-g,f++,u=0}}}function _n(c,t,n,o){return async function(l){const f=Math.floor(l.byteLength/n);if(f*n!==l.byteLength)throw new Error("Invalid buffer size");const u=Math.floor(f/c.concurrency),y=[];for(let F=0;F<c.concurrency;F++){let A;if(F<c.concurrency-1?A=u:A=f-F*u,A==0)continue;const k=[{cmd:"ALLOCSET",var:0,buff:l.slice(F*u*n,F*u*n+A*n)},{cmd:"ALLOC",var:1,len:o*A},{cmd:"CALL",fnName:t,params:[{var:0},{val:A},{var:1}]},{cmd:"GET",out:0,var:1,len:o*A}];y.push(c.queueAction(k))}const g=await Promise.all(y);let s;l instanceof Qt?s=new Qt(f*o):s=new Uint8Array(f*o);let E=0;for(let F=0;F<g.length;F++)s.set(g[F][0],E),E+=g[F][0].byteLength;return s}}class Ma{constructor(t,n,o,a){if(this.tm=t,this.prefix=n,this.p=a,this.n8=o,this.type="F1",this.m=1,this.half=Cn(a,pn),this.bitLength=On(a),this.mask=nn($n(pn,this.bitLength),pn),this.pOp1=t.alloc(o),this.pOp2=t.alloc(o),this.pOp3=t.alloc(o),this.tm.instance.exports[n+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,this.n8),this.tm.instance.exports[n+"_one"](this.pOp1),this.one=this.tm.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.n64=Math.floor(o/8),this.n32=Math.floor(o/4),this.n64*8!=this.n8)throw new Error("n8 must be a multiple of 8");this.half=Cn(this.p,pn),this.nqr=this.two;let l=this.exp(this.nqr,this.half);for(;!this.eq(l,this.negone);)this.nqr=this.add(this.nqr,this.one),l=this.exp(this.nqr,this.half);this.shift=this.mul(this.nqr,this.nqr),this.shiftInv=this.inv(this.shift),this.s=0;let f=nn(this.p,pn);for(;!ao(f);)this.s=this.s+1,f=Cn(f,pn);this.w=[],this.w[this.s]=this.exp(this.nqr,f);for(let u=this.s-1;u>=0;u--)this.w[u]=this.square(this.w[u+1]);if(!this.eq(this.w[0],this.one))throw new Error("Error calculating roots of unity");this.batchToMontgomery=_n(t,n+"_batchToMontgomery",this.n8,this.n8),this.batchFromMontgomery=_n(t,n+"_batchFromMontgomery",this.n8,this.n8)}op2(t,n,o){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,o),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,n,o){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,o),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,n){return this.tm.setBuff(this.pOp1,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,n){return this.op2("_add",t,n)}eq(t,n){return this.op2Bool("_eq",t,n)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,n){return this.op2("_sub",t,n)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,n){return this.op2("_mul",t,n)}div(t,n){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,n){return n instanceof Uint8Array||(n=wn(Ut(n))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,n.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}isNegative(t){return this.op1Bool("_isNegative",t)}e(t,n){if(t instanceof Uint8Array)return t;let o=Ut(t,n);No(o)?(o=jo(o),eo(o,this.p)&&(o=Xt(o,this.p)),o=nn(this.p,o)):eo(o,this.p)&&(o=Xt(o,this.p));const a=Oa(o,this.n8);return this.toMontgomery(a)}toString(t,n){const o=this.fromMontgomery(t),a=Mn(o,0);return Jo(a,n)}fromRng(t){let n;const o=new Uint8Array(this.n8);do{n=Xo;for(let a=0;a<this.n64;a++)n=io(n,$n(t.nextU64(),64*a));n=co(n,this.mask)}while(Yo(n,this.p));return Pn(o,0,n,this.n8),o}random(){return this.fromRng(so())}toObject(t){const n=this.fromMontgomery(t);return Mn(n,0)}fromObject(t){const n=new Uint8Array(this.n8);return Pn(n,0,t,this.n8),this.toMontgomery(n)}toRprLE(t,n,o){t.set(this.fromMontgomery(o),n)}toRprBE(t,n,o){const a=this.fromMontgomery(o);for(let l=0;l<this.n8/2;l++){const f=a[l];a[l]=a[this.n8-1-l],a[this.n8-1-l]=f}t.set(a,n)}fromRprLE(t,n){n=n||0;const o=t.slice(n,n+this.n8);return this.toMontgomery(o)}async batchInverse(t){let n=!1;const o=this.n8,a=this.n8;Array.isArray(t)?(t=wo(t,o),n=!0):t=t.slice(0,t.byteLength);const l=Math.floor(t.byteLength/o);if(l*o!==t.byteLength)throw new Error("Invalid buffer size");const f=Math.floor(l/this.tm.concurrency),u=[];for(let E=0;E<this.tm.concurrency;E++){let F;if(E<this.tm.concurrency-1?F=f:F=l-E*f,F==0)continue;const D=[{cmd:"ALLOCSET",var:0,buff:t.slice(E*f*o,E*f*o+F*o)},{cmd:"ALLOC",var:1,len:a*F},{cmd:"CALL",fnName:this.prefix+"_batchInverse",params:[{var:0},{val:o},{val:F},{var:1},{val:a}]},{cmd:"GET",out:0,var:1,len:a*F}];u.push(this.tm.queueAction(D))}const y=await Promise.all(u);let g;t instanceof Qt?g=new Qt(l*a):g=new Uint8Array(l*a);let s=0;for(let E=0;E<y.length;E++)g.set(y[E][0],s),s+=y[E][0].byteLength;return n?Xn(g,a):g}}class qa{constructor(t,n,o){this.tm=t,this.prefix=n,this.F=o,this.type="F2",this.m=o.m*2,this.n8=this.F.n8*2,this.n32=this.F.n32*2,this.n64=this.F.n64*2,this.pOp1=t.alloc(o.n8*2),this.pOp2=t.alloc(o.n8*2),this.pOp3=t.alloc(o.n8*2),this.tm.instance.exports[n+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[n+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,n,o){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,o),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,n,o){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,o),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,n){return this.tm.setBuff(this.pOp1,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,n){return this.op2("_add",t,n)}eq(t,n){return this.op2Bool("_eq",t,n)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,n){return this.op2("_sub",t,n)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,n){return this.op2("_mul",t,n)}mul1(t,n){return this.op2("_mul1",t,n)}div(t,n){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,n){return n instanceof Uint8Array||(n=wn(Ut(n))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,n.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}e(t,n){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&t.length==2){const o=this.F.e(t[0],n),a=this.F.e(t[1],n),l=new Uint8Array(this.F.n8*2);return l.set(o),l.set(a,this.F.n8*2),l}else throw new Error("invalid F2")}toString(t,n){const o=this.F.toString(t.slice(0,this.F.n8),n),a=this.F.toString(t.slice(this.F.n8),n);return`[${o}, ${a}]`}fromRng(t){const n=this.F.fromRng(t),o=this.F.fromRng(t),a=new Uint8Array(this.F.n8*2);return a.set(n),a.set(o,this.F.n8),a}random(){return this.fromRng(so())}toObject(t){const n=this.F.toObject(t.slice(0,this.F.n8)),o=this.F.toObject(t.slice(this.F.n8,this.F.n8*2));return[n,o]}fromObject(t){const n=new Uint8Array(this.F.n8*2),o=this.F.fromObject(t[0]),a=this.F.fromObject(t[1]);return n.set(o),n.set(a,this.F.n8),n}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8)}}class ec{constructor(t,n,o){this.tm=t,this.prefix=n,this.F=o,this.type="F3",this.m=o.m*3,this.n8=this.F.n8*3,this.n32=this.F.n32*3,this.n64=this.F.n64*3,this.pOp1=t.alloc(o.n8*3),this.pOp2=t.alloc(o.n8*3),this.pOp3=t.alloc(o.n8*3),this.tm.instance.exports[n+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[n+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,n,o){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,o),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,n,o){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,o),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,n){return this.tm.setBuff(this.pOp1,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}eq(t,n){return this.op2Bool("_eq",t,n)}isZero(t){return this.op1Bool("_isZero",t)}add(t,n){return this.op2("_add",t,n)}sub(t,n){return this.op2("_sub",t,n)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,n){return this.op2("_mul",t,n)}div(t,n){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,n){return n instanceof Uint8Array||(n=wn(Ut(n))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,n.byteLength,this.pOp3),this.getBuff(this.pOp3,this.n8)}e(t,n){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&t.length==3){const o=this.F.e(t[0],n),a=this.F.e(t[1],n),l=this.F.e(t[2],n),f=new Uint8Array(this.F.n8*3);return f.set(o),f.set(a,this.F.n8),f.set(l,this.F.n8*2),f}else throw new Error("invalid F3")}toString(t,n){const o=this.F.toString(t.slice(0,this.F.n8),n),a=this.F.toString(t.slice(this.F.n8,this.F.n8*2),n),l=this.F.toString(t.slice(this.F.n8*2),n);return`[${o}, ${a}, ${l}]`}fromRng(t){const n=this.F.fromRng(t),o=this.F.fromRng(t),a=this.F.fromRng(t),l=new Uint8Array(this.F.n8*3);return l.set(n),l.set(o,this.F.n8),l.set(a,this.F.n8*2),l}random(){return this.fromRng(so())}toObject(t){const n=this.F.toObject(t.slice(0,this.F.n8)),o=this.F.toObject(t.slice(this.F.n8,this.F.n8*2)),a=this.F.toObject(t.slice(this.F.n8*2,this.F.n8*3));return[n,o,a]}fromObject(t){const n=new Uint8Array(this.F.n8*3),o=this.F.fromObject(t[0]),a=this.F.fromObject(t[1]),l=this.F.fromObject(t[2]);return n.set(o),n.set(a,this.F.n8),n.set(l,this.F.n8*2),n}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8,this.F.n8*2)}c3(t){return t.slice(this.F.n8*2)}}class Ua{constructor(t,n,o,a,l,f){this.tm=t,this.prefix=n,this.F=o,this.pOp1=t.alloc(o.n8*3),this.pOp2=t.alloc(o.n8*3),this.pOp3=t.alloc(o.n8*3),this.tm.instance.exports[n+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,o.n8*3),this.tm.instance.exports[n+"_zeroAffine"](this.pOp1),this.zeroAffine=this.tm.getBuff(this.pOp1,o.n8*2),this.one=this.tm.getBuff(a,o.n8*3),this.g=this.one,this.oneAffine=this.tm.getBuff(a,o.n8*2),this.gAffine=this.oneAffine,this.b=this.tm.getBuff(l,o.n8),f&&(this.cofactor=wn(f)),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.batchLEMtoC=_n(t,n+"_batchLEMtoC",o.n8*2,o.n8),this.batchLEMtoU=_n(t,n+"_batchLEMtoU",o.n8*2,o.n8*2),this.batchCtoLEM=_n(t,n+"_batchCtoLEM",o.n8,o.n8*2),this.batchUtoLEM=_n(t,n+"_batchUtoLEM",o.n8*2,o.n8*2),this.batchToJacobian=_n(t,n+"_batchToJacobian",o.n8*2,o.n8*3),this.batchToAffine=_n(t,n+"_batchToAffine",o.n8*3,o.n8*2)}op2(t,n,o){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,o),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}op2bool(t,n,o){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,o),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3)}op1(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}op1Affine(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*2)}op1Bool(t,n){return this.tm.setBuff(this.pOp1,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,n){if(t.byteLength==this.F.n8*3){if(n.byteLength==this.F.n8*3)return this.op2("_add",t,n);if(n.byteLength==this.F.n8*2)return this.op2("_addMixed",t,n);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(n.byteLength==this.F.n8*3)return this.op2("_addMixed",n,t);if(n.byteLength==this.F.n8*2)return this.op2("_addAffine",t,n);throw new Error("invalid point size")}else throw new Error("invalid point size")}sub(t,n){if(t.byteLength==this.F.n8*3){if(n.byteLength==this.F.n8*3)return this.op2("_sub",t,n);if(n.byteLength==this.F.n8*2)return this.op2("_subMixed",t,n);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(n.byteLength==this.F.n8*3)return this.op2("_subMixed",n,t);if(n.byteLength==this.F.n8*2)return this.op2("_subAffine",t,n);throw new Error("invalid point size")}else throw new Error("invalid point size")}neg(t){if(t.byteLength==this.F.n8*3)return this.op1("_neg",t);if(t.byteLength==this.F.n8*2)return this.op1Affine("_negAffine",t);throw new Error("invalid point size")}double(t){if(t.byteLength==this.F.n8*3)return this.op1("_double",t);if(t.byteLength==this.F.n8*2)return this.op1("_doubleAffine",t);throw new Error("invalid point size")}isZero(t){if(t.byteLength==this.F.n8*3)return this.op1Bool("_isZero",t);if(t.byteLength==this.F.n8*2)return this.op1Bool("_isZeroAffine",t);throw new Error("invalid point size")}timesScalar(t,n){n instanceof Uint8Array||(n=wn(Ut(n)));let o;if(t.byteLength==this.F.n8*3)o=this.prefix+"_timesScalar";else if(t.byteLength==this.F.n8*2)o=this.prefix+"_timesScalarAffine";else throw new Error("invalid point size");return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[o](this.pOp1,this.pOp2,n.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}timesFr(t,n){let o;if(t.byteLength==this.F.n8*3)o=this.prefix+"_timesFr";else if(t.byteLength==this.F.n8*2)o=this.prefix+"_timesFrAffine";else throw new Error("invalid point size");return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[o](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}eq(t,n){if(t.byteLength==this.F.n8*3){if(n.byteLength==this.F.n8*3)return this.op2bool("_eq",t,n);if(n.byteLength==this.F.n8*2)return this.op2bool("_eqMixed",t,n);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(n.byteLength==this.F.n8*3)return this.op2bool("_eqMixed",n,t);if(n.byteLength==this.F.n8*2)return this.op2bool("_eqAffine",t,n);throw new Error("invalid point size")}else throw new Error("invalid point size")}toAffine(t){if(t.byteLength==this.F.n8*3)return this.op1Affine("_toAffine",t);if(t.byteLength==this.F.n8*2)return t;throw new Error("invalid point size")}toJacobian(t){if(t.byteLength==this.F.n8*3)return t;if(t.byteLength==this.F.n8*2)return this.op1("_toJacobian",t);throw new Error("invalid point size")}toRprUncompressed(t,n,o){if(this.tm.setBuff(this.pOp1,o),o.byteLength==this.F.n8*3)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(o.byteLength!=this.F.n8*2)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoU"](this.pOp1,this.pOp1);const a=this.tm.getBuff(this.pOp1,this.F.n8*2);t.set(a,n)}fromRprUncompressed(t,n){const o=t.slice(n,n+this.F.n8*2);return this.tm.setBuff(this.pOp1,o),this.tm.instance.exports[this.prefix+"_UtoLEM"](this.pOp1,this.pOp1),this.tm.getBuff(this.pOp1,this.F.n8*2)}toRprCompressed(t,n,o){if(this.tm.setBuff(this.pOp1,o),o.byteLength==this.F.n8*3)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(o.byteLength!=this.F.n8*2)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoC"](this.pOp1,this.pOp1);const a=this.tm.getBuff(this.pOp1,this.F.n8);t.set(a,n)}fromRprCompressed(t,n){const o=t.slice(n,n+this.F.n8);return this.tm.setBuff(this.pOp1,o),this.tm.instance.exports[this.prefix+"_CtoLEM"](this.pOp1,this.pOp2),this.tm.getBuff(this.pOp2,this.F.n8*2)}toUncompressed(t){const n=new Uint8Array(this.F.n8*2);return this.toRprUncompressed(n,0,t),n}toRprLEM(t,n,o){if(o.byteLength==this.F.n8*2){t.set(o,n);return}else if(o.byteLength==this.F.n8*3){this.tm.setBuff(this.pOp1,o),this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);const a=this.tm.getBuff(this.pOp1,this.F.n8*2);t.set(a,n)}else throw new Error("invalid point size")}fromRprLEM(t,n){return n=n||0,t.slice(n,n+this.F.n8*2)}toString(t,n){if(t.byteLength==this.F.n8*3){const o=this.F.toString(t.slice(0,this.F.n8),n),a=this.F.toString(t.slice(this.F.n8,this.F.n8*2),n),l=this.F.toString(t.slice(this.F.n8*2),n);return`[ ${o}, ${a}, ${l} ]`}else if(t.byteLength==this.F.n8*2){const o=this.F.toString(t.slice(0,this.F.n8),n),a=this.F.toString(t.slice(this.F.n8),n);return`[ ${o}, ${a} ]`}else throw new Error("invalid point size")}isValid(t){if(this.isZero(t))return!0;const n=this.F,o=this.toAffine(t),a=o.slice(0,this.F.n8),l=o.slice(this.F.n8,this.F.n8*2),f=n.add(n.mul(n.square(a),a),this.b),u=n.square(l);return n.eq(f,u)}fromRng(t){const n=this.F;let o=[],a,l;do o[0]=n.fromRng(t),a=t.nextBool(),l=n.add(n.mul(n.square(o[0]),o[0]),this.b);while(!n.isSquare(l));o[1]=n.sqrt(l);const f=n.isNegative(o[1]);a^f&&(o[1]=n.neg(o[1]));let u=new Uint8Array(this.F.n8*2);return u.set(o[0]),u.set(o[1],this.F.n8),this.cofactor&&(u=this.timesScalar(u,this.cofactor)),u}toObject(t){if(this.isZero(t))return[this.F.toObject(this.F.zero),this.F.toObject(this.F.one),this.F.toObject(this.F.zero)];const n=this.F.toObject(t.slice(0,this.F.n8)),o=this.F.toObject(t.slice(this.F.n8,this.F.n8*2));let a;return t.byteLength==this.F.n8*3?a=this.F.toObject(t.slice(this.F.n8*2,this.F.n8*3)):a=this.F.toObject(this.F.one),[n,o,a]}fromObject(t){const n=this.F.fromObject(t[0]),o=this.F.fromObject(t[1]);let a;if(t.length==3?a=this.F.fromObject(t[2]):a=this.F.one,this.F.isZero(a,this.F.one))return this.zeroAffine;if(this.F.eq(a,this.F.one)){const l=new Uint8Array(this.F.n8*2);return l.set(n),l.set(o,this.F.n8),l}else{const l=new Uint8Array(this.F.n8*3);return l.set(n),l.set(o,this.F.n8),l.set(a,this.F.n8*2),l}}e(t){return t instanceof Uint8Array?t:this.fromObject(t)}x(t){return this.toAffine(t).slice(0,this.F.n8)}y(t){return this.toAffine(t).slice(this.F.n8)}}function cc(c){let n,o;async function a(s){const E=new Uint8Array(s.code),F=await WebAssembly.compile(E);o=new WebAssembly.Memory({initial:s.init,maximum:32767}),n=await WebAssembly.instantiate(F,{env:{memory:o}})}function l(s){const E=new Uint32Array(o.buffer,0,1);for(;E[0]&3;)E[0]++;const F=E[0];if(E[0]+=s,E[0]+s>o.buffer.byteLength){const A=o.buffer.byteLength/65536;let D=Math.floor((E[0]+s)/65536)+1;D>32767&&(D=32767),o.grow(D-A)}return F}function f(s){const E=l(s.byteLength);return y(E,s),E}function u(s,E){const F=new Uint8Array(o.buffer);return new Uint8Array(F.buffer,F.byteOffset+s,E)}function y(s,E){new Uint8Array(o.buffer).set(new Uint8Array(E),s)}function g(s){if(s[0].cmd=="INIT")return a(s[0]);const E={vars:[],out:[]},A=new Uint32Array(o.buffer,0,1)[0];for(let k=0;k<s.length;k++)switch(s[k].cmd){case"ALLOCSET":E.vars[s[k].var]=f(s[k].buff);break;case"ALLOC":E.vars[s[k].var]=l(s[k].len);break;case"SET":y(E.vars[s[k].var],s[k].buff);break;case"CALL":{const B=[];for(let G=0;G<s[k].params.length;G++){const S=s[k].params[G];typeof S.var<"u"?B.push(E.vars[S.var]+(S.offset||0)):typeof S.val<"u"&&B.push(S.val)}n.exports[s[k].fnName](...B);break}case"GET":E.out[s[k].out]=u(E.vars[s[k].var],s[k].len).slice();break;default:throw new Error("Invalid cmd")}const D=new Uint32Array(o.buffer,0,1);return D[0]=A,E.out}return g}const Bo=25;class za{constructor(){this.promise=new Promise((t,n)=>{this.reject=n,this.resolve=t})}}function sc(c){return new Promise(t=>setTimeout(t,c))}let Eo;const Da=`(function thread(self) {
    const MAXMEM = 32767;
    let instance;
    let memory;

    if (self) {
        self.onmessage = function(e) {
            let data;
            if (e.data) {
                data = e.data;
            } else {
                data = e;
            }

            if (data[0].cmd == "INIT") {
                init(data[0]).then(function() {
                    self.postMessage(data.result);
                });
            } else if (data[0].cmd == "TERMINATE") {
                self.close();
            } else {
                const res = runTask(data);
                self.postMessage(res);
            }
        };
    }

    async function init(data) {
        const code = new Uint8Array(data.code);
        const wasmModule = await WebAssembly.compile(code);
        memory = new WebAssembly.Memory({initial:data.init, maximum: MAXMEM});

        instance = await WebAssembly.instantiate(wasmModule, {
            env: {
                "memory": memory
            }
        });
    }



    function alloc(length) {
        const u32 = new Uint32Array(memory.buffer, 0, 1);
        while (u32[0] & 3) u32[0]++;  // Return always aligned pointers
        const res = u32[0];
        u32[0] += length;
        if (u32[0] + length > memory.buffer.byteLength) {
            const currentPages = memory.buffer.byteLength / 0x10000;
            let requiredPages = Math.floor((u32[0] + length) / 0x10000)+1;
            if (requiredPages>MAXMEM) requiredPages=MAXMEM;
            memory.grow(requiredPages-currentPages);
        }
        return res;
    }

    function allocBuffer(buffer) {
        const p = alloc(buffer.byteLength);
        setBuffer(p, buffer);
        return p;
    }

    function getBuffer(pointer, length) {
        const u8 = new Uint8Array(memory.buffer);
        return new Uint8Array(u8.buffer, u8.byteOffset + pointer, length);
    }

    function setBuffer(pointer, buffer) {
        const u8 = new Uint8Array(memory.buffer);
        u8.set(new Uint8Array(buffer), pointer);
    }

    function runTask(task) {
        if (task[0].cmd == "INIT") {
            return init(task[0]);
        }
        const ctx = {
            vars: [],
            out: []
        };
        const u32a = new Uint32Array(memory.buffer, 0, 1);
        const oldAlloc = u32a[0];
        for (let i=0; i<task.length; i++) {
            switch (task[i].cmd) {
            case "ALLOCSET":
                ctx.vars[task[i].var] = allocBuffer(task[i].buff);
                break;
            case "ALLOC":
                ctx.vars[task[i].var] = alloc(task[i].len);
                break;
            case "SET":
                setBuffer(ctx.vars[task[i].var], task[i].buff);
                break;
            case "CALL": {
                const params = [];
                for (let j=0; j<task[i].params.length; j++) {
                    const p = task[i].params[j];
                    if (typeof p.var !== "undefined") {
                        params.push(ctx.vars[p.var] + (p.offset || 0));
                    } else if (typeof p.val != "undefined") {
                        params.push(p.val);
                    }
                }
                instance.exports[task[i].fnName](...params);
                break;
            }
            case "GET":
                ctx.out[task[i].out] = getBuffer(ctx.vars[task[i].var], task[i].len).slice();
                break;
            default:
                throw new Error("Invalid cmd");
            }
        }
        const u32b = new Uint32Array(memory.buffer, 0, 1);
        u32b[0] = oldAlloc;
        return ctx.out;
    }


    return runTask;
})(self)`;if(globalThis?.Blob){const c=new TextEncoder().encode(Da),t=new Blob([c],{type:"application/javascript"});Eo=URL.createObjectURL(t)}else Eo="data:application/javascript;base64,"+globalThis.btoa(Da);async function lc(c,t){const n=new rc;n.memory=new WebAssembly.Memory({initial:Bo}),n.u8=new Uint8Array(n.memory.buffer),n.u32=new Uint32Array(n.memory.buffer);const o=await WebAssembly.compile(c.code);if(n.instance=await WebAssembly.instantiate(o,{env:{memory:n.memory}}),globalThis?.Worker||(t=!0),n.singleThread=t,n.initalPFree=n.u32[0],n.pq=c.pq,n.pr=c.pr,n.pG1gen=c.pG1gen,n.pG1zero=c.pG1zero,n.pG2gen=c.pG2gen,n.pG2zero=c.pG2zero,n.pOneT=c.pOneT,t)n.code=c.code,n.taskManager=cc(),await n.taskManager([{cmd:"INIT",init:Bo,code:n.code.slice()}]),n.concurrency=1;else{n.workers=[],n.pendingDeferreds=[],n.working=[];let l=2;typeof navigator=="object"&&navigator.hardwareConcurrency&&(l=navigator.hardwareConcurrency),l==0&&(l=2),l>64&&(l=64),n.concurrency=l;for(let u=0;u<l;u++)n.workers[u]=new Worker(Eo),n.workers[u].addEventListener("message",a(u)),n.working[u]=!1;const f=[];for(let u=0;u<n.workers.length;u++){const y=c.code.slice();f.push(n.postAction(u,[{cmd:"INIT",init:Bo,code:y}],[y.buffer]))}await Promise.all(f)}return n;function a(l){return function(f){let u;f&&f.data?u=f.data:u=f,n.working[l]=!1,n.pendingDeferreds[l].resolve(u),n.processWorks()}}}class rc{constructor(){this.actionQueue=[],this.oldPFree=0}startSyncOp(){if(this.oldPFree!=0)throw new Error("Sync operation in progress");this.oldPFree=this.u32[0]}endSyncOp(){if(this.oldPFree==0)throw new Error("No sync operation in progress");this.u32[0]=this.oldPFree,this.oldPFree=0}postAction(t,n,o,a){if(this.working[t])throw new Error("Posting a job t a working worker");return this.working[t]=!0,this.pendingDeferreds[t]=a||new za,this.workers[t].postMessage(n,o),this.pendingDeferreds[t].promise}processWorks(){for(let t=0;t<this.workers.length&&this.actionQueue.length>0;t++)if(this.working[t]==!1){const n=this.actionQueue.shift();this.postAction(t,n.data,n.transfers,n.deferred)}}queueAction(t,n){const o=new za;if(this.singleThread){const a=this.taskManager(t);o.resolve(a)}else this.actionQueue.push({data:t,transfers:n,deferred:o}),this.processWorks();return o.promise}resetMemory(){this.u32[0]=this.initalPFree}allocBuff(t){const n=this.alloc(t.byteLength);return this.setBuff(n,t),n}getBuff(t,n){return this.u8.slice(t,t+n)}setBuff(t,n){this.u8.set(new Uint8Array(n),t)}alloc(t){for(;this.u32[0]&3;)this.u32[0]++;const n=this.u32[0];return this.u32[0]+=t,n}async terminate(){for(let t=0;t<this.workers.length;t++)this.workers[t].postMessage([{cmd:"TERMINATE"}]);await sc(200)}}function Fo(c,t){const n=c[t],o=c.Fr,a=c.tm;c[t].batchApplyKey=async function(l,f,u,y,g){y=y||"affine",g=g||"affine";let s,E,F,A,D;if(t=="G1")y=="jacobian"?(F=n.F.n8*3,s="g1m_batchApplyKey"):(F=n.F.n8*2,s="g1m_batchApplyKeyMixed"),A=n.F.n8*3,g=="jacobian"?D=n.F.n8*3:(E="g1m_batchToAffine",D=n.F.n8*2);else if(t=="G2")y=="jacobian"?(F=n.F.n8*3,s="g2m_batchApplyKey"):(F=n.F.n8*2,s="g2m_batchApplyKeyMixed"),A=n.F.n8*3,g=="jacobian"?D=n.F.n8*3:(E="g2m_batchToAffine",D=n.F.n8*2);else if(t=="Fr")s="frm_batchApplyKey",F=n.n8,A=n.n8,D=n.n8;else throw new Error("Invalid group: "+t);const k=Math.floor(l.byteLength/F),B=Math.floor(k/a.concurrency),G=[];u=o.e(u);let S=o.e(f);for(let w=0;w<a.concurrency;w++){let _;if(w<a.concurrency-1?_=B:_=k-w*B,_==0)continue;const p=[];p.push({cmd:"ALLOCSET",var:0,buff:l.slice(w*B*F,w*B*F+_*F)}),p.push({cmd:"ALLOCSET",var:1,buff:S}),p.push({cmd:"ALLOCSET",var:2,buff:u}),p.push({cmd:"ALLOC",var:3,len:_*Math.max(A,D)}),p.push({cmd:"CALL",fnName:s,params:[{var:0},{val:_},{var:1},{var:2},{var:3}]}),E&&p.push({cmd:"CALL",fnName:E,params:[{var:3},{val:_},{var:3}]}),p.push({cmd:"GET",out:0,var:3,len:_*D}),G.push(a.queueAction(p)),S=o.mul(S,o.exp(u,_))}const st=await Promise.all(G);let U;l instanceof Qt?U=new Qt(k*D):U=new Uint8Array(k*D);let lt=0;for(let w=0;w<st.length;w++)U.set(st[w][0],lt),lt+=st[w][0].byteLength;return U}}function dc(c){const t=c.tm;c.pairing=function(o,a){t.startSyncOp();const l=t.allocBuff(c.G1.toJacobian(o)),f=t.allocBuff(c.G2.toJacobian(a)),u=t.alloc(c.Gt.n8);t.instance.exports[c.name+"_pairing"](l,f,u);const y=t.getBuff(u,c.Gt.n8);return t.endSyncOp(),y},c.pairingEq=async function(){let o,a;arguments.length%2==1?(o=arguments[arguments.length-1],a=(arguments.length-1)/2):(o=c.Gt.one,a=arguments.length/2);const l=[];for(let s=0;s<a;s++){const E=[],F=c.G1.toJacobian(arguments[s*2]);E.push({cmd:"ALLOCSET",var:0,buff:F}),E.push({cmd:"ALLOC",var:1,len:c.prePSize});const A=c.G2.toJacobian(arguments[s*2+1]);E.push({cmd:"ALLOCSET",var:2,buff:A}),E.push({cmd:"ALLOC",var:3,len:c.preQSize}),E.push({cmd:"ALLOC",var:4,len:c.Gt.n8}),E.push({cmd:"CALL",fnName:c.name+"_prepareG1",params:[{var:0},{var:1}]}),E.push({cmd:"CALL",fnName:c.name+"_prepareG2",params:[{var:2},{var:3}]}),E.push({cmd:"CALL",fnName:c.name+"_millerLoop",params:[{var:1},{var:3},{var:4}]}),E.push({cmd:"GET",out:0,var:4,len:c.Gt.n8}),l.push(t.queueAction(E))}const f=await Promise.all(l);t.startSyncOp();const u=t.alloc(c.Gt.n8);t.instance.exports.ftm_one(u);for(let s=0;s<f.length;s++){const E=t.allocBuff(f[s][0]);t.instance.exports.ftm_mul(u,E,u)}t.instance.exports[c.name+"_finalExponentiation"](u,u);const y=t.allocBuff(o),g=!!t.instance.exports.ftm_eq(u,y);return t.endSyncOp(),g},c.prepareG1=function(n){this.tm.startSyncOp();const o=this.tm.allocBuff(n),a=this.tm.alloc(this.prePSize);this.tm.instance.exports[this.name+"_prepareG1"](o,a);const l=this.tm.getBuff(a,this.prePSize);return this.tm.endSyncOp(),l},c.prepareG2=function(n){this.tm.startSyncOp();const o=this.tm.allocBuff(n),a=this.tm.alloc(this.preQSize);this.tm.instance.exports[this.name+"_prepareG2"](o,a);const l=this.tm.getBuff(a,this.preQSize);return this.tm.endSyncOp(),l},c.millerLoop=function(n,o){this.tm.startSyncOp();const a=this.tm.allocBuff(n),l=this.tm.allocBuff(o),f=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_millerLoop"](a,l,f);const u=this.tm.getBuff(f,this.Gt.n8);return this.tm.endSyncOp(),u},c.finalExponentiation=function(n){this.tm.startSyncOp();const o=this.tm.allocBuff(n),a=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_finalExponentiation"](o,a);const l=this.tm.getBuff(a,this.Gt.n8);return this.tm.endSyncOp(),l}}const ka=[1,1,1,1,2,3,4,5,6,7,7,8,9,10,11,12,13,13,14,15,16,16,17,17,17,17,17,17,17,17,17,17];function Ta(c,t){const n=c[t],o=n.tm;async function a(f,u,y,g,s){if(!(f instanceof Uint8Array))throw g&&g.error(`${s} _multiExpChunk buffBases is not Uint8Array`),new Error(`${s} _multiExpChunk buffBases is not Uint8Array`);if(!(u instanceof Uint8Array))throw g&&g.error(`${s} _multiExpChunk buffScalars is not Uint8Array`),new Error(`${s} _multiExpChunk buffScalars is not Uint8Array`);y=y||"affine";let E,F;if(t=="G1")y=="affine"?(F="g1m_multiexpAffine_chunk",E=n.F.n8*2):(F="g1m_multiexp_chunk",E=n.F.n8*3);else if(t=="G2")y=="affine"?(F="g2m_multiexpAffine_chunk",E=n.F.n8*2):(F="g2m_multiexp_chunk",E=n.F.n8*3);else throw new Error("Invalid group");const A=Math.floor(f.byteLength/E);if(A==0)return n.zero;const D=Math.floor(u.byteLength/A);if(D*A!=u.byteLength)throw new Error("Scalar size does not match");const k=ka[jt(A)],B=Math.floor((D*8-1)/k)+1,G=[];for(let U=0;U<B;U++){const lt=[{cmd:"ALLOCSET",var:0,buff:f},{cmd:"ALLOCSET",var:1,buff:u},{cmd:"ALLOC",var:2,len:n.F.n8*3},{cmd:"CALL",fnName:F,params:[{var:0},{var:1},{val:D},{val:A},{val:U*k},{val:Math.min(D*8-U*k,k)},{var:2}]},{cmd:"GET",out:0,var:2,len:n.F.n8*3}];G.push(n.tm.queueAction(lt))}const S=await Promise.all(G);let st=n.zero;for(let U=S.length-1;U>=0;U--){if(!n.isZero(st))for(let lt=0;lt<k;lt++)st=n.double(st);st=n.add(st,S[U][0])}return st}async function l(f,u,y,g,s){let A;if(t=="G1")y=="affine"?A=n.F.n8*2:A=n.F.n8*3;else if(t=="G2")y=="affine"?A=n.F.n8*2:A=n.F.n8*3;else throw new Error("Invalid group");const D=Math.floor(f.byteLength/A);if(D==0)return n.zero;const k=Math.floor(u.byteLength/D);if(k*D!=u.byteLength)throw new Error("Scalar size does not match");const B=ka[jt(D)],G=Math.floor((k*8-1)/B)+1;let S;S=Math.floor(D/(o.concurrency/G)),S>4194304&&(S=4194304),S<1024&&(S=1024);const st=[];for(let w=0;w<D;w+=S){g&&g.debug(`Multiexp start: ${s}: ${w}/${D}`);const _=Math.min(D-w,S),p=f.slice(w*A,(w+_)*A),V=u.slice(w*k,(w+_)*k);st.push(a(p,V,y,g,s).then($=>(g&&g.debug(`Multiexp end: ${s}: ${w}/${D}`),$)))}const U=await Promise.all(st);let lt=n.zero;for(let w=U.length-1;w>=0;w--)lt=n.add(lt,U[w]);return lt}n.multiExp=async function(u,y,g,s){return await l(u,y,"jacobian",g,s)},n.multiExpAffine=async function(u,y,g,s){return await l(u,y,"affine",g,s)}}function So(c,t){const n=c[t],o=c.Fr,a=n.tm;async function l(g,s,E,F,A,D){E=E||"affine",F=F||"affine";const k=14;let B,G,S,st,U,lt,w,_;t=="G1"?(E=="affine"?(B=n.F.n8*2,st="g1m_batchToJacobian"):B=n.F.n8*3,G=n.F.n8*3,s&&(_="g1m_fftFinal"),w="g1m_fftJoin",lt="g1m_fftMix",F=="affine"?(S=n.F.n8*2,U="g1m_batchToAffine"):S=n.F.n8*3):t=="G2"?(E=="affine"?(B=n.F.n8*2,st="g2m_batchToJacobian"):B=n.F.n8*3,G=n.F.n8*3,s&&(_="g2m_fftFinal"),w="g2m_fftJoin",lt="g2m_fftMix",F=="affine"?(S=n.F.n8*2,U="g2m_batchToAffine"):S=n.F.n8*3):t=="Fr"&&(B=n.n8,G=n.n8,S=n.n8,s&&(_="frm_fftFinal"),lt="frm_fftMix",w="frm_fftJoin");let p=!1;Array.isArray(g)?(g=wo(g,B),p=!0):g=g.slice(0,g.byteLength);const V=g.byteLength/B,$=jt(V);if(1<<$!=V)throw new Error("fft must be multiple of 2");if($==o.s+1){let K;return s?K=await u(g,E,F,A,D):K=await f(g,E,F,A,D),p?Xn(K,S):K}let X;s&&(X=o.inv(o.e(V)));let Q;Pa(g,B);let b,x=Math.min(1<<k,V),z=V/x;for(;z<a.concurrency&&x>=16;)z*=2,x/=2;const ot=jt(x),tt=[];for(let K=0;K<z;K++){A&&A.debug(`${D}: fft ${$} mix start: ${K}/${z}`);const it=[];it.push({cmd:"ALLOC",var:0,len:G*x});const W=g.slice(x*K*B,x*(K+1)*B);it.push({cmd:"SET",var:0,buff:W}),st&&it.push({cmd:"CALL",fnName:st,params:[{var:0},{val:x},{var:0}]});for(let et=1;et<=ot;et++)it.push({cmd:"CALL",fnName:lt,params:[{var:0},{val:x},{val:et}]});ot==$?(_&&(it.push({cmd:"ALLOCSET",var:1,buff:X}),it.push({cmd:"CALL",fnName:_,params:[{var:0},{val:x},{var:1}]})),U&&it.push({cmd:"CALL",fnName:U,params:[{var:0},{val:x},{var:0}]}),it.push({cmd:"GET",out:0,var:0,len:x*S})):it.push({cmd:"GET",out:0,var:0,len:G*x}),tt.push(a.queueAction(it).then(et=>(A&&A.debug(`${D}: fft ${$} mix end: ${K}/${z}`),et)))}b=await Promise.all(tt);for(let K=0;K<z;K++)b[K]=b[K][0];for(let K=ot+1;K<=$;K++){A&&A.debug(`${D}: fft  ${$}  join: ${K}/${$}`);const it=1<<$-K,W=z/it,et=[];for(let wt=0;wt<it;wt++)for(let ft=0;ft<W/2;ft++){const L=o.exp(o.w[K],ft*x),i=o.w[K],C=wt*W+ft,e=wt*W+ft+W/2,m=[];m.push({cmd:"ALLOCSET",var:0,buff:b[C]}),m.push({cmd:"ALLOCSET",var:1,buff:b[e]}),m.push({cmd:"ALLOCSET",var:2,buff:L}),m.push({cmd:"ALLOCSET",var:3,buff:i}),m.push({cmd:"CALL",fnName:w,params:[{var:0},{var:1},{val:x},{var:2},{var:3}]}),K==$?(_&&(m.push({cmd:"ALLOCSET",var:4,buff:X}),m.push({cmd:"CALL",fnName:_,params:[{var:0},{val:x},{var:4}]}),m.push({cmd:"CALL",fnName:_,params:[{var:1},{val:x},{var:4}]})),U&&(m.push({cmd:"CALL",fnName:U,params:[{var:0},{val:x},{var:0}]}),m.push({cmd:"CALL",fnName:U,params:[{var:1},{val:x},{var:1}]})),m.push({cmd:"GET",out:0,var:0,len:x*S}),m.push({cmd:"GET",out:1,var:1,len:x*S})):(m.push({cmd:"GET",out:0,var:0,len:x*G}),m.push({cmd:"GET",out:1,var:1,len:x*G})),et.push(a.queueAction(m).then(I=>(A&&A.debug(`${D}: fft ${$} join  ${K}/${$}  ${wt+1}/${it} ${ft}/${W/2}`),I)))}const pt=await Promise.all(et);for(let wt=0;wt<it;wt++)for(let ft=0;ft<W/2;ft++){const L=wt*W+ft,i=wt*W+ft+W/2,C=pt.shift();b[L]=C[0],b[i]=C[1]}}if(g instanceof Qt?Q=new Qt(V*S):Q=new Uint8Array(V*S),s){Q.set(b[0].slice((x-1)*S));let K=S;for(let it=z-1;it>0;it--)Q.set(b[it],K),K+=x*S,delete b[it];Q.set(b[0].slice(0,(x-1)*S),K),delete b[0]}else for(let K=0;K<z;K++)Q.set(b[K],x*S*K),delete b[K];return p?Xn(Q,S):Q}async function f(g,s,E,F,A){let D,k;D=g.slice(0,g.byteLength/2),k=g.slice(g.byteLength/2,g.byteLength);const B=[];[D,k]=await y(D,k,"fftJoinExt",o.one,o.shift,s,"jacobian",F,A),B.push(l(D,!1,"jacobian",E,F,A)),B.push(l(k,!1,"jacobian",E,F,A));const G=await Promise.all(B);let S;return G[0].byteLength>268435456?S=new Qt(G[0].byteLength*2):S=new Uint8Array(G[0].byteLength*2),S.set(G[0]),S.set(G[1],G[0].byteLength),S}async function u(g,s,E,F,A){let D,k;D=g.slice(0,g.byteLength/2),k=g.slice(g.byteLength/2,g.byteLength);const B=[];B.push(l(D,!0,s,"jacobian",F,A)),B.push(l(k,!0,s,"jacobian",F,A)),[D,k]=await Promise.all(B);const G=await y(D,k,"fftJoinExtInv",o.one,o.shiftInv,"jacobian",E,F,A);let S;return G[0].byteLength>268435456?S=new Qt(G[0].byteLength*2):S=new Uint8Array(G[0].byteLength*2),S.set(G[0]),S.set(G[1],G[0].byteLength),S}async function y(g,s,E,F,A,D,k,B,G){let U,lt,w,_,p,V;if(t=="G1")D=="affine"?(p=n.F.n8*2,lt="g1m_batchToJacobian"):p=n.F.n8*3,V=n.F.n8*3,U="g1m_"+E,k=="affine"?(w="g1m_batchToAffine",_=n.F.n8*2):_=n.F.n8*3;else if(t=="G2")D=="affine"?(p=n.F.n8*2,lt="g2m_batchToJacobian"):p=n.F.n8*3,U="g2m_"+E,V=n.F.n8*3,k=="affine"?(w="g2m_batchToAffine",_=n.F.n8*2):_=n.F.n8*3;else if(t=="Fr")p=o.n8,_=o.n8,V=o.n8,U="frm_"+E;else throw new Error("Invalid group");if(g.byteLength!=s.byteLength)throw new Error("Invalid buffer size");const $=Math.floor(g.byteLength/p);if($!=1<<jt($))throw new Error("Invalid number of points");let X=Math.floor($/a.concurrency);X<16&&(X=16),X>65536&&(X=65536);const Q=[];for(let tt=0;tt<$;tt+=X){B&&B.debug(`${G}: fftJoinExt Start: ${tt}/${$}`);const K=Math.min($-tt,X),it=o.mul(F,o.exp(A,tt)),W=[],et=g.slice(tt*p,(tt+K)*p),pt=s.slice(tt*p,(tt+K)*p);W.push({cmd:"ALLOC",var:0,len:V*K}),W.push({cmd:"SET",var:0,buff:et}),W.push({cmd:"ALLOC",var:1,len:V*K}),W.push({cmd:"SET",var:1,buff:pt}),W.push({cmd:"ALLOCSET",var:2,buff:it}),W.push({cmd:"ALLOCSET",var:3,buff:A}),lt&&(W.push({cmd:"CALL",fnName:lt,params:[{var:0},{val:K},{var:0}]}),W.push({cmd:"CALL",fnName:lt,params:[{var:1},{val:K},{var:1}]})),W.push({cmd:"CALL",fnName:U,params:[{var:0},{var:1},{val:K},{var:2},{var:3},{val:o.s}]}),w&&(W.push({cmd:"CALL",fnName:w,params:[{var:0},{val:K},{var:0}]}),W.push({cmd:"CALL",fnName:w,params:[{var:1},{val:K},{var:1}]})),W.push({cmd:"GET",out:0,var:0,len:K*_}),W.push({cmd:"GET",out:1,var:1,len:K*_}),Q.push(a.queueAction(W).then(wt=>(B&&B.debug(`${G}: fftJoinExt End: ${tt}/${$}`),wt)))}const b=await Promise.all(Q);let x,z;$*_>268435456?(x=new Qt($*_),z=new Qt($*_)):(x=new Uint8Array($*_),z=new Uint8Array($*_));let ot=0;for(let tt=0;tt<b.length;tt++)x.set(b[tt][0],ot),z.set(b[tt][1],ot),ot+=b[tt][0].byteLength;return[x,z]}n.fft=async function(g,s,E,F,A){return await l(g,!1,s,E,F,A)},n.ifft=async function(g,s,E,F,A){return await l(g,!0,s,E,F,A)},n.lagrangeEvaluations=async function(g,s,E,F,A){s=s||"affine",E=E||"affine";let D;if(t=="G1")s=="affine"?D=n.F.n8*2:D=n.F.n8*3;else if(t=="G2")s=="affine"?D=n.F.n8*2:D=n.F.n8*3;else if(t=="Fr")D=o.n8;else throw new Error("Invalid group");const k=g.byteLength/D,B=jt(k);if(2**B*D!=g.byteLength)throw F&&F.error("lagrangeEvaluations iinvalid input size"),new Error("lagrangeEvaluations invalid Input size");if(B<=o.s)return await n.ifft(g,s,E,F,A);if(B>o.s+1)throw F&&F.error("lagrangeEvaluations input too big"),new Error("lagrangeEvaluations input too big");let G=g.slice(0,g.byteLength/2),S=g.slice(g.byteLength/2,g.byteLength);const st=o.exp(o.shift,k/2),U=o.inv(o.sub(o.one,st));[G,S]=await y(G,S,"prepareLagrangeEvaluation",U,o.shiftInv,s,"jacobian",F,A+" prep");const lt=[];lt.push(l(G,!0,"jacobian",E,F,A+" t0")),lt.push(l(S,!0,"jacobian",E,F,A+" t1")),[G,S]=await Promise.all(lt);let w;return G.byteLength>268435456?w=new Qt(G.byteLength*2):w=new Uint8Array(G.byteLength*2),w.set(G),w.set(S,G.byteLength),w},n.fftMix=async function(s){const E=n.F.n8*3;let F,A;if(t=="G1")F="g1m_fftMix",A="g1m_fftJoin";else if(t=="G2")F="g2m_fftMix",A="g2m_fftJoin";else if(t=="Fr")F="frm_fftMix",A="frm_fftJoin";else throw new Error("Invalid group");const D=Math.floor(s.byteLength/E),k=jt(D);let B=1<<jt(a.concurrency);D<=B*2&&(B=1);const G=D/B,S=jt(G),st=[];for(let p=0;p<B;p++){const V=[],$=s.slice(p*G*E,(p+1)*G*E);V.push({cmd:"ALLOCSET",var:0,buff:$});for(let X=1;X<=S;X++)V.push({cmd:"CALL",fnName:F,params:[{var:0},{val:G},{val:X}]});V.push({cmd:"GET",out:0,var:0,len:G*E}),st.push(a.queueAction(V))}const U=await Promise.all(st),lt=[];for(let p=0;p<U.length;p++)lt[p]=U[p][0];for(let p=S+1;p<=k;p++){const V=1<<k-p,$=B/V,X=[];for(let b=0;b<V;b++)for(let x=0;x<$/2;x++){const z=o.exp(o.w[p],x*G),ot=o.w[p],tt=b*$+x,K=b*$+x+$/2,it=[];it.push({cmd:"ALLOCSET",var:0,buff:lt[tt]}),it.push({cmd:"ALLOCSET",var:1,buff:lt[K]}),it.push({cmd:"ALLOCSET",var:2,buff:z}),it.push({cmd:"ALLOCSET",var:3,buff:ot}),it.push({cmd:"CALL",fnName:A,params:[{var:0},{var:1},{val:G},{var:2},{var:3}]}),it.push({cmd:"GET",out:0,var:0,len:G*E}),it.push({cmd:"GET",out:1,var:1,len:G*E}),X.push(a.queueAction(it))}const Q=await Promise.all(X);for(let b=0;b<V;b++)for(let x=0;x<$/2;x++){const z=b*$+x,ot=b*$+x+$/2,tt=Q.shift();lt[z]=tt[0],lt[ot]=tt[1]}}let w;s instanceof Qt?w=new Qt(D*E):w=new Uint8Array(D*E);let _=0;for(let p=0;p<B;p++)w.set(lt[p],_),_+=lt[p].byteLength;return w},n.fftJoin=async function(s,E,F,A){const D=n.F.n8*3;let k;if(t=="G1")k="g1m_fftJoin";else if(t=="G2")k="g2m_fftJoin";else if(t=="Fr")k="frm_fftJoin";else throw new Error("Invalid group");if(s.byteLength!=E.byteLength)throw new Error("Invalid buffer size");const B=Math.floor(s.byteLength/D);if(B!=1<<jt(B))throw new Error("Invalid number of points");let G=1<<jt(a.concurrency);B<=G*2&&(G=1);const S=B/G,st=[];for(let p=0;p<G;p++){const V=[],$=o.mul(F,o.exp(A,p*S)),X=s.slice(p*S*D,(p+1)*S*D),Q=E.slice(p*S*D,(p+1)*S*D);V.push({cmd:"ALLOCSET",var:0,buff:X}),V.push({cmd:"ALLOCSET",var:1,buff:Q}),V.push({cmd:"ALLOCSET",var:2,buff:$}),V.push({cmd:"ALLOCSET",var:3,buff:A}),V.push({cmd:"CALL",fnName:k,params:[{var:0},{var:1},{val:S},{var:2},{var:3}]}),V.push({cmd:"GET",out:0,var:0,len:S*D}),V.push({cmd:"GET",out:1,var:1,len:S*D}),st.push(a.queueAction(V))}const U=await Promise.all(st);let lt,w;s instanceof Qt?(lt=new Qt(B*D),w=new Qt(B*D)):(lt=new Uint8Array(B*D),w=new Uint8Array(B*D));let _=0;for(let p=0;p<U.length;p++)lt.set(U[p][0],_),w.set(U[p][1],_),_+=U[p][0].byteLength;return[lt,w]},n.fftFinal=async function(s,E){const F=n.F.n8*3,A=n.F.n8*2;let D,k;if(t=="G1")D="g1m_fftFinal",k="g1m_batchToAffine";else if(t=="G2")D="g2m_fftFinal",k="g2m_batchToAffine";else throw new Error("Invalid group");const B=Math.floor(s.byteLength/F);if(B!=1<<jt(B))throw new Error("Invalid number of points");const G=Math.floor(B/a.concurrency),S=[];for(let w=0;w<a.concurrency;w++){let _;if(w<a.concurrency-1?_=G:_=B-w*G,_==0)continue;const p=[],V=s.slice(w*G*F,(w*G+_)*F);p.push({cmd:"ALLOCSET",var:0,buff:V}),p.push({cmd:"ALLOCSET",var:1,buff:E}),p.push({cmd:"CALL",fnName:D,params:[{var:0},{val:_},{var:1}]}),p.push({cmd:"CALL",fnName:k,params:[{var:0},{val:_},{var:0}]}),p.push({cmd:"GET",out:0,var:0,len:_*A}),S.push(a.queueAction(p))}const st=await Promise.all(S);let U;s instanceof Qt?U=new Qt(B*A):U=new Uint8Array(B*A);let lt=0;for(let w=st.length-1;w>=0;w--)U.set(st[w][0],lt),lt+=st[w][0].byteLength;return U}}async function Ga(c){const t=await lc(c.wasm,c.singleThread),n={};return n.q=Ut(c.wasm.q.toString()),n.r=Ut(c.wasm.r.toString()),n.name=c.name,n.tm=t,n.prePSize=c.wasm.prePSize,n.preQSize=c.wasm.preQSize,n.Fr=new Ma(t,"frm",c.n8r,c.r),n.F1=new Ma(t,"f1m",c.n8q,c.q),n.F2=new qa(t,"f2m",n.F1),n.G1=new Ua(t,"g1m",n.F1,c.wasm.pG1gen,c.wasm.pG1b,c.cofactorG1),n.G2=new Ua(t,"g2m",n.F2,c.wasm.pG2gen,c.wasm.pG2b,c.cofactorG2),n.F6=new ec(t,"f6m",n.F2),n.F12=new qa(t,"ftm",n.F6),n.Gt=n.F12,Fo(n,"G1"),Fo(n,"G2"),Fo(n,"Fr"),Ta(n,"G1"),Ta(n,"G2"),So(n,"G1"),So(n,"G2"),So(n,"Fr"),dc(n),n.array2buffer=function(o,a){const l=new Uint8Array(a*o.length);for(let f=0;f<o.length;f++)l.set(o[f],f*a);return l},n.buffer2array=function(o,a){const l=o.byteLength/a,f=new Array(l);for(let u=0;u<l;u++)f[u]=o.slice(u*a,u*a+a);return f},n}function En(c){return BigInt(c)}function Ra(c){return c<0n}function _c(c){return c===0n}function gc(c){return Ra(c)?c.toString(2).length-1:c.toString(2).length}function vo(c){const t=[],n=En(c);return t.push(Number(n&0xFFn)),t.push(Number(n>>8n&0xFFn)),t.push(Number(n>>16n&0xFFn)),t.push(Number(n>>24n&0xFFn)),t}function uc(c){for(var t=[],n=0;n<c.length;n++){var o=c.charCodeAt(n);o<128?t.push(o):o<2048?t.push(192|o>>6,128|o&63):o<55296||o>=57344?t.push(224|o>>12,128|o>>6&63,128|o&63):(n++,o=65536+((o&1023)<<10|c.charCodeAt(n)&1023),t.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|o&63))}return t}function Gn(c){const t=uc(c);return[...Et(t.length),...t]}function Na(c){const t=[];let n=En(c);if(Ra(n))throw new Error("Number cannot be negative");for(;!_c(n);)t.push(Number(n&0x7Fn)),n=n>>7n;t.length==0&&t.push(0);for(let o=0;o<t.length-1;o++)t[o]=t[o]|128;return t}function Ka(c){let t,n;const o=gc(c);c<0?(n=!0,t=(1n<<BigInt(o))+c):(n=!1,t=En(c));const a=7-o%7,l=(1n<<BigInt(a))-1n<<BigInt(o),f=(1<<7-a)-1|128,u=Na(t+l);return n||(u[u.length-1]=u[u.length-1]&f),u}function xo(c){let t=En(c);if(t>0xFFFFFFFFn)throw new Error("Number too big");if(t>0x7FFFFFFFn&&(t=t-0x100000000n),t<-2147483648n)throw new Error("Number too small");return Ka(t)}function hc(c){let t=En(c);if(t>0xFFFFFFFFFFFFFFFFn)throw new Error("Number too big");if(t>0x7FFFFFFFFFFFFFFFn&&(t=t-0x10000000000000000n),t<-9223372036854775808n)throw new Error("Number too small");return Ka(t)}function Et(c){let t=En(c);if(t>0xFFFFFFFFn)throw new Error("Number too big");return Na(t)}function Ha(c){return Array.from(c,function(t){return("0"+(t&255).toString(16)).slice(-2)}).join("")}class fc{constructor(t){this.func=t,this.functionName=t.functionName,this.module=t.module}setLocal(t,n){const o=this.func.localIdxByName[t];if(o===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...n,33,...Et(o)]}teeLocal(t,n){const o=this.func.localIdxByName[t];if(o===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...n,34,...Et(o)]}getLocal(t){const n=this.func.localIdxByName[t];if(n===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[32,...Et(n)]}i64_load8_s(t,n,o){const a=n||0,l=o===void 0?0:o;return[...t,48,l,...Et(a)]}i64_load8_u(t,n,o){const a=n||0,l=o===void 0?0:o;return[...t,49,l,...Et(a)]}i64_load16_s(t,n,o){const a=n||0,l=o===void 0?1:o;return[...t,50,l,...Et(a)]}i64_load16_u(t,n,o){const a=n||0,l=o===void 0?1:o;return[...t,51,l,...Et(a)]}i64_load32_s(t,n,o){const a=n||0,l=o===void 0?2:o;return[...t,52,l,...Et(a)]}i64_load32_u(t,n,o){const a=n||0,l=o===void 0?2:o;return[...t,53,l,...Et(a)]}i64_load(t,n,o){const a=n||0,l=o===void 0?3:o;return[...t,41,l,...Et(a)]}i64_store(t,n,o,a){let l,f,u;return Array.isArray(n)?(l=0,f=3,u=n):Array.isArray(o)?(l=n,f=3,u=o):Array.isArray(a)&&(l=n,f=o,u=a),[...t,...u,55,f,...Et(l)]}i64_store32(t,n,o,a){let l,f,u;return Array.isArray(n)?(l=0,f=2,u=n):Array.isArray(o)?(l=n,f=2,u=o):Array.isArray(a)&&(l=n,f=o,u=a),[...t,...u,62,f,...Et(l)]}i64_store16(t,n,o,a){let l,f,u;return Array.isArray(n)?(l=0,f=1,u=n):Array.isArray(o)?(l=n,f=1,u=o):Array.isArray(a)&&(l=n,f=o,u=a),[...t,...u,61,f,...Et(l)]}i64_store8(t,n,o,a){let l,f,u;return Array.isArray(n)?(l=0,f=0,u=n):Array.isArray(o)?(l=n,f=0,u=o):Array.isArray(a)&&(l=n,f=o,u=a),[...t,...u,60,f,...Et(l)]}i32_load8_s(t,n,o){const a=n||0,l=o===void 0?0:o;return[...t,44,l,...Et(a)]}i32_load8_u(t,n,o){const a=n||0,l=o===void 0?0:o;return[...t,45,l,...Et(a)]}i32_load16_s(t,n,o){const a=n||0,l=o===void 0?1:o;return[...t,46,l,...Et(a)]}i32_load16_u(t,n,o){const a=n||0,l=o===void 0?1:o;return[...t,47,l,...Et(a)]}i32_load(t,n,o){const a=n||0,l=o===void 0?2:o;return[...t,40,l,...Et(a)]}i32_store(t,n,o,a){let l,f,u;return Array.isArray(n)?(l=0,f=2,u=n):Array.isArray(o)?(l=n,f=2,u=o):Array.isArray(a)&&(l=n,f=o,u=a),[...t,...u,54,f,...Et(l)]}i32_store16(t,n,o,a){let l,f,u;return Array.isArray(n)?(l=0,f=1,u=n):Array.isArray(o)?(l=n,f=1,u=o):Array.isArray(a)&&(l=n,f=o,u=a),[...t,...u,59,f,...Et(l)]}i32_store8(t,n,o,a){let l,f,u;return Array.isArray(n)?(l=0,f=0,u=n):Array.isArray(o)?(l=n,f=0,u=o):Array.isArray(a)&&(l=n,f=o,u=a),[...t,...u,58,f,...Et(l)]}call(t,...n){const o=this.module.functionIdxByName[t];if(o===void 0)throw new Error(`Function not defined: Function: ${t}`);return[...[].concat(...n),16,...Et(o)]}call_indirect(t,...n){return[...[].concat(...n),...t,17,0,0]}if(t,n,o){return o?[...t,4,64,...n,5,...o,11]:[...t,4,64,...n,11]}block(t){return[2,64,...t,11]}loop(...t){return[3,64,...[].concat(...t),11]}br_if(t,n){return[...n,13,...Et(t)]}br(t){return[12,...Et(t)]}ret(t){return[...t,15]}drop(t){return[...t,26]}i64_const(t){return[66,...hc(t)]}i32_const(t){return[65,...xo(t)]}i64_eqz(t){return[...t,80]}i64_eq(t,n){return[...t,...n,81]}i64_ne(t,n){return[...t,...n,82]}i64_lt_s(t,n){return[...t,...n,83]}i64_lt_u(t,n){return[...t,...n,84]}i64_gt_s(t,n){return[...t,...n,85]}i64_gt_u(t,n){return[...t,...n,86]}i64_le_s(t,n){return[...t,...n,87]}i64_le_u(t,n){return[...t,...n,88]}i64_ge_s(t,n){return[...t,...n,89]}i64_ge_u(t,n){return[...t,...n,90]}i64_add(t,n){return[...t,...n,124]}i64_sub(t,n){return[...t,...n,125]}i64_mul(t,n){return[...t,...n,126]}i64_div_s(t,n){return[...t,...n,127]}i64_div_u(t,n){return[...t,...n,128]}i64_rem_s(t,n){return[...t,...n,129]}i64_rem_u(t,n){return[...t,...n,130]}i64_and(t,n){return[...t,...n,131]}i64_or(t,n){return[...t,...n,132]}i64_xor(t,n){return[...t,...n,133]}i64_shl(t,n){return[...t,...n,134]}i64_shr_s(t,n){return[...t,...n,135]}i64_shr_u(t,n){return[...t,...n,136]}i64_extend_i32_s(t){return[...t,172]}i64_extend_i32_u(t){return[...t,173]}i64_clz(t){return[...t,121]}i64_ctz(t){return[...t,122]}i32_eqz(t){return[...t,69]}i32_eq(t,n){return[...t,...n,70]}i32_ne(t,n){return[...t,...n,71]}i32_lt_s(t,n){return[...t,...n,72]}i32_lt_u(t,n){return[...t,...n,73]}i32_gt_s(t,n){return[...t,...n,74]}i32_gt_u(t,n){return[...t,...n,75]}i32_le_s(t,n){return[...t,...n,76]}i32_le_u(t,n){return[...t,...n,77]}i32_ge_s(t,n){return[...t,...n,78]}i32_ge_u(t,n){return[...t,...n,79]}i32_add(t,n){return[...t,...n,106]}i32_sub(t,n){return[...t,...n,107]}i32_mul(t,n){return[...t,...n,108]}i32_div_s(t,n){return[...t,...n,109]}i32_div_u(t,n){return[...t,...n,110]}i32_rem_s(t,n){return[...t,...n,111]}i32_rem_u(t,n){return[...t,...n,112]}i32_and(t,n){return[...t,...n,113]}i32_or(t,n){return[...t,...n,114]}i32_xor(t,n){return[...t,...n,115]}i32_shl(t,n){return[...t,...n,116]}i32_shr_s(t,n){return[...t,...n,117]}i32_shr_u(t,n){return[...t,...n,118]}i32_rotl(t,n){return[...t,...n,119]}i32_rotr(t,n){return[...t,...n,120]}i32_wrap_i64(t){return[...t,167]}i32_clz(t){return[...t,103]}i32_ctz(t){return[...t,104]}unreachable(){return[0]}current_memory(){return[63,0]}comment(){return[]}}const Oo={i32:127,i64:126,f32:125,f64:124,anyfunc:112,func:96,emptyblock:64};class Va{constructor(t,n,o,a,l){if(o=="import")this.fnType="import",this.moduleName=a,this.fieldName=l;else if(o=="internal")this.fnType="internal";else throw new Error("Invalid function fnType: "+o);this.module=t,this.fnName=n,this.params=[],this.locals=[],this.localIdxByName={},this.code=[],this.returnType=null,this.nextLocal=0}addParam(t,n){if(this.localIdxByName[t])throw new Error(`param already exists. Function: ${this.fnName}, Param: ${t} `);const o=this.nextLocal++;this.localIdxByName[t]=o,this.params.push({type:n})}addLocal(t,n,o){const a=o||1;if(this.localIdxByName[t])throw new Error(`local already exists. Function: ${this.fnName}, Param: ${t} `);const l=this.nextLocal++;this.localIdxByName[t]=l,this.locals.push({type:n,length:a})}setReturnType(t){if(this.returnType)throw new Error(`returnType already defined. Function: ${this.fnName}`);this.returnType=t}getSignature(){const t=[...Et(this.params.length),...this.params.map(o=>Oo[o.type])],n=this.returnType?[1,Oo[this.returnType]]:[0];return[96,...t,...n]}getBody(){const t=this.locals.map(o=>[...Et(o.length),Oo[o.type]]),n=[...Et(this.locals.length),...[].concat(...t),...this.code,11];return[...Et(n.length),...n]}addCode(...t){this.code.push(...[].concat(...t))}getCodeBuilder(){return new fc(this)}}class ja{constructor(){this.functions=[],this.functionIdxByName={},this.nImportFunctions=0,this.nInternalFunctions=0,this.memory={pagesSize:1,moduleName:"env",fieldName:"memory"},this.free=8,this.datas=[],this.modules={},this.exports=[],this.functionsTable=[]}build(){return this._setSignatures(),new Uint8Array([...vo(1836278016),...vo(1),...this._buildType(),...this._buildImport(),...this._buildFunctionDeclarations(),...this._buildFunctionsTable(),...this._buildExports(),...this._buildElements(),...this._buildCode(),...this._buildData()])}addFunction(t){if(typeof this.functionIdxByName[t]<"u")throw new Error(`Function already defined: ${t}`);const n=this.functions.length;return this.functionIdxByName[t]=n,this.functions.push(new Va(this,t,"internal")),this.nInternalFunctions++,this.functions[n]}addIimportFunction(t,n,o){if(typeof this.functionIdxByName[t]<"u")throw new Error(`Function already defined: ${t}`);if(this.functions.length>0&&this.functions[this.functions.length-1].type=="internal")throw new Error(`Import functions must be declared before internal: ${t}`);let a=o||t;const l=this.functions.length;return this.functionIdxByName[t]=l,this.functions.push(new Va(this,t,"import",n,a)),this.nImportFunctions++,this.functions[l]}setMemory(t,n,o){this.memory={pagesSize:t,moduleName:n||"env",fieldName:o||"memory"}}exportFunction(t,n){const o=n||t;if(typeof this.functionIdxByName[t]>"u")throw new Error(`Function not defined: ${t}`);const a=this.functionIdxByName[t];o!=t&&(this.functionIdxByName[o]=a),this.exports.push({exportName:o,idx:a})}addFunctionToTable(t){const n=this.functionIdxByName[t];this.functionsTable.push(n)}addData(t,n){this.datas.push({offset:t,bytes:n})}alloc(t,n){let o,a;(Array.isArray(t)||ArrayBuffer.isView(t))&&typeof n>"u"?(o=t.length,a=t):(o=t,a=n),o=(o-1>>3)+1<<3;const l=this.free;return this.free+=o,a&&this.addData(l,a),l}allocString(t){const o=new globalThis.TextEncoder().encode(t);return this.alloc([...o,0])}_setSignatures(){this.signatures=[];const t={};if(this.functionsTable.length>0){const n=this.functions[this.functionsTable[0]].getSignature(),o="s_"+Ha(n);t[o]=0,this.signatures.push(n)}for(let n=0;n<this.functions.length;n++){const o=this.functions[n].getSignature(),a="s_"+Ha(o);typeof t[a]>"u"&&(t[a]=this.signatures.length,this.signatures.push(o)),this.functions[n].signatureIdx=t[a]}}_buildSection(t,n){return[t,...Et(n.length),...n]}_buildType(){return this._buildSection(1,[...Et(this.signatures.length),...[].concat(...this.signatures)])}_buildImport(){const t=[];t.push([...Gn(this.memory.moduleName),...Gn(this.memory.fieldName),2,0,...Et(this.memory.pagesSize)]);for(let n=0;n<this.nImportFunctions;n++)t.push([...Gn(this.functions[n].moduleName),...Gn(this.functions[n].fieldName),0,...Et(this.functions[n].signatureIdx)]);return this._buildSection(2,Et(t.length).concat(...t))}_buildFunctionDeclarations(){const t=[];for(let n=this.nImportFunctions;n<this.nImportFunctions+this.nInternalFunctions;n++)t.push(...Et(this.functions[n].signatureIdx));return this._buildSection(3,[...Et(t.length),...t])}_buildFunctionsTable(){return this.functionsTable.length==0?[]:this._buildSection(4,[...Et(1),112,0,...Et(this.functionsTable.length)])}_buildElements(){if(this.functionsTable.length==0)return[];const t=[];for(let n=0;n<this.functionsTable.length;n++)t.push(...Et(this.functionsTable[n]));return this._buildSection(9,[...Et(1),...Et(0),65,...xo(0),11,...Et(this.functionsTable.length),...t])}_buildExports(){const t=[];for(let n=0;n<this.exports.length;n++)t.push([...Gn(this.exports[n].exportName),0,...Et(this.exports[n].idx)]);return this._buildSection(7,Et(t.length).concat(...t))}_buildCode(){const t=[];for(let n=this.nImportFunctions;n<this.nImportFunctions+this.nInternalFunctions;n++)t.push(this.functions[n].getBody());return this._buildSection(10,Et(t.length).concat(...t))}_buildData(){const t=[];t.push([0,65,0,11,4,...vo(this.free)]);for(let n=0;n<this.datas.length;n++)t.push([0,65,...xo(this.datas[n].offset),11,...Et(this.datas[n].bytes.length),...this.datas[n].bytes]);return this._buildSection(11,Et(t.length).concat(...t))}}globalThis.curve_bn128=null;async function $a(c,t){if(!c&&globalThis.curve_bn128)return globalThis.curve_bn128;const n=new ja;n.setMemory(25),Je(n);const o={};o.code=n.build(),o.pq=n.modules.f1m.pq,o.pr=n.modules.frm.pq,o.pG1gen=n.modules.bn128.pG1gen,o.pG1zero=n.modules.bn128.pG1zero,o.pG1b=n.modules.bn128.pG1b,o.pG2gen=n.modules.bn128.pG2gen,o.pG2zero=n.modules.bn128.pG2zero,o.pG2b=n.modules.bn128.pG2b,o.pOneT=n.modules.bn128.pOneT,o.prePSize=n.modules.bn128.prePSize,o.preQSize=n.modules.bn128.preQSize,o.n8q=32,o.n8r=32,o.q=n.modules.bn128.q,o.r=n.modules.bn128.r;const a={name:"bn128",wasm:o,q:Ut("21888242871839275222246405745257275088696311157297823662689037894645226208583"),r:Ut("21888242871839275222246405745257275088548364400416034343698204186575808495617"),n8q:32,n8r:32,cofactorG2:Ut("30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d",16),singleThread:!!c},l=await Ga(a);return l.terminate=async function(){a.singleThread||(globalThis.curve_bn128=null,await this.tm.terminate())},c||(globalThis.curve_bn128=l),l}globalThis.curve_bls12381=null;async function Ya(c,t){if(!c&&globalThis.curve_bls12381)return globalThis.curve_bls12381;const n=new ja;n.setMemory(25),Xe(n);const o={};o.code=n.build(),o.pq=n.modules.f1m.pq,o.pr=n.modules.frm.pq,o.pG1gen=n.modules.bls12381.pG1gen,o.pG1zero=n.modules.bls12381.pG1zero,o.pG1b=n.modules.bls12381.pG1b,o.pG2gen=n.modules.bls12381.pG2gen,o.pG2zero=n.modules.bls12381.pG2zero,o.pG2b=n.modules.bls12381.pG2b,o.pOneT=n.modules.bls12381.pOneT,o.prePSize=n.modules.bls12381.prePSize,o.preQSize=n.modules.bls12381.preQSize,o.n8q=48,o.n8r=32,o.q=n.modules.bls12381.q,o.r=n.modules.bls12381.r;const a={name:"bls12381",wasm:o,q:Ut("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),r:Ut("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),n8q:48,n8r:32,cofactorG1:Ut("0x396c8c005555e1568c00aaab0000aaab",16),cofactorG2:Ut("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5",16),singleThread:!!c},l=await Ga(a);return l.terminate=async function(){a.singleThread||(globalThis.curve_bls12381=null,await this.tm.terminate())},c||(globalThis.curve_bls12381=l),l}Ut("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),Ut("21888242871839275222246405745257275088548364400416034343698204186575808495617"),Ut("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),Ut("21888242871839275222246405745257275088696311157297823662689037894645226208583");const Pt=Wi,Rn=ic;var Za={};async function Wa(c,t,n,o){if(n=n||262144,typeof t!="number"&&["w+","wx+","r","ax+","a+"].indexOf(t)<0)throw new Error("Invalid open option");const a=await Za.promises.open(c,t),l=await a.stat();return new Lc(a,l,n,o,c)}class Lc{constructor(t,n,o,a,l){for(this.fileName=l,this.fd=t,this.pos=0,this.pageSize=a||256;this.pageSize<n.blksize;)this.pageSize*=2;this.totalSize=n.size,this.totalPages=Math.floor((n.size-1)/this.pageSize)+1,this.maxPagesLoaded=Math.floor(o/this.pageSize)+1,this.pages={},this.pendingLoads=[],this.writing=!1,this.reading=!1,this.avBuffs=[],this.history={}}_loadPage(t){const n=this,o=new Promise((a,l)=>{n.pendingLoads.push({page:t,resolve:a,reject:l})});return n.__statusPage("After Load request: ",t),o}__statusPage(t,n){const o=[],a=this;if(!a.logHistory)return;o.push("=="+t+" "+n);let l="";for(let f=0;f<a.pendingLoads.length;f++)a.pendingLoads[f].page==n&&(l=l+" "+f);if(l&&o.push("Pending loads:"+l),typeof a.pages[n]<"u"){const f=a.pages[n];o.push("Loaded"),o.push("pendingOps: "+f.pendingOps),f.loading&&o.push("loading: "+f.loading),f.writing&&o.push("writing"),f.dirty&&o.push("dirty")}o.push("=="),a.history[n]||(a.history[n]=[]),a.history[n].push(o)}__printHistory(t){}_triggerLoad(){const t=this;if(t.reading||t.pendingLoads.length==0)return;const n=Object.keys(t.pages),o=[];for(let u=0;u<n.length;u++){const y=t.pages[parseInt(n[u])];y.dirty==!1&&y.pendingOps==0&&!y.writing&&!y.loading&&o.push(parseInt(n[u]))}let a=t.maxPagesLoaded-n.length;const l=[];for(;t.pendingLoads.length>0&&(typeof t.pages[t.pendingLoads[0].page]<"u"||a>0||o.length>0);){const u=t.pendingLoads.shift();if(typeof t.pages[u.page]<"u"){t.pages[u.page].pendingOps++;const y=o.indexOf(u.page);y>=0&&o.splice(y,1),t.pages[u.page].loading?t.pages[u.page].loading.push(u):u.resolve(),t.__statusPage("After Load (cached): ",u.page)}else{if(a)a--;else{const y=o.shift();t.__statusPage("Before Unload: ",y),t.avBuffs.unshift(t.pages[y]),delete t.pages[y],t.__statusPage("After Unload: ",y)}u.page>=t.totalPages?(t.pages[u.page]=f(),u.resolve(),t.__statusPage("After Load (new): ",u.page)):(t.reading=!0,t.pages[u.page]=f(),t.pages[u.page].loading=[u],l.push(t.fd.read(t.pages[u.page].buff,0,t.pageSize,u.page*t.pageSize).then(y=>{t.pages[u.page].size=y.bytesRead;const g=t.pages[u.page].loading;delete t.pages[u.page].loading;for(let s=0;s<g.length;s++)g[s].resolve();return t.__statusPage("After Load (loaded): ",u.page),y},y=>{u.reject(y)})),t.__statusPage("After Load (loading): ",u.page))}}Promise.all(l).then(()=>{t.reading=!1,t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t)),t._tryClose()});function f(){if(t.avBuffs.length>0){const u=t.avBuffs.shift();return u.dirty=!1,u.pendingOps=1,u.size=0,u}else return{dirty:!1,buff:new Uint8Array(t.pageSize),pendingOps:1,size:0}}}_triggerWrite(){const t=this;if(t.writing)return;const n=Object.keys(t.pages),o=[];for(let a=0;a<n.length;a++){const l=t.pages[parseInt(n[a])];l.dirty&&(l.dirty=!1,l.writing=!0,t.writing=!0,o.push(t.fd.write(l.buff,0,l.size,parseInt(n[a])*t.pageSize).then(()=>{l.writing=!1},f=>{t.error=f,t._tryClose()})))}t.writing&&Promise.all(o).then(()=>{t.writing=!1,setImmediate(t._triggerWrite.bind(t)),t._tryClose(),t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t))})}_getDirtyPage(){for(let t in this.pages)if(this.pages[t].dirty)return t;return-1}async write(t,n){if(t.byteLength==0)return;const o=this;if(typeof n>"u"&&(n=o.pos),o.pos=n+t.byteLength,o.totalSize<n+t.byteLength&&(o.totalSize=n+t.byteLength),o.pendingClose)throw new Error("Writing a closing file");const a=Math.floor(n/o.pageSize),l=Math.floor((n+t.byteLength-1)/o.pageSize),f=[];for(let s=a;s<=l;s++)f.push(o._loadPage(s));o._triggerLoad();let u=a,y=n%o.pageSize,g=t.byteLength;for(;g>0;){await f[u-a];const s=y+g>o.pageSize?o.pageSize-y:g,E=t.slice(t.byteLength-g,t.byteLength-g+s);new Uint8Array(o.pages[u].buff.buffer,y,s).set(E),o.pages[u].dirty=!0,o.pages[u].pendingOps--,o.pages[u].size=Math.max(y+s,o.pages[u].size),u>=o.totalPages&&(o.totalPages=u+1),g=g-s,u++,y=0,o.writing||setImmediate(o._triggerWrite.bind(o))}}async read(t,n){const o=this;let a=new Uint8Array(t);return await o.readToBuffer(a,0,t,n),a}async readToBuffer(t,n,o,a){if(o==0)return;const l=this;if(o>l.pageSize*l.maxPagesLoaded*.8){const F=Math.floor(o*1.1);this.maxPagesLoaded=Math.floor(F/l.pageSize)+1}if(typeof a>"u"&&(a=l.pos),l.pos=a+o,l.pendingClose)throw new Error("Reading a closing file");const f=Math.floor(a/l.pageSize),u=Math.floor((a+o-1)/l.pageSize),y=[];for(let F=f;F<=u;F++)y.push(l._loadPage(F));l._triggerLoad();let g=f,s=a%l.pageSize,E=a+o>l.totalSize?o-(a+o-l.totalSize):o;for(;E>0;){await y[g-f],l.__statusPage("After Await (read): ",g);const F=s+E>l.pageSize?l.pageSize-s:E,A=new Uint8Array(l.pages[g].buff.buffer,l.pages[g].buff.byteOffset+s,F);t.set(A,n+o-E),l.pages[g].pendingOps--,l.__statusPage("After Op done: ",g),E=E-F,g++,s=0,l.pendingLoads.length>0&&setImmediate(l._triggerLoad.bind(l))}this.pos=a+o}_tryClose(){const t=this;!t.pendingClose||(t.error&&t.pendingCloseReject(t.error),t._getDirtyPage()>=0||t.writing||t.reading||t.pendingLoads.length>0)||t.pendingClose()}close(){const t=this;if(t.pendingClose)throw new Error("Closing the file twice");return new Promise((n,o)=>{t.pendingClose=n,t.pendingCloseReject=o,t._tryClose()}).then(()=>{t.fd.close()},n=>{throw t.fd.close(),n})}async discard(){await this.close(),await Za.promises.unlink(this.fileName)}async writeULE32(t,n){const o=this,a=new Uint8Array(4);new DataView(a.buffer).setUint32(0,t,!0),await o.write(a,n)}async writeUBE32(t,n){const o=this,a=new Uint8Array(4);new DataView(a.buffer).setUint32(0,t,!1),await o.write(a,n)}async writeULE64(t,n){const o=this,a=new Uint8Array(8),l=new DataView(a.buffer);l.setUint32(0,t&4294967295,!0),l.setUint32(4,Math.floor(t/4294967296),!0),await o.write(a,n)}async readULE32(t){const o=await this.read(4,t);return new Uint32Array(o.buffer)[0]}async readUBE32(t){const o=await this.read(4,t);return new DataView(o.buffer).getUint32(0,!1)}async readULE64(t){const o=await this.read(8,t),a=new Uint32Array(o.buffer);return a[1]*4294967296+a[0]}async readString(t){const n=this;if(n.pendingClose)throw new Error("Reading a closing file");let o=typeof t>"u"?n.pos:t,a=Math.floor(o/n.pageSize),l=!1,f="";for(;!l;){let u=n._loadPage(a);n._triggerLoad(),await u,n.__statusPage("After Await (read): ",a);let y=o%n.pageSize;const g=new Uint8Array(n.pages[a].buff.buffer,n.pages[a].buff.byteOffset+y,n.pageSize-y);let s=g.findIndex(E=>E===0);l=s!==-1,l?(f+=new TextDecoder().decode(g.slice(0,s)),n.pos=a*this.pageSize+y+s+1):(f+=new TextDecoder().decode(g),n.pos=a*this.pageSize+y+g.length),n.pages[a].pendingOps--,n.__statusPage("After Op done: ",a),o=n.pos,a++,n.pendingLoads.length>0&&setImmediate(n._triggerLoad.bind(n))}return f}}function pc(c){const t=c.initialSize||1048576,n=new ni;return n.o=c,n.o.data=new Uint8Array(t),n.allocSize=t,n.totalSize=0,n.readOnly=!1,n.pos=0,n}function Ac(c){const t=new ni;return t.o=c,t.allocSize=c.data.byteLength,t.totalSize=c.data.byteLength,t.readOnly=!0,t.pos=0,t}const Qo=new Uint8Array(4),Ja=new DataView(Qo.buffer),Xa=new Uint8Array(8),ti=new DataView(Xa.buffer);class ni{constructor(){this.pageSize=16384}_resizeIfNeeded(t){if(t>this.allocSize){const n=Math.max(this.allocSize+1048576,Math.floor(this.allocSize*1.1),t),o=new Uint8Array(n);o.set(this.o.data),this.o.data=o,this.allocSize=n}}async write(t,n){if(typeof n>"u"&&(n=this.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(n+t.byteLength),this.o.data.set(t.slice(),n),n+t.byteLength>this.totalSize&&(this.totalSize=n+t.byteLength),this.pos=n+t.byteLength}async readToBuffer(t,n,o,a){if(typeof a>"u"&&(a=this.pos),this.readOnly&&a+o>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(a+o);const f=new Uint8Array(this.o.data.buffer,this.o.data.byteOffset+a,o);t.set(f,n),this.pos=a+o}async read(t,n){const o=this,a=new Uint8Array(t);return await o.readToBuffer(a,0,t,n),a}close(){this.o.data.byteLength!=this.totalSize&&(this.o.data=this.o.data.slice(0,this.totalSize))}async discard(){}async writeULE32(t,n){const o=this;Ja.setUint32(0,t,!0),await o.write(Qo,n)}async writeUBE32(t,n){const o=this;Ja.setUint32(0,t,!1),await o.write(Qo,n)}async writeULE64(t,n){const o=this;ti.setUint32(0,t&4294967295,!0),ti.setUint32(4,Math.floor(t/4294967296),!0),await o.write(Xa,n)}async readULE32(t){const o=await this.read(4,t);return new Uint32Array(o.buffer)[0]}async readUBE32(t){const o=await this.read(4,t);return new DataView(o.buffer).getUint32(0,!1)}async readULE64(t){const o=await this.read(8,t),a=new Uint32Array(o.buffer);return a[1]*4294967296+a[0]}async readString(t){const n=this;let o=typeof t>"u"?n.pos:t;if(o>this.totalSize){if(this.readOnly)throw new Error("Reading out of bounds");this._resizeIfNeeded(t)}const a=new Uint8Array(n.o.data.buffer,o,this.totalSize-o);let l=a.findIndex(y=>y===0),f=l!==-1,u="";return f?(u=new TextDecoder().decode(a.slice(0,l)),n.pos=o+l+1):n.pos=o,u}}const zt=1<<22;function bc(c){const t=c.initialSize||0,n=new ei;n.o=c;const o=t?Math.floor((t-1)/zt)+1:0;n.o.data=[];for(let a=0;a<o-1;a++)n.o.data.push(new Uint8Array(zt));return o&&n.o.data.push(new Uint8Array(t-zt*(o-1))),n.totalSize=0,n.readOnly=!1,n.pos=0,n}function Ic(c){const t=new ei;return t.o=c,t.totalSize=(c.data.length-1)*zt+c.data[c.data.length-1].byteLength,t.readOnly=!0,t.pos=0,t}const Po=new Uint8Array(4),oi=new DataView(Po.buffer),ai=new Uint8Array(8),ii=new DataView(ai.buffer);class ei{constructor(){this.pageSize=16384}_resizeIfNeeded(t){if(t<=this.totalSize)return;if(this.readOnly)throw new Error("Reading out of file bounds");const n=Math.floor((t-1)/zt)+1;for(let o=Math.max(this.o.data.length-1,0);o<n;o++){const a=o<n-1?zt:t-(n-1)*zt,l=new Uint8Array(a);o==this.o.data.length-1&&l.set(this.o.data[o]),this.o.data[o]=l}this.totalSize=t}async write(t,n){const o=this;if(typeof n>"u"&&(n=o.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(n+t.byteLength);let l=Math.floor(n/zt),f=n%zt,u=t.byteLength;for(;u>0;){const y=f+u>zt?zt-f:u,g=t.slice(t.byteLength-u,t.byteLength-u+y);new Uint8Array(o.o.data[l].buffer,f,y).set(g),u=u-y,l++,f=0}this.pos=n+t.byteLength}async readToBuffer(t,n,o,a){const l=this;if(typeof a>"u"&&(a=l.pos),this.readOnly&&a+o>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(a+o);let u=Math.floor(a/zt),y=a%zt,g=o;for(;g>0;){const s=y+g>zt?zt-y:g,E=new Uint8Array(l.o.data[u].buffer,y,s);t.set(E,n+o-g),g=g-s,u++,y=0}this.pos=a+o}async read(t,n){const o=this,a=new Uint8Array(t);return await o.readToBuffer(a,0,t,n),a}close(){}async discard(){}async writeULE32(t,n){const o=this;oi.setUint32(0,t,!0),await o.write(Po,n)}async writeUBE32(t,n){const o=this;oi.setUint32(0,t,!1),await o.write(Po,n)}async writeULE64(t,n){const o=this;ii.setUint32(0,t&4294967295,!0),ii.setUint32(4,Math.floor(t/4294967296),!0),await o.write(ai,n)}async readULE32(t){const o=await this.read(4,t);return new Uint32Array(o.buffer)[0]}async readUBE32(t){const o=await this.read(4,t);return new DataView(o.buffer).getUint32(0,!1)}async readULE64(t){const o=await this.read(8,t),a=new Uint32Array(o.buffer);return a[1]*4294967296+a[0]}async readString(t){const n=this,o=2048;let a=typeof t>"u"?n.pos:t;if(a>this.totalSize){if(this.readOnly)throw new Error("Reading out of bounds");this._resizeIfNeeded(t)}let l=!1,f="";for(;!l;){let u=Math.floor(a/zt),y=a%zt;if(n.o.data[u]===void 0)throw new Error("ERROR");let g=Math.min(o,n.o.data[u].length-y);const s=new Uint8Array(n.o.data[u].buffer,y,g);let E=s.findIndex(F=>F===0);l=E!==-1,l?(f+=new TextDecoder().decode(s.slice(0,E)),n.pos=u*zt+y+E+1):(f+=new TextDecoder().decode(s),n.pos=u*zt+y+s.length),a=n.pos}return f}}const yc=1024,Cc=512,mc=2,wc=0,Bc=65536,Ec=8192;async function ci(c,t,n){if(typeof c=="string"&&(c={type:"file",fileName:c,cacheSize:Bc,pageSize:Ec}),c.type=="file")return await Wa(c.fileName,yc|Cc|mc,c.cacheSize,c.pageSize);if(c.type=="mem")return pc(c);if(c.type=="bigMem")return bc(c);throw new Error("Invalid FastFile type: "+c.type)}async function si(c,t,n){if(c instanceof Uint8Array&&(c={type:"mem",data:c}),typeof c=="string"&&(c={type:"mem",data:await fetch(c).then(function(a){return a.arrayBuffer()}).then(function(a){return new Uint8Array(a)})}),c.type=="file")return await Wa(c.fileName,wc,c.cacheSize,c.pageSize);if(c.type=="mem")return await Ac(c);if(c.type=="bigMem")return await Ic(c);throw new Error("Invalid FastFile type: "+c.type)}async function li(c,t,n,o,a){const l=await si(c),f=await l.read(4);let u="";for(let E=0;E<4;E++)u+=String.fromCharCode(f[E]);if(u!=t)throw new Error(c+": Invalid File format");if(await l.readULE32()>n)throw new Error("Version not supported");const g=await l.readULE32();let s=[];for(let E=0;E<g;E++){let F=await l.readULE32(),A=await l.readULE64();typeof s[F]>"u"&&(s[F]=[]),s[F].push({p:l.pos,size:A}),l.pos+=A}return{fd:l,sections:s}}async function Fc(c,t,n,o,a,l){const f=await ci(c),u=new Uint8Array(4);for(let y=0;y<4;y++)u[y]=t.charCodeAt(y);return await f.write(u,0),await f.writeULE32(n),await f.writeULE32(o),f}async function ri(c,t){if(typeof c.writingSection<"u")throw new Error("Already writing a section");await c.writeULE32(t),c.writingSection={pSectionSize:c.pos},await c.writeULE64(0)}async function di(c){if(typeof c.writingSection>"u")throw new Error("Not writing a section");const t=c.pos-c.writingSection.pSectionSize-8,n=c.pos;c.pos=c.writingSection.pSectionSize,await c.writeULE64(t),c.pos=n,delete c.writingSection}async function Nn(c,t,n){if(typeof c.readingSection<"u")throw new Error("Already reading a section");if(!t[n])throw new Error(c.fileName+": Missing section "+n);if(t[n].length>1)throw new Error(c.fileName+": Section Duplicated "+n);c.pos=t[n][0].p,c.readingSection=t[n][0]}async function Kn(c,t){if(typeof c.readingSection>"u")throw new Error("Not reading a section");if(c.pos-c.readingSection.p!=c.readingSection.size)throw new Error("Invalid section size reading");delete c.readingSection}async function Sc(c,t,n,o){const a=new Uint8Array(n);Pt.toRprLE(a,0,t,n),await c.write(a,o)}async function An(c,t,n){const o=await c.read(t,n);return Pt.fromRprLE(o,0,t)}async function bn(c,t,n,o,a){if(o=typeof o>"u"?0:o,a=typeof a>"u"?t[n][0].size-o:a,o+a>t[n][0].size)throw new Error("Reading out of the range of the section");let l;return a<1073741824?l=new Uint8Array(a):l=new Qt(a),await c.readToBuffer(l,0,a,t[n][0].p+o),l}Pt.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),Pt.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");const vc=Pt.e("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),xc=Pt.e("21888242871839275222246405745257275088696311157297823662689037894645226208583");async function Mo(c,t){let n,o=t&&t.singleThread;if(Pt.eq(c,xc))n=await $a(o);else if(Pt.eq(c,vc))n=await Ya(o);else throw new Error(`Curve not supported: ${Pt.toString(c)}`);return n}async function Oc(c,t){let n,o=t&&t.singleThread;const a=l(c);if(["BN128","BN254","ALTBN128"].indexOf(a)>=0)n=await $a(o);else if(["BLS12381"].indexOf(a)>=0)n=await Ya(o);else throw new Error(`Curve not supported: ${c}`);return n;function l(f){return f.toUpperCase().match(/[A-Za-z0-9]+/g).join("")}}var Qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},an={exports:{}},Pc=gi;class _i extends Error{}_i.prototype.name="AssertionError";function gi(c,t){if(!c){var n=new _i(t);throw Error.captureStackTrace&&Error.captureStackTrace(n,gi),n}}var qo={exports:{}};function ui(c){return c.length}function Mc(c){const t=c.byteLength;let n="";for(let o=0;o<t;o++)n+=String.fromCharCode(c[o]);return n}function qc(c,t,n=0,o=ui(t)){const a=Math.min(o,c.byteLength-n);for(let l=0;l<a;l++)c[n+l]=t.charCodeAt(l);return a}var Uc={byteLength:ui,toString:Mc,write:qc};const Fn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",In=new Uint8Array(256);for(let c=0;c<Fn.length;c++)In[Fn.charCodeAt(c)]=c;In[45]=62,In[95]=63;function hi(c){let t=c.length;return c.charCodeAt(t-1)===61&&t--,t>1&&c.charCodeAt(t-1)===61&&t--,t*3>>>2}function zc(c){const t=c.byteLength;let n="";for(let o=0;o<t;o+=3)n+=Fn[c[o]>>2]+Fn[(c[o]&3)<<4|c[o+1]>>4]+Fn[(c[o+1]&15)<<2|c[o+2]>>6]+Fn[c[o+2]&63];return t%3===2?n=n.substring(0,n.length-1)+"=":t%3===1&&(n=n.substring(0,n.length-2)+"=="),n}function Dc(c,t,n=0,o=hi(t)){const a=Math.min(o,c.byteLength-n);for(let l=0,f=0;f<a;l+=4){const u=In[t.charCodeAt(l)],y=In[t.charCodeAt(l+1)],g=In[t.charCodeAt(l+2)],s=In[t.charCodeAt(l+3)];c[f++]=u<<2|y>>4,c[f++]=(y&15)<<4|g>>2,c[f++]=(g&3)<<6|s&63}return a}var kc={byteLength:hi,toString:zc,write:Dc};function fi(c){return c.length>>>1}function Tc(c){const t=c.byteLength;c=new DataView(c.buffer,c.byteOffset,t);let n="",o=0;for(let a=t-t%4;o<a;o+=4)n+=c.getUint32(o).toString(16).padStart(8,"0");for(;o<t;o++)n+=c.getUint8(o).toString(16).padStart(2,"0");return n}function Gc(c,t,n=0,o=fi(t)){const a=Math.min(o,c.byteLength-n);for(let l=0;l<a;l++){const f=Li(t.charCodeAt(l*2)),u=Li(t.charCodeAt(l*2+1));if(f===void 0||u===void 0)return c.subarray(0,l);c[n+l]=f<<4|u}return a}var Rc={byteLength:fi,toString:Tc,write:Gc};function Li(c){if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-65+10;if(c>=97&&c<=102)return c-97+10}function Uo(c){let t=0;for(let n=0,o=c.length;n<o;n++){const a=c.charCodeAt(n);if(a>=55296&&a<=56319&&n+1<o){const l=c.charCodeAt(n+1);if(l>=56320&&l<=57343){t+=4,n++;continue}}a<=127?t+=1:a<=2047?t+=2:t+=3}return t}let zo;if(typeof TextDecoder<"u"){const c=new TextDecoder;zo=function(n){return c.decode(n)}}else zo=function(t){const n=t.byteLength;let o="",a=0;for(;a<n;){let l=t[a];if(l<=127){o+=String.fromCharCode(l),a++;continue}let f=0,u=0;if(l<=223?(f=1,u=l&31):l<=239?(f=2,u=l&15):l<=244&&(f=3,u=l&7),n-a-f>0){let y=0;for(;y<f;)l=t[a+y+1],u=u<<6|l&63,y+=1}else u=65533,f=n-a;o+=String.fromCodePoint(u),a+=f+1}return o};let Do;if(typeof TextEncoder<"u"){const c=new TextEncoder;Do=function(n,o,a=0,l=Uo(o)){const f=Math.min(l,n.byteLength-a);return c.encodeInto(o,n.subarray(a,a+f)),f}}else Do=function(t,n,o=0,a=Uo(n)){const l=Math.min(a,t.byteLength-o);t=t.subarray(o,o+l);let f=0,u=0;for(;f<n.length;){const y=n.codePointAt(f);if(y<=127){t[u++]=y,f++;continue}let g=0,s=0;for(y<=2047?(g=6,s=192):y<=65535?(g=12,s=224):y<=2097151&&(g=18,s=240),t[u++]=s|y>>g,g-=6;g>=0;)t[u++]=128|y>>g&63,g-=6;f+=y>=65536?2:1}return l};var Nc={byteLength:Uo,toString:zo,write:Do};function pi(c){return c.length*2}function Kc(c){const t=c.byteLength;let n="";for(let o=0;o<t-1;o+=2)n+=String.fromCharCode(c[o]+c[o+1]*256);return n}function Hc(c,t,n=0,o=pi(t)){const a=Math.min(o,c.byteLength-n);let l=a;for(let f=0;f<t.length&&!((l-=2)<0);++f){const u=t.charCodeAt(f),y=u>>8,g=u%256;c[n+f*2]=g,c[n+f*2+1]=y}return a}var Vc={byteLength:pi,toString:Kc,write:Hc};(function(c,t){const n=Uc,o=kc,a=Rc,l=Nc,f=Vc,u=new Uint8Array(Uint16Array.of(255).buffer)[0]===255;function y(e){switch(e){case"ascii":return n;case"base64":return o;case"hex":return a;case"utf8":case"utf-8":case void 0:return l;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f;default:throw new Error(`Unknown encoding: ${e}`)}}function g(e){return e instanceof Uint8Array}function s(e){try{return y(e),!0}catch{return!1}}function E(e,m,I){const h=new Uint8Array(e);return m!==void 0&&t.fill(h,m,0,h.byteLength,I),h}function F(e){return new Uint8Array(e)}function A(e){return new Uint8Array(e)}function D(e,m){return y(m).byteLength(e)}function k(e,m){if(e===m)return 0;const I=Math.min(e.byteLength,m.byteLength);e=new DataView(e.buffer,e.byteOffset,e.byteLength),m=new DataView(m.buffer,m.byteOffset,m.byteLength);let h=0;for(let v=I-I%4;h<v;h+=4){const J=e.getUint32(h,u),R=m.getUint32(h,u);if(J!==R)break}for(;h<I;h++){const v=e.getUint8(h),J=m.getUint8(h);if(v<J)return-1;if(v>J)return 1}return e.byteLength>m.byteLength?1:e.byteLength<m.byteLength?-1:0}function B(e,m){m===void 0&&(m=e.reduce((v,J)=>v+J.byteLength,0));const I=new Uint8Array(m);let h=0;for(const v of e){if(h+v.byteLength>I.byteLength){const J=v.subarray(0,I.byteLength-h);return I.set(J,h),I}I.set(v,h),h+=v.byteLength}return I}function G(e,m,I=0,h=0,v=e.byteLength){if(v>0&&v<h||v===h||e.byteLength===0||m.byteLength===0)return 0;if(I<0)throw new RangeError("targetStart is out of range");if(h<0||h>=e.byteLength)throw new RangeError("sourceStart is out of range");if(v<0)throw new RangeError("sourceEnd is out of range");I>=m.byteLength&&(I=m.byteLength),v>e.byteLength&&(v=e.byteLength),m.byteLength-I<v-h&&(v=m.length-I+h);const J=v-h;return e===m?m.copyWithin(I,h,v):m.set(e.subarray(h,v),I),J}function S(e,m){if(e===m)return!0;if(e.byteLength!==m.byteLength)return!1;const I=e.byteLength;e=new DataView(e.buffer,e.byteOffset,e.byteLength),m=new DataView(m.buffer,m.byteOffset,m.byteLength);let h=0;for(let v=I-I%4;h<v;h+=4)if(e.getUint32(h,u)!==m.getUint32(h,u))return!1;for(;h<I;h++)if(e.getUint8(h)!==m.getUint8(h))return!1;return!0}function st(e,m,I,h,v){if(typeof m=="string"?typeof I=="string"?(v=I,I=0,h=e.byteLength):typeof h=="string"&&(v=h,h=e.byteLength):typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=+m),I<0||e.byteLength<I||e.byteLength<h)throw new RangeError("Out of range index");if(I===void 0&&(I=0),h===void 0&&(h=e.byteLength),h<=I)return e;if(m||(m=0),typeof m=="number")for(let J=I;J<h;++J)e[J]=m;else{m=g(m)?m:U(m,v);const J=m.byteLength;for(let R=0;R<h-I;++R)e[R+I]=m[R%J]}return e}function U(e,m,I){return typeof e=="string"?lt(e,m):Array.isArray(e)?w(e):ArrayBuffer.isView(e)?_(e):p(e,m,I)}function lt(e,m){const I=y(m),h=new Uint8Array(I.byteLength(e));return I.write(h,e,0,h.byteLength),h}function w(e){const m=new Uint8Array(e.length);return m.set(e),m}function _(e){const m=new Uint8Array(e.byteLength);return m.set(e),m}function p(e,m,I){return new Uint8Array(e,m,I)}function V(e,m,I,h){return X(e,m,I,h)!==-1}function $(e,m,I,h,v){if(e.byteLength===0)return-1;if(typeof I=="string"?(h=I,I=0):I===void 0?I=v?0:e.length-1:I<0&&(I+=e.byteLength),I>=e.byteLength){if(v)return-1;I=e.byteLength-1}else if(I<0)if(v)I=0;else return-1;if(typeof m=="string")m=U(m,h);else if(typeof m=="number")return m=m&255,v?e.indexOf(m,I):e.lastIndexOf(m,I);if(m.byteLength===0)return-1;if(v){let J=-1;for(let R=I;R<e.byteLength;R++)if(e[R]===m[J===-1?0:R-J]){if(J===-1&&(J=R),R-J+1===m.byteLength)return J}else J!==-1&&(R-=R-J),J=-1}else{I+m.byteLength>e.byteLength&&(I=e.byteLength-m.byteLength);for(let J=I;J>=0;J--){let R=!0;for(let at=0;at<m.byteLength;at++)if(e[J+at]!==m[at]){R=!1;break}if(R)return J}}return-1}function X(e,m,I,h){return $(e,m,I,h,!0)}function Q(e,m,I,h){return $(e,m,I,h,!1)}function b(e,m,I){const h=e[m];e[m]=e[I],e[I]=h}function x(e){const m=e.byteLength;if(m%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<m;I+=2)b(e,I,I+1);return e}function z(e){const m=e.byteLength;if(m%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<m;I+=4)b(e,I,I+3),b(e,I+1,I+2);return e}function ot(e){const m=e.byteLength;if(m%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<m;I+=8)b(e,I,I+7),b(e,I+1,I+6),b(e,I+2,I+5),b(e,I+3,I+4);return e}function tt(e){return e}function K(e,m,I=0,h=e.byteLength){const v=e.byteLength;return I>=v||h<=I?"":(I<0&&(I=0),h>v&&(h=v),(I!==0||h<v)&&(e=e.subarray(I,h)),y(m).toString(e))}function it(e,m,I,h,v){return I===void 0?v="utf8":h===void 0&&typeof I=="string"?(v=I,I=void 0):v===void 0&&typeof h=="string"&&(v=h,h=void 0),y(v).write(e,m,I,h)}function W(e,m,I){return I===void 0&&(I=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(I,m,!0),I+8}function et(e,m,I){return I===void 0&&(I=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(I,m,!0),I+4}function pt(e,m,I){return I===void 0&&(I=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setUint32(I,m,!0),I+4}function wt(e,m,I){return I===void 0&&(I=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setInt32(I,m,!0),I+4}function ft(e,m){return m===void 0&&(m=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(m,!0)}function L(e,m){return m===void 0&&(m=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(m,!0)}function i(e,m){return m===void 0&&(m=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(m,!0)}function C(e,m){return m===void 0&&(m=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getInt32(m,!0)}c.exports=t={isBuffer:g,isEncoding:s,alloc:E,allocUnsafe:F,allocUnsafeSlow:A,byteLength:D,compare:k,concat:B,copy:G,equals:S,fill:st,from:U,includes:V,indexOf:X,lastIndexOf:Q,swap16:x,swap32:z,swap64:ot,toBuffer:tt,toString:K,write:it,writeDoubleLE:W,writeFloatLE:et,writeUInt32LE:pt,writeInt32LE:wt,readDoubleLE:ft,readFloatLE:L,readUInt32LE:i,readInt32LE:C}})(qo,qo.exports);var ko,Ai;function jc(){if(Ai)return ko;Ai=1;var c=(l,f)=>function(){return f||(0,l[Object.keys(l)[0]])((f={exports:{}}).exports,f),f.exports},t=(()=>{for(var l=new Uint8Array(128),f=0;f<64;f++)l[f<26?f+65:f<52?f+71:f<62?f-4:f*4-205]=f;return u=>{for(var y=u.length,g=new Uint8Array((y-(u[y-1]=="=")-(u[y-2]=="="))*3/4|0),s=0,E=0;s<y;){var F=l[u.charCodeAt(s++)],A=l[u.charCodeAt(s++)],D=l[u.charCodeAt(s++)],k=l[u.charCodeAt(s++)];g[E++]=F<<2|A>>4,g[E++]=A<<4|D>>2,g[E++]=D<<6|k}return g}})(),n=c({"wasm-binary:./blake2b.wat"(l,f){f.exports=t("AGFzbQEAAAABEANgAn9/AGADf39/AGABfwADBQQAAQICBQUBAQroBwdNBQZtZW1vcnkCAAxibGFrZTJiX2luaXQAAA5ibGFrZTJiX3VwZGF0ZQABDWJsYWtlMmJfZmluYWwAAhBibGFrZTJiX2NvbXByZXNzAAMKvz8EwAIAIABCADcDACAAQgA3AwggAEIANwMQIABCADcDGCAAQgA3AyAgAEIANwMoIABCADcDMCAAQgA3AzggAEIANwNAIABCADcDSCAAQgA3A1AgAEIANwNYIABCADcDYCAAQgA3A2ggAEIANwNwIABCADcDeCAAQoiS853/zPmE6gBBACkDAIU3A4ABIABCu86qptjQ67O7f0EIKQMAhTcDiAEgAEKr8NP0r+68tzxBECkDAIU3A5ABIABC8e30+KWn/aelf0EYKQMAhTcDmAEgAELRhZrv+s+Uh9EAQSApAwCFNwOgASAAQp/Y+dnCkdqCm39BKCkDAIU3A6gBIABC6/qG2r+19sEfQTApAwCFNwOwASAAQvnC+JuRo7Pw2wBBOCkDAIU3A7gBIABCADcDwAEgAEIANwPIASAAQgA3A9ABC20BA38gAEHAAWohAyAAQcgBaiEEIAQpAwCnIQUCQANAIAEgAkYNASAFQYABRgRAIAMgAykDACAFrXw3AwBBACEFIAAQAwsgACAFaiABLQAAOgAAIAVBAWohBSABQQFqIQEMAAsLIAQgBa03AwALYQEDfyAAQcABaiEBIABByAFqIQIgASABKQMAIAIpAwB8NwMAIABCfzcD0AEgAikDAKchAwJAA0AgA0GAAUYNASAAIANqQQA6AAAgA0EBaiEDDAALCyACIAOtNwMAIAAQAwuqOwIgfgl/IABBgAFqISEgAEGIAWohIiAAQZABaiEjIABBmAFqISQgAEGgAWohJSAAQagBaiEmIABBsAFqIScgAEG4AWohKCAhKQMAIQEgIikDACECICMpAwAhAyAkKQMAIQQgJSkDACEFICYpAwAhBiAnKQMAIQcgKCkDACEIQoiS853/zPmE6gAhCUK7zqqm2NDrs7t/IQpCq/DT9K/uvLc8IQtC8e30+KWn/aelfyEMQtGFmu/6z5SH0QAhDUKf2PnZwpHagpt/IQ5C6/qG2r+19sEfIQ9C+cL4m5Gjs/DbACEQIAApAwAhESAAKQMIIRIgACkDECETIAApAxghFCAAKQMgIRUgACkDKCEWIAApAzAhFyAAKQM4IRggACkDQCEZIAApA0ghGiAAKQNQIRsgACkDWCEcIAApA2AhHSAAKQNoIR4gACkDcCEfIAApA3ghICANIAApA8ABhSENIA8gACkD0AGFIQ8gASAFIBF8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSASfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgE3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBR8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAVfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgFnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBd8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAYfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgGXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBp8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAbfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgHHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIB18fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAefHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgH3x8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFICB8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAffHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgG3x8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBV8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAZfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgGnx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHICB8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAefHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggF3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBJ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAdfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgEXx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBN8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAcfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGHx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBZ8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAUfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgHHx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBl8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAdfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgEXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBZ8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByATfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggIHx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIB58fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAbfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgH3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBR8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAXfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggGHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBJ8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAafHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFXx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBh8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAafHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgFHx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBJ8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAefHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHXx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBx8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAffHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgE3x8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBd8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAWfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgG3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBV8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCARfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgIHx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBl8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAafHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEXx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBZ8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAYfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgE3x8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBV8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAbfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggIHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIB98fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiASfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgHHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIB18fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAXfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBR8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAefHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgE3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIB18fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAXfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgG3x8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBF8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAcfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggGXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBR8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAVfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBh8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAWfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggIHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIB98fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSASfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgGnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIB18fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAWfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgEnx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGICB8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAffHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBV8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAbfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgEXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBh8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAXfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgFHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBp8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCATfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgGXx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBx8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAefHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgHHx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBh8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAffHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgHXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBJ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAUfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGnx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBZ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiARfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgIHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBV8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAZfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggF3x8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBN8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAbfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgF3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFICB8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAffHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGnx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBx8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAUfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggEXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBl8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAdfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgE3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIB58fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAYfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggEnx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBV8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAbfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBt8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSATfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgGXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBV8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAYfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgF3x8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBJ8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAWfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgIHx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBx8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAafHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgH3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBR8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAdfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgHnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBF8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSARfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBN8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAUfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgFXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBZ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAXfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBl8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAafHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgG3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBx8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAdfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHnx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB98fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAgfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgH3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBt8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAVfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBp8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAgfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggHnx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBd8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiASfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBF8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByATfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBh8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAWfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgISAhKQMAIAEgCYWFNwMAICIgIikDACACIAqFhTcDACAjICMpAwAgAyALhYU3AwAgJCAkKQMAIAQgDIWFNwMAICUgJSkDACAFIA2FhTcDACAmICYpAwAgBiAOhYU3AwAgJyAnKQMAIAcgD4WFNwMAICggKCkDACAIIBCFhTcDAAs=")}}),o=n(),a=WebAssembly.compile(o);return ko=async l=>(await WebAssembly.instantiate(await a,l)).exports,ko}var Yt=Pc,$c=qo.exports,en=null,bi=typeof WebAssembly<"u"&&jc()().then(c=>{en=c}),cn=64,to=[];an.exports=Kt;var Ii=an.exports.BYTES_MIN=16,yi=an.exports.BYTES_MAX=64;an.exports.BYTES=32;var Ci=an.exports.KEYBYTES_MIN=16,mi=an.exports.KEYBYTES_MAX=64;an.exports.KEYBYTES=32;var wi=an.exports.SALTBYTES=16,Bi=an.exports.PERSONALBYTES=16;function Kt(c,t,n,o,a){if(!(this instanceof Kt))return new Kt(c,t,n,o,a);if(!en)throw new Error("WASM not loaded. Wait for Blake2b.ready(cb)");c||(c=32),a!==!0&&(Yt(c>=Ii,"digestLength must be at least "+Ii+", was given "+c),Yt(c<=yi,"digestLength must be at most "+yi+", was given "+c),t!=null&&(Yt(t instanceof Uint8Array,"key must be Uint8Array or Buffer"),Yt(t.length>=Ci,"key must be at least "+Ci+", was given "+t.length),Yt(t.length<=mi,"key must be at least "+mi+", was given "+t.length)),n!=null&&(Yt(n instanceof Uint8Array,"salt must be Uint8Array or Buffer"),Yt(n.length===wi,"salt must be exactly "+wi+", was given "+n.length)),o!=null&&(Yt(o instanceof Uint8Array,"personal must be Uint8Array or Buffer"),Yt(o.length===Bi,"personal must be exactly "+Bi+", was given "+o.length))),to.length||(to.push(cn),cn+=216),this.digestLength=c,this.finalized=!1,this.pointer=to.pop(),this._memory=new Uint8Array(en.memory.buffer),this._memory.fill(0,0,64),this._memory[0]=this.digestLength,this._memory[1]=t?t.length:0,this._memory[2]=1,this._memory[3]=1,n&&this._memory.set(n,32),o&&this._memory.set(o,48),this.pointer+216>this._memory.length&&this._realloc(this.pointer+216),en.blake2b_init(this.pointer,this.digestLength),t&&(this.update(t),this._memory.fill(0,cn,cn+t.length),this._memory[this.pointer+200]=128)}Kt.prototype._realloc=function(c){en.memory.grow(Math.max(0,Math.ceil(Math.abs(c-this._memory.length)/65536))),this._memory=new Uint8Array(en.memory.buffer)},Kt.prototype.update=function(c){return Yt(this.finalized===!1,"Hash instance finalized"),Yt(c instanceof Uint8Array,"input must be Uint8Array or Buffer"),cn+c.length>this._memory.length&&this._realloc(cn+c.length),this._memory.set(c,cn),en.blake2b_update(this.pointer,cn,cn+c.length),this},Kt.prototype.digest=function(c){if(Yt(this.finalized===!1,"Hash instance finalized"),this.finalized=!0,to.push(this.pointer),en.blake2b_final(this.pointer),!c||c==="binary")return this._memory.slice(this.pointer+128,this.pointer+128+this.digestLength);if(typeof c=="string")return $c.toString(this._memory,c,this.pointer+128,this.pointer+128+this.digestLength);Yt(c instanceof Uint8Array&&c.length>=this.digestLength,"input must be Uint8Array or Buffer");for(var t=0;t<this.digestLength;t++)c[t]=this._memory[this.pointer+128+t];return c},Kt.prototype.final=Kt.prototype.digest,Kt.WASM=en,Kt.SUPPORTED=typeof WebAssembly<"u",Kt.ready=function(c){return c||(c=Yc),bi?bi.then(()=>c(),c):c(new Error("WebAssembly not supported"))},Kt.prototype.ready=Kt.ready,Kt.prototype.getPartialHash=function(){return this._memory.slice(this.pointer,this.pointer+216)},Kt.prototype.setPartialHash=function(c){this._memory.set(c,this.pointer)};function Yc(){}function no(c){return((c&4294901760)!==0?(c&=4294901760,16):0)|((c&4278255360)!==0?(c&=4278255360,8):0)|((c&4042322160)!==0?(c&=4042322160,4):0)|((c&3435973836)!==0?(c&=3435973836,2):0)|(c&2863311530)!==0}const Zc=1,Wc=2,Ei=10,Jc=2;async function Wt(c,t,n){const o=await c.read(t.G1.F.n8*2),a=t.G1.fromRprLEM(o,0);return n?t.G1.toObject(a):a}async function Hn(c,t,n){const o=await c.read(t.G2.F.n8*2),a=t.G2.fromRprLEM(o,0);return n?t.G2.toObject(a):a}async function Xc(c,t,n,o){await Nn(c,t,1);const a=await c.readULE32();if(await Kn(c),a===Zc)return await ts(c,t,n,o);if(a===Wc)return await ns(c,t,n,o);if(a===Ei)return await os(c,t,n,o);throw new Error("Protocol not supported: ")}async function ts(c,t,n,o){const a={};a.protocol="groth16",await Nn(c,t,2);const l=await c.readULE32();a.n8q=l,a.q=await An(c,l);const f=await c.readULE32();return a.n8r=f,a.r=await An(c,f),a.curve=await Mo(a.q,o),a.nVars=await c.readULE32(),a.nPublic=await c.readULE32(),a.domainSize=await c.readULE32(),a.power=no(a.domainSize),a.vk_alpha_1=await Wt(c,a.curve,n),a.vk_beta_1=await Wt(c,a.curve,n),a.vk_beta_2=await Hn(c,a.curve,n),a.vk_gamma_2=await Hn(c,a.curve,n),a.vk_delta_1=await Wt(c,a.curve,n),a.vk_delta_2=await Hn(c,a.curve,n),await Kn(c),a}async function ns(c,t,n,o){const a={};a.protocol="plonk",await Nn(c,t,2);const l=await c.readULE32();a.n8q=l,a.q=await An(c,l);const f=await c.readULE32();return a.n8r=f,a.r=await An(c,f),a.curve=await Mo(a.q,o),a.nVars=await c.readULE32(),a.nPublic=await c.readULE32(),a.domainSize=await c.readULE32(),a.power=no(a.domainSize),a.nAdditions=await c.readULE32(),a.nConstraints=await c.readULE32(),a.k1=await c.read(f),a.k2=await c.read(f),a.Qm=await Wt(c,a.curve,n),a.Ql=await Wt(c,a.curve,n),a.Qr=await Wt(c,a.curve,n),a.Qo=await Wt(c,a.curve,n),a.Qc=await Wt(c,a.curve,n),a.S1=await Wt(c,a.curve,n),a.S2=await Wt(c,a.curve,n),a.S3=await Wt(c,a.curve,n),a.X_2=await Hn(c,a.curve,n),await Kn(c),a}async function os(c,t,n,o){const a={};a.protocol="fflonk",a.protocolId=Ei,await Nn(c,t,Jc);const l=await c.readULE32();a.n8q=l,a.q=await An(c,l),a.curve=await Mo(a.q,o);const f=await c.readULE32();return a.n8r=f,a.r=await An(c,f),a.nVars=await c.readULE32(),a.nPublic=await c.readULE32(),a.domainSize=await c.readULE32(),a.power=no(a.domainSize),a.nAdditions=await c.readULE32(),a.nConstraints=await c.readULE32(),a.k1=await c.read(f),a.k2=await c.read(f),a.w3=await c.read(f),a.w4=await c.read(f),a.w8=await c.read(f),a.wr=await c.read(f),a.X_2=await Hn(c,a.curve,n),a.C0=await Wt(c,a.curve,n),await Kn(c),a}async function as(c,t,n){await ri(c,1);const o=(Math.floor((Pt.bitLength(n)-1)/64)+1)*8;if(await c.writeULE32(o),await Sc(c,n,o),t.byteLength%o!=0)throw new Error("Invalid witness length");await c.writeULE32(t.byteLength/o),await di(c),await ri(c,2),await c.write(t),await di(c)}async function is(c,t){await Nn(c,t,1);const n=await c.readULE32(),o=await An(c,n),a=await c.readULE32();return await Kn(c),{n8:n,q:o,nWitness:a}}const{stringifyBigInts:Fi}=Rn;async function Si(c,t,n,o){const{fd:a,sections:l}=await li(t,"wtns",2),f=await is(a,l),{fd:u,sections:y}=await li(c,"zkey",2),g=await Xc(u,y,void 0,o);if(g.protocol!="groth16")throw new Error("zkey file is not groth16");if(!Pt.eq(g.r,f.q))throw new Error("Curve of the witness does not match the curve of the proving key");if(f.nWitness!=g.nVars)throw new Error(`Invalid witness length. Circuit: ${g.nVars}, witness: ${f.nWitness}`);const s=g.curve,E=s.Fr,F=s.G1,A=s.G2,D=no(g.domainSize);n&&n.debug("Reading Wtns");const k=await bn(a,l,2);n&&n.debug("Reading Coeffs");const B=await bn(u,y,4);n&&n.debug("Building ABC");const[G,S,st]=await es(s,g,k,B,n),U=D==E.s?s.Fr.shift:s.Fr.w[D+1],lt=await E.ifft(G,"","",n,"IFFT_A"),w=await E.batchApplyKey(lt,E.e(1),U),_=await E.fft(w,"","",n,"FFT_A"),p=await E.ifft(S,"","",n,"IFFT_B"),V=await E.batchApplyKey(p,E.e(1),U),$=await E.fft(V,"","",n,"FFT_B"),X=await E.ifft(st,"","",n,"IFFT_C"),Q=await E.batchApplyKey(X,E.e(1),U),b=await E.fft(Q,"","",n,"FFT_C");n&&n.debug("Join ABC");const x=await cs(s,g,_,$,b,n);let z={};n&&n.debug("Reading A Points");const ot=await bn(u,y,5);z.pi_a=await s.G1.multiExpAffine(ot,k,n,"multiexp A"),n&&n.debug("Reading B1 Points");const tt=await bn(u,y,6);let K=await s.G1.multiExpAffine(tt,k,n,"multiexp B1");n&&n.debug("Reading B2 Points");const it=await bn(u,y,7);z.pi_b=await s.G2.multiExpAffine(it,k,n,"multiexp B2"),n&&n.debug("Reading C Points");const W=await bn(u,y,8);z.pi_c=await s.G1.multiExpAffine(W,k.slice((g.nPublic+1)*s.Fr.n8),n,"multiexp C"),n&&n.debug("Reading H Points");const et=await bn(u,y,9),pt=await s.G1.multiExpAffine(et,x,n,"multiexp H"),wt=s.Fr.random(),ft=s.Fr.random();z.pi_a=F.add(z.pi_a,g.vk_alpha_1),z.pi_a=F.add(z.pi_a,F.timesFr(g.vk_delta_1,wt)),z.pi_b=A.add(z.pi_b,g.vk_beta_2),z.pi_b=A.add(z.pi_b,A.timesFr(g.vk_delta_2,ft)),K=F.add(K,g.vk_beta_1),K=F.add(K,F.timesFr(g.vk_delta_1,ft)),z.pi_c=F.add(z.pi_c,pt),z.pi_c=F.add(z.pi_c,F.timesFr(z.pi_a,ft)),z.pi_c=F.add(z.pi_c,F.timesFr(K,wt)),z.pi_c=F.add(z.pi_c,F.timesFr(g.vk_delta_1,E.neg(E.mul(wt,ft))));let L=[];for(let i=1;i<=g.nPublic;i++){const C=k.slice(i*E.n8,i*E.n8+E.n8);L.push(Pt.fromRprLE(C))}return z.pi_a=F.toObject(F.toAffine(z.pi_a)),z.pi_b=A.toObject(A.toAffine(z.pi_b)),z.pi_c=F.toObject(F.toAffine(z.pi_c)),z.protocol="groth16",z.curve=s.name,await u.close(),await a.close(),z=Fi(z),L=Fi(L),{proof:z,publicSignals:L}}async function es(c,t,n,o,a){const l=c.Fr.n8,f=12+t.n8r,u=(o.byteLength-4)/f,y=new Qt(t.domainSize*l),g=new Qt(t.domainSize*l),s=new Qt(t.domainSize*l),E=[y,g];for(let F=0;F<u;F++){a&&F%1e6==0&&a.debug(`QAP AB: ${F}/${u}`);const A=o.slice(4+F*f,4+F*f+f),D=new DataView(A.buffer),k=D.getUint32(0,!0),B=D.getUint32(4,!0),G=D.getUint32(8,!0),S=A.slice(12,12+l);E[k].set(c.Fr.add(E[k].slice(B*l,B*l+l),c.Fr.mul(S,n.slice(G*l,G*l+l))),B*l)}for(let F=0;F<t.domainSize;F++)a&&F%1e6==0&&a.debug(`QAP C: ${F}/${t.domainSize}`),s.set(c.Fr.mul(y.slice(F*l,F*l+l),g.slice(F*l,F*l+l)),F*l);return[y,g,s]}async function cs(c,t,n,o,a,l){const u=c.Fr.n8,y=Math.floor(n.byteLength/c.Fr.n8),g=[];for(let A=0;A<y;A+=4194304){l&&l.debug(`JoinABC: ${A}/${y}`);const D=Math.min(y-A,4194304),k=[],B=n.slice(A*u,(A+D)*u),G=o.slice(A*u,(A+D)*u),S=a.slice(A*u,(A+D)*u);k.push({cmd:"ALLOCSET",var:0,buff:B}),k.push({cmd:"ALLOCSET",var:1,buff:G}),k.push({cmd:"ALLOCSET",var:2,buff:S}),k.push({cmd:"ALLOC",var:3,len:D*u}),k.push({cmd:"CALL",fnName:"qap_joinABC",params:[{var:0},{var:1},{var:2},{val:D},{var:3}]}),k.push({cmd:"CALL",fnName:"frm_batchFromMontgomery",params:[{var:3},{val:D},{var:3}]}),k.push({cmd:"GET",out:0,var:3,len:D*u}),g.push(c.tm.queueAction(k))}const s=await Promise.all(g);let E;n instanceof Qt?E=new Qt(n.byteLength):E=new Uint8Array(n.byteLength);let F=0;for(let A=0;A<s.length;A++)E.set(s[A][0],F),F+=s[A][0].byteLength;return E}function vi(c){let t=[];return n(t,c),t;function n(o,a){if(Array.isArray(a))for(let l=0;l<a.length;l++)n(o,a[l]);else o.push(a)}}function ss(c,t){let n=BigInt(c)%t;return n<0&&(n+=t),n}function xi(c){const t=BigInt(2)**BigInt(64);let n=BigInt("0xCBF29CE484222325");for(let l=0;l<c.length;l++)n^=BigInt(c[l].charCodeAt(0)),n*=BigInt(1099511628211),n%=t;let o=n.toString(16),a=16-o.length;return o="0".repeat(a).concat(o),o}function ls(c,t){const n=[];let o=BigInt(c);const a=BigInt(4294967296);for(;o;)n.unshift(Number(o%a)),o=o/a;if(t){let l=t-n.length;for(;l>0;)n.unshift(0),l--}return n}async function rs(c,t){let n,o,a;t=t||{};let l=1,f=0,u=0,y=!1;if(c instanceof WebAssembly.Instance)n=c,y=!0;else{let F=32767;if(t.memorySize&&(F=parseInt(t.memorySize),F<0))throw new Error("Invalid memory size");let A=!1;for(;!A;)try{a=new WebAssembly.Memory({initial:F}),A=!0}catch(B){if(F<=1)throw B;console.warn("Could not allocate "+F*1024*64+" bytes. This may cause severe instability. Trying with "+F*1024*64/2+" bytes"),F=Math.floor(F/2)}const D=await WebAssembly.compile(c);let k="";n=await WebAssembly.instantiate(D,{env:{memory:a},runtime:{printDebug:function(B){},exceptionHandler:function(B){let G;throw B===1?G="Signal not found. ":B===2?G="Too many signals set. ":B===3?G="Signal already set. ":B===4?G="Assert Failed. ":B===5?G="Not enough memory. ":B===6?G="Input signal array access exceeds the size. ":G="Unknown error. ",console.error("ERROR: ",B,k),new Error(G+k)},printErrorMessage:function(){k+=s()+`
`},writeBufferMessage:function(){s()},showSharedRWMemory:function(){const B=n.exports.getFieldNumLen32(),G=new Uint32Array(B);for(let S=0;S<B;S++)G[B-1-S]=n.exports.readSharedRWMemory(S);l>=2&&(f>=1||u>=7)?Pt.fromArray(G,4294967296).toString():console.log(Pt.fromArray(G,4294967296))},error:function(B,G,S,st,U,lt){let w;throw B===7?w=E(G)+" "+o.getFr(st).toString()+" != "+o.getFr(U).toString()+" "+E(lt):B===9?w=E(G)+" "+o.getFr(st).toString()+" "+E(U):B===5&&t.sym?w=E(G)+" "+t.sym.labelIdx2Name[U]:w=E(G)+" "+S+" "+st+" "+U+" "+lt,new Error(w)},log:function(B){console.log(o.getFr(B).toString())},logGetSignal:function(B,G){t.logGetSignal&&t.logGetSignal(B,o.getFr(G))},logSetSignal:function(B,G){t.logSetSignal&&t.logSetSignal(B,o.getFr(G))},logStartComponent:function(B){t.logStartComponent&&t.logStartComponent(B)},logFinishComponent:function(B){t.logFinishComponent&&t.logFinishComponent(B)}}})}typeof n.exports.getVersion=="function"&&(l=n.exports.getVersion()),typeof n.exports.getMinorVersion=="function"&&(f=n.exports.getMinorVersion()),typeof n.exports.getPatchVersion=="function"&&(u=n.exports.getPatchVersion());const g=t&&(t.sanityCheck||t.logGetSignal||t.logSetSignal||t.logStartComponent||t.logFinishComponent);if(l===2)o=new _s(n,g);else if(l===1){if(y)throw new Error("Loading code from WebAssembly instance is not supported for circom version 1");o=new ds(a,n,g)}else throw new Error(`Unsupported circom version: ${l}`);return o;function s(){let F="",A=n.exports.getMessageChar();for(;A!==0;)F+=String.fromCharCode(A),A=n.exports.getMessageChar();return F}function E(F){const A=new Uint8Array(a.buffer),D=[];for(let k=0;A[F+k]>0;k++)D.push(A[F+k]);return String.fromCharCode.apply(null,D)}}class ds{constructor(t,n,o){this.memory=t,this.i32=new Uint32Array(t.buffer),this.instance=n,this.n32=(this.instance.exports.getFrLen()>>2)-2;const a=this.instance.exports.getPRawPrime(),l=new Array(this.n32);for(let f=0;f<this.n32;f++)l[this.n32-1-f]=this.i32[(a>>2)+f];this.prime=Pt.fromArray(l,4294967296),this.Fr=new de(this.prime),this.mask32=Pt.fromString("FFFFFFFF",16),this.NVars=this.instance.exports.getNVars(),this.n64=Math.floor((this.Fr.bitLength-1)/64)+1,this.R=this.Fr.e(Pt.shiftLeft(1,this.n64*64)),this.RInv=this.Fr.inv(this.R),this.sanityCheck=o}circom_version(){return 1}async _doCalculateWitness(t,n){this.instance.exports.init(this.sanityCheck||n?1:0);const o=this.allocInt(),a=this.allocFr();Object.keys(t).forEach(f=>{const u=xi(f),y=parseInt(u.slice(0,8),16),g=parseInt(u.slice(8,16),16);try{this.instance.exports.getSignalOffset32(o,0,y,g)}catch{throw new Error(`Signal ${f} is not an input of the circuit.`)}const s=this.getInt(o),E=vi(t[f]);for(let F=0;F<E.length;F++)this.setFr(a,E[F]),this.instance.exports.setSignal(0,0,s+F,a)})}async calculateWitness(t,n){const o=this,a=o.i32[0],l=[];await o._doCalculateWitness(t,n);for(let f=0;f<o.NVars;f++){const u=o.instance.exports.getPWitness(f);l.push(o.getFr(u))}return o.i32[0]=a,l}async calculateBinWitness(t,n){const o=this,a=o.i32[0];await o._doCalculateWitness(t,n);const l=o.instance.exports.getWitnessBuffer();o.i32[0]=a;const f=o.memory.buffer.slice(l,l+o.NVars*o.n64*8);return new Uint8Array(f)}allocInt(){const t=this.i32[0];return this.i32[0]=t+8,t}allocFr(){const t=this.i32[0];return this.i32[0]=t+this.n32*4+8,t}getInt(t){return this.i32[t>>2]}setInt(t,n){this.i32[t>>2]=n}getFr(t){const n=this,o=t>>2;if(n.i32[o+1]&2147483648){const l=new Array(n.n32);for(let u=0;u<n.n32;u++)l[n.n32-1-u]=n.i32[o+2+u];const f=n.Fr.e(Pt.fromArray(l,4294967296));return n.i32[o+1]&1073741824?a(f):f}else return n.i32[o]&2147483648?n.Fr.e(n.i32[o]-4294967296):n.Fr.e(n.i32[o]);function a(l){return n.Fr.mul(n.RInv,l)}}setFr(t,n){const o=this;n=o.Fr.e(n);const a=o.Fr.neg(o.Fr.e("80000000",16)),l=o.Fr.e("7FFFFFFF",16);if(o.Fr.geq(n,a)&&o.Fr.leq(n,l)){let u;o.Fr.geq(n,o.Fr.zero)?u=Pt.toNumber(n):(u=Pt.toNumber(o.Fr.sub(n,a)),u=u-2147483648,u=4294967296+u),o.i32[t>>2]=u,o.i32[(t>>2)+1]=0;return}o.i32[t>>2]=0,o.i32[(t>>2)+1]=2147483648;const f=Pt.toArray(n,4294967296);for(let u=0;u<o.n32;u++){const y=f.length-1-u;y>=0?o.i32[(t>>2)+2+u]=f[y]:o.i32[(t>>2)+2+u]=0}}}class _s{constructor(t,n){this.instance=t,this.version=this.instance.exports.getVersion(),this.n32=this.instance.exports.getFieldNumLen32(),this.instance.exports.getRawPrime();const o=new Uint32Array(this.n32);for(let a=0;a<this.n32;a++)o[this.n32-1-a]=this.instance.exports.readSharedRWMemory(a);this.prime=Pt.fromArray(o,4294967296),this.witnessSize=this.instance.exports.getWitnessSize(),this.sanityCheck=n}circom_version(){return this.instance.exports.getVersion()}async _doCalculateWitness(t,n){this.instance.exports.init(this.sanityCheck||n?1:0);const o=Object.keys(t);let a=0;if(o.forEach(l=>{const f=xi(l),u=parseInt(f.slice(0,8),16),y=parseInt(f.slice(8,16),16),g=vi(t[l]);if(typeof this.instance.exports.getInputSignalSize=="function"){let s=this.instance.exports.getInputSignalSize(u,y);if(s<0)throw new Error(`Signal ${l} not found
`);if(g.length<s)throw new Error(`Not enough values for input signal ${l}
`);if(g.length>s)throw new Error(`Too many values for input signal ${l}
`)}for(let s=0;s<g.length;s++){const E=ls(ss(g[s],this.prime),this.n32);for(let F=0;F<this.n32;F++)this.instance.exports.writeSharedRWMemory(F,E[this.n32-1-F]);try{this.instance.exports.setInputSignal(u,y,s),a++}catch(F){throw new Error(F)}}}),a<this.instance.exports.getInputSize())throw new Error(`Not all inputs have been set. Only ${a} out of ${this.instance.exports.getInputSize()}`)}async calculateWitness(t,n){const o=[];await this._doCalculateWitness(t,n);for(let a=0;a<this.witnessSize;a++){this.instance.exports.getWitness(a);const l=new Uint32Array(this.n32);for(let f=0;f<this.n32;f++)l[this.n32-1-f]=this.instance.exports.readSharedRWMemory(f);o.push(Pt.fromArray(l,4294967296))}return o}async calculateWTNSBin(t,n){const o=new Uint32Array(this.witnessSize*this.n32+this.n32+11),a=new Uint8Array(o.buffer);await this._doCalculateWitness(t,n),a[0]=119,a[1]=116,a[2]=110,a[3]=115,o[1]=2,o[2]=2,o[3]=1;const l=this.n32*4,u=(8+l).toString(16);o[4]=parseInt(u.slice(0,8),16),o[5]=parseInt(u.slice(8,16),16),o[6]=l,this.instance.exports.getRawPrime();let y=7;for(let E=0;E<this.n32;E++)o[y+E]=this.instance.exports.readSharedRWMemory(E);y+=this.n32,o[y]=this.witnessSize,y++,o[y]=2,y++;const s=(l*this.witnessSize).toString(16);o[y]=parseInt(s.slice(0,8),16),o[y+1]=parseInt(s.slice(8,16),16),y+=2;for(let E=0;E<this.witnessSize;E++){this.instance.exports.getWitness(E);for(let F=0;F<this.n32;F++)o[y+F]=this.instance.exports.readSharedRWMemory(F);y+=this.n32}return a}}const{unstringifyBigInts:gs}=Rn;async function us(c,t,n,o){const a=gs(c),l=await si(t),f=await l.read(l.totalSize);await l.close();const u=await rs(f,o);if(u.circom_version()===1){const y=await u.calculateBinWitness(a),g=await Fc(n,"wtns",2,2);await as(g,y,u.prime),await g.close()}else{const y=await ci(n),g=await u.calculateWTNSBin(a);await y.write(g),await y.close()}}const{unstringifyBigInts:hs}=Rn;async function fs(c,t,n,o,a,l){const f=hs(c),u={type:"mem"};return await us(f,t,u,a),await Si(n,u,o,l)}const{unstringifyBigInts:To}=Rn;async function Ls(c,t,n,o){const a=To(c),l=To(n),f=To(t),u=await Oc(a.curve),y=u.G1.fromObject(a.IC[0]),g=new Uint8Array(u.G1.F.n8*2*f.length),s=new Uint8Array(u.Fr.n8*f.length);if(!As(u,f))return o&&o.error("Public inputs are not valid."),!1;for(let U=0;U<f.length;U++){const lt=u.G1.fromObject(a.IC[U+1]);g.set(lt,U*u.G1.F.n8*2),Pt.toRprLE(s,u.Fr.n8*U,f[U],u.Fr.n8)}let E=await u.G1.multiExpAffine(g,s);E=u.G1.add(E,y);const F=u.G1.fromObject(l.pi_a),A=u.G2.fromObject(l.pi_b),D=u.G1.fromObject(l.pi_c);if(!ps(u,{pi_a:F,pi_b:A,pi_c:D}))return o&&o.error("Proof commitments are not valid."),!1;const k=u.G2.fromObject(a.vk_gamma_2),B=u.G2.fromObject(a.vk_delta_2),G=u.G1.fromObject(a.vk_alpha_1),S=u.G2.fromObject(a.vk_beta_2);return await u.pairingEq(u.G1.neg(F),A,E,k,D,B,G,S)?(o&&o.info("OK!"),!0):(o&&o.error("Invalid proof"),!1)}function ps(c,t){const n=c.G1,o=c.G2;return n.isValid(t.pi_a)&&o.isValid(t.pi_b)&&n.isValid(t.pi_c)}function As(c,t){for(let n=0;n<t.length;n++)if(!Pt.lt(t[n],c.r))return!1;return!0}const{unstringifyBigInts:Oi}=Rn;function sn(c){let t=c.toString(16);for(;t.length<64;)t="0"+t;return t=`"0x${t}"`,t}async function bs(c,t){const n=Oi(c),o=Oi(t);let a="";for(let f=0;f<o.length;f++)a!=""&&(a=a+","),a=a+sn(o[f]);let l;return l=`[${sn(n.pi_a[0])}, ${sn(n.pi_a[1])}],[[${sn(n.pi_b[0][1])}, ${sn(n.pi_b[0][0])}],[${sn(n.pi_b[1][1])}, ${sn(n.pi_b[1][0])}]],[${sn(n.pi_c[0])}, ${sn(n.pi_c[1])}],[${a}]`,l}var Go=Object.freeze({__proto__:null,fullProve:fs,prove:Si,verify:Ls,exportSolidityCallData:bs});Pt.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),Pt.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");var Is={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(c){(function(){var t="input is invalid type",n="finalize already called",o=typeof window=="object",a=o?window:{};a.JS_SHA3_NO_WINDOW&&(o=!1);var l=!o&&typeof self=="object",f=!a.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;f?a=Qc:l&&(a=self);var u=!a.JS_SHA3_NO_COMMON_JS&&!0&&c.exports,y=!a.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",g="0123456789abcdef".split(""),s=[31,7936,2031616,520093696],E=[4,1024,262144,67108864],F=[1,256,65536,16777216],A=[6,1536,393216,100663296],D=[0,8,16,24],k=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],B=[224,256,384,512],G=[128,256],S=["hex","buffer","arrayBuffer","array","digest"],st={128:168,256:136};(a.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(L){return Object.prototype.toString.call(L)==="[object Array]"}),y&&(a.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(L){return typeof L=="object"&&L.buffer&&L.buffer.constructor===ArrayBuffer});for(var U=function(L,i,C){return function(e){return new pt(L,i,L).update(e)[C]()}},lt=function(L,i,C){return function(e,m){return new pt(L,i,m).update(e)[C]()}},w=function(L,i,C){return function(e,m,I,h){return x["cshake"+L].update(e,m,I,h)[C]()}},_=function(L,i,C){return function(e,m,I,h){return x["kmac"+L].update(e,m,I,h)[C]()}},p=function(L,i,C,e){for(var m=0;m<S.length;++m){var I=S[m];L[I]=i(C,e,I)}return L},V=function(L,i){var C=U(L,i,"hex");return C.create=function(){return new pt(L,i,L)},C.update=function(e){return C.create().update(e)},p(C,U,L,i)},$=function(L,i){var C=lt(L,i,"hex");return C.create=function(e){return new pt(L,i,e)},C.update=function(e,m){return C.create(m).update(e)},p(C,lt,L,i)},X=function(L,i){var C=st[L],e=w(L,i,"hex");return e.create=function(m,I,h){return!I&&!h?x["shake"+L].create(m):new pt(L,i,m).bytepad([I,h],C)},e.update=function(m,I,h,v){return e.create(I,h,v).update(m)},p(e,w,L,i)},Q=function(L,i){var C=st[L],e=_(L,i,"hex");return e.create=function(m,I,h){return new wt(L,i,I).bytepad(["KMAC",h],C).bytepad([m],C)},e.update=function(m,I,h,v){return e.create(m,h,v).update(I)},p(e,_,L,i)},b=[{name:"keccak",padding:F,bits:B,createMethod:V},{name:"sha3",padding:A,bits:B,createMethod:V},{name:"shake",padding:s,bits:G,createMethod:$},{name:"cshake",padding:E,bits:G,createMethod:X},{name:"kmac",padding:E,bits:G,createMethod:Q}],x={},z=[],ot=0;ot<b.length;++ot)for(var tt=b[ot],K=tt.bits,it=0;it<K.length;++it){var W=tt.name+"_"+K[it];if(z.push(W),x[W]=tt.createMethod(K[it],tt.padding),tt.name!=="sha3"){var et=tt.name+K[it];z.push(et),x[et]=x[W]}}function pt(L,i,C){this.blocks=[],this.s=[],this.padding=i,this.outputBits=C,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(L<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=C>>5,this.extraBytes=(C&31)>>3;for(var e=0;e<50;++e)this.s[e]=0}pt.prototype.update=function(L){if(this.finalized)throw new Error(n);var i,C=typeof L;if(C!=="string"){if(C==="object"){if(L===null)throw new Error(t);if(y&&L.constructor===ArrayBuffer)L=new Uint8Array(L);else if(!Array.isArray(L)&&(!y||!ArrayBuffer.isView(L)))throw new Error(t)}else throw new Error(t);i=!0}for(var e=this.blocks,m=this.byteCount,I=L.length,h=this.blockCount,v=0,J=this.s,R,at;v<I;){if(this.reset)for(this.reset=!1,e[0]=this.block,R=1;R<h+1;++R)e[R]=0;if(i)for(R=this.start;v<I&&R<m;++v)e[R>>2]|=L[v]<<D[R++&3];else for(R=this.start;v<I&&R<m;++v)at=L.charCodeAt(v),at<128?e[R>>2]|=at<<D[R++&3]:at<2048?(e[R>>2]|=(192|at>>6)<<D[R++&3],e[R>>2]|=(128|at&63)<<D[R++&3]):at<55296||at>=57344?(e[R>>2]|=(224|at>>12)<<D[R++&3],e[R>>2]|=(128|at>>6&63)<<D[R++&3],e[R>>2]|=(128|at&63)<<D[R++&3]):(at=65536+((at&1023)<<10|L.charCodeAt(++v)&1023),e[R>>2]|=(240|at>>18)<<D[R++&3],e[R>>2]|=(128|at>>12&63)<<D[R++&3],e[R>>2]|=(128|at>>6&63)<<D[R++&3],e[R>>2]|=(128|at&63)<<D[R++&3]);if(this.lastByteIndex=R,R>=m){for(this.start=R-m,this.block=e[h],R=0;R<h;++R)J[R]^=e[R];ft(J),this.reset=!0}else this.start=R}return this},pt.prototype.encode=function(L,i){var C=L&255,e=1,m=[C];for(L=L>>8,C=L&255;C>0;)m.unshift(C),L=L>>8,C=L&255,++e;return i?m.push(e):m.unshift(e),this.update(m),m.length},pt.prototype.encodeString=function(L){var i,C=typeof L;if(C!=="string"){if(C==="object"){if(L===null)throw new Error(t);if(y&&L.constructor===ArrayBuffer)L=new Uint8Array(L);else if(!Array.isArray(L)&&(!y||!ArrayBuffer.isView(L)))throw new Error(t)}else throw new Error(t);i=!0}var e=0,m=L.length;if(i)e=m;else for(var I=0;I<L.length;++I){var h=L.charCodeAt(I);h<128?e+=1:h<2048?e+=2:h<55296||h>=57344?e+=3:(h=65536+((h&1023)<<10|L.charCodeAt(++I)&1023),e+=4)}return e+=this.encode(e*8),this.update(L),e},pt.prototype.bytepad=function(L,i){for(var C=this.encode(i),e=0;e<L.length;++e)C+=this.encodeString(L[e]);var m=i-C%i,I=[];return I.length=m,this.update(I),this},pt.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var L=this.blocks,i=this.lastByteIndex,C=this.blockCount,e=this.s;if(L[i>>2]|=this.padding[i&3],this.lastByteIndex===this.byteCount)for(L[0]=L[C],i=1;i<C+1;++i)L[i]=0;for(L[C-1]|=2147483648,i=0;i<C;++i)e[i]^=L[i];ft(e)}},pt.prototype.toString=pt.prototype.hex=function(){this.finalize();for(var L=this.blockCount,i=this.s,C=this.outputBlocks,e=this.extraBytes,m=0,I=0,h="",v;I<C;){for(m=0;m<L&&I<C;++m,++I)v=i[m],h+=g[v>>4&15]+g[v&15]+g[v>>12&15]+g[v>>8&15]+g[v>>20&15]+g[v>>16&15]+g[v>>28&15]+g[v>>24&15];I%L===0&&(ft(i),m=0)}return e&&(v=i[m],h+=g[v>>4&15]+g[v&15],e>1&&(h+=g[v>>12&15]+g[v>>8&15]),e>2&&(h+=g[v>>20&15]+g[v>>16&15])),h},pt.prototype.arrayBuffer=function(){this.finalize();var L=this.blockCount,i=this.s,C=this.outputBlocks,e=this.extraBytes,m=0,I=0,h=this.outputBits>>3,v;e?v=new ArrayBuffer(C+1<<2):v=new ArrayBuffer(h);for(var J=new Uint32Array(v);I<C;){for(m=0;m<L&&I<C;++m,++I)J[I]=i[m];I%L===0&&ft(i)}return e&&(J[m]=i[m],v=v.slice(0,h)),v},pt.prototype.buffer=pt.prototype.arrayBuffer,pt.prototype.digest=pt.prototype.array=function(){this.finalize();for(var L=this.blockCount,i=this.s,C=this.outputBlocks,e=this.extraBytes,m=0,I=0,h=[],v,J;I<C;){for(m=0;m<L&&I<C;++m,++I)v=I<<2,J=i[m],h[v]=J&255,h[v+1]=J>>8&255,h[v+2]=J>>16&255,h[v+3]=J>>24&255;I%L===0&&ft(i)}return e&&(v=I<<2,J=i[m],h[v]=J&255,e>1&&(h[v+1]=J>>8&255),e>2&&(h[v+2]=J>>16&255)),h};function wt(L,i,C){pt.call(this,L,i,C)}wt.prototype=new pt,wt.prototype.finalize=function(){return this.encode(this.outputBits,!0),pt.prototype.finalize.call(this)};var ft=function(L){var i,C,e,m,I,h,v,J,R,at,It,dt,Lt,St,gt,rt,bt,xt,Mt,Ht,Dt,Vt,qt,kt,Gt,Jt,$t,N,r,d,P,q,O,T,M,j,Y,Z,H,nt,ut,_t,ct,At,Ct,vt,yt,mt,ht,Ot,Rt,Zt,Sn,gn,un,vn,hn,fn,xn,ln,tn,yn,oo;for(e=0;e<48;e+=2)m=L[0]^L[10]^L[20]^L[30]^L[40],I=L[1]^L[11]^L[21]^L[31]^L[41],h=L[2]^L[12]^L[22]^L[32]^L[42],v=L[3]^L[13]^L[23]^L[33]^L[43],J=L[4]^L[14]^L[24]^L[34]^L[44],R=L[5]^L[15]^L[25]^L[35]^L[45],at=L[6]^L[16]^L[26]^L[36]^L[46],It=L[7]^L[17]^L[27]^L[37]^L[47],dt=L[8]^L[18]^L[28]^L[38]^L[48],Lt=L[9]^L[19]^L[29]^L[39]^L[49],i=dt^(h<<1|v>>>31),C=Lt^(v<<1|h>>>31),L[0]^=i,L[1]^=C,L[10]^=i,L[11]^=C,L[20]^=i,L[21]^=C,L[30]^=i,L[31]^=C,L[40]^=i,L[41]^=C,i=m^(J<<1|R>>>31),C=I^(R<<1|J>>>31),L[2]^=i,L[3]^=C,L[12]^=i,L[13]^=C,L[22]^=i,L[23]^=C,L[32]^=i,L[33]^=C,L[42]^=i,L[43]^=C,i=h^(at<<1|It>>>31),C=v^(It<<1|at>>>31),L[4]^=i,L[5]^=C,L[14]^=i,L[15]^=C,L[24]^=i,L[25]^=C,L[34]^=i,L[35]^=C,L[44]^=i,L[45]^=C,i=J^(dt<<1|Lt>>>31),C=R^(Lt<<1|dt>>>31),L[6]^=i,L[7]^=C,L[16]^=i,L[17]^=C,L[26]^=i,L[27]^=C,L[36]^=i,L[37]^=C,L[46]^=i,L[47]^=C,i=at^(m<<1|I>>>31),C=It^(I<<1|m>>>31),L[8]^=i,L[9]^=C,L[18]^=i,L[19]^=C,L[28]^=i,L[29]^=C,L[38]^=i,L[39]^=C,L[48]^=i,L[49]^=C,St=L[0],gt=L[1],vt=L[11]<<4|L[10]>>>28,yt=L[10]<<4|L[11]>>>28,N=L[20]<<3|L[21]>>>29,r=L[21]<<3|L[20]>>>29,ln=L[31]<<9|L[30]>>>23,tn=L[30]<<9|L[31]>>>23,_t=L[40]<<18|L[41]>>>14,ct=L[41]<<18|L[40]>>>14,T=L[2]<<1|L[3]>>>31,M=L[3]<<1|L[2]>>>31,rt=L[13]<<12|L[12]>>>20,bt=L[12]<<12|L[13]>>>20,mt=L[22]<<10|L[23]>>>22,ht=L[23]<<10|L[22]>>>22,d=L[33]<<13|L[32]>>>19,P=L[32]<<13|L[33]>>>19,yn=L[42]<<2|L[43]>>>30,oo=L[43]<<2|L[42]>>>30,gn=L[5]<<30|L[4]>>>2,un=L[4]<<30|L[5]>>>2,j=L[14]<<6|L[15]>>>26,Y=L[15]<<6|L[14]>>>26,xt=L[25]<<11|L[24]>>>21,Mt=L[24]<<11|L[25]>>>21,Ot=L[34]<<15|L[35]>>>17,Rt=L[35]<<15|L[34]>>>17,q=L[45]<<29|L[44]>>>3,O=L[44]<<29|L[45]>>>3,kt=L[6]<<28|L[7]>>>4,Gt=L[7]<<28|L[6]>>>4,vn=L[17]<<23|L[16]>>>9,hn=L[16]<<23|L[17]>>>9,Z=L[26]<<25|L[27]>>>7,H=L[27]<<25|L[26]>>>7,Ht=L[36]<<21|L[37]>>>11,Dt=L[37]<<21|L[36]>>>11,Zt=L[47]<<24|L[46]>>>8,Sn=L[46]<<24|L[47]>>>8,At=L[8]<<27|L[9]>>>5,Ct=L[9]<<27|L[8]>>>5,Jt=L[18]<<20|L[19]>>>12,$t=L[19]<<20|L[18]>>>12,fn=L[29]<<7|L[28]>>>25,xn=L[28]<<7|L[29]>>>25,nt=L[38]<<8|L[39]>>>24,ut=L[39]<<8|L[38]>>>24,Vt=L[48]<<14|L[49]>>>18,qt=L[49]<<14|L[48]>>>18,L[0]=St^~rt&xt,L[1]=gt^~bt&Mt,L[10]=kt^~Jt&N,L[11]=Gt^~$t&r,L[20]=T^~j&Z,L[21]=M^~Y&H,L[30]=At^~vt&mt,L[31]=Ct^~yt&ht,L[40]=gn^~vn&fn,L[41]=un^~hn&xn,L[2]=rt^~xt&Ht,L[3]=bt^~Mt&Dt,L[12]=Jt^~N&d,L[13]=$t^~r&P,L[22]=j^~Z&nt,L[23]=Y^~H&ut,L[32]=vt^~mt&Ot,L[33]=yt^~ht&Rt,L[42]=vn^~fn&ln,L[43]=hn^~xn&tn,L[4]=xt^~Ht&Vt,L[5]=Mt^~Dt&qt,L[14]=N^~d&q,L[15]=r^~P&O,L[24]=Z^~nt&_t,L[25]=H^~ut&ct,L[34]=mt^~Ot&Zt,L[35]=ht^~Rt&Sn,L[44]=fn^~ln&yn,L[45]=xn^~tn&oo,L[6]=Ht^~Vt&St,L[7]=Dt^~qt&gt,L[16]=d^~q&kt,L[17]=P^~O&Gt,L[26]=nt^~_t&T,L[27]=ut^~ct&M,L[36]=Ot^~Zt&At,L[37]=Rt^~Sn&Ct,L[46]=ln^~yn&gn,L[47]=tn^~oo&un,L[8]=Vt^~St&rt,L[9]=qt^~gt&bt,L[18]=q^~kt&Jt,L[19]=O^~Gt&$t,L[28]=_t^~T&j,L[29]=ct^~M&Y,L[38]=Zt^~At&vt,L[39]=Sn^~Ct&yt,L[48]=yn^~gn&vn,L[49]=oo^~un&hn,L[0]^=k[e],L[1]^=k[e+1]};if(u)c.exports=x;else for(ot=0;ot<z.length;++ot)a[z[ot]]=x[z[ot]]})()})(Is);class ys{constructor(t,n={}){this.instance=t,this.memory=n.memory||new WebAssembly.Memory({initial:32768}),this.n64=this.instance.exports.get_n64?this.instance.exports.get_n64():0,this.nPublic=this.instance.exports.get_n_public?this.instance.exports.get_n_public():0,this.nConstraints=this.instance.exports.get_n_constraints?this.instance.exports.get_n_constraints():0}circom_version_supported(){return"2.1.0"}async calculateWTNSBin(t,n=0){const o=(this.n64||32)*8;return new Uint8Array(o)}}function Ro(){return{runtime:{error:function(c,t,n){throw new Error(`WebAssembly error: ${c} at ${t}:${n}`)},print:function(c,t){},printErrorMessage:function(){console.error("WebAssembly error occurred")},exceptionHandler:function(c){throw new Error(`WebAssembly exception: ${c}`)},time:function(){return Math.floor(Date.now()/1e3)},abort:function(c,t,n,o){throw console.error(`WebAssembly abort: ${c} at ${t}:${n}:${o}`),new Error("WebAssembly execution aborted")},writeBufferMessage:function(){},writeErrorMessage:function(){console.error("WebAssembly writeErrorMessage called")},memset:function(c,t,n){return c},showSharedRWMemory:function(){},logSetSignal:function(){},logGetSignal:function(){},logFinishComponent:function(){},logStartComponent:function(){},seed:function(){return Math.floor(Math.random()*1e6)}}}}async function Qi(c,t={}){try{const n=await WebAssembly.compile(c),o=Ro(),a=await WebAssembly.instantiate(n,o);return new ys(a,t)}catch(n){throw console.error("Failed to create WitnessCalculator:",n),n}}typeof window<"u"&&(window.WitnessCalculatorBuilder=Qi,window.createCircomRuntimeImports=Ro,window.snarkjs={groth16:Go}),typeof window<"u"&&(window.WitnessCalculatorBuilder=Qi,window.createCircomRuntimeImports=Ro,window.snarkjs={groth16:Go});function Pi(c){const t=c.addressHash;return{jwtHeaderHash:c.jwtHeaderHash,jwtPayloadHash:c.jwtPayloadHash,jwtSignature:c.jwtSignature,googleModulus:c.googleModulus,googleExponent:c.googleExponent,sub:c.sub,iss:c.iss,aud:c.aud,nonce:c.nonce,salt:c.salt,addressHash:t}}async function Cs(c){const t=Pi(c),n=await fetch("/zklogin.wasm").then(f=>f.arrayBuffer()),o=await fetch("/zklogin.zkey").then(f=>f.arrayBuffer()),{proof:a,publicSignals:l}=await Go.fullProve(t,new Uint8Array(n),new Uint8Array(o));return{proof:a,publicSignals:l}}return Vn.buildZkLoginInputs=Pi,Vn.generateProof=Cs,Object.defineProperty(Vn,Symbol.toStringTag,{value:"Module"}),Vn})({});
