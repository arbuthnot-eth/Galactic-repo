(function(){"use strict";const Ht=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _n(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xe(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ye(t,...e){if(!_n(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ci(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Xe(t.outputLen),Xe(t.blockLen)}function Kt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ui(t,e){Ye(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Bn(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ut(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Un(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const li=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function di(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Je=li?t=>t:t=>di(t);function Qc(t){for(let e=0;e<t.length;e++)t[e]=di(t[e]);return t}const Gt=li?t=>t:Qc,fi=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",eu=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Pn(t){if(Ye(t),fi)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=eu[t[n]];return e}const Qe={_0:48,_9:57,A:65,F:70,a:97,f:102};function hi(t){if(t>=Qe._0&&t<=Qe._9)return t-Qe._0;if(t>=Qe.A&&t<=Qe.F)return t-(Qe.A-10);if(t>=Qe.a&&t<=Qe.f)return t-(Qe.a-10)}function pi(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(fi)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=hi(t.charCodeAt(i)),a=hi(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function gi(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function lt(t){return typeof t=="string"&&(t=gi(t)),Ye(t),t}function mi(t){return typeof t=="string"&&(t=gi(t)),Ye(t),t}function yi(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Ye(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function tu(t,e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(t,e)}class $r{}function nu(t){const e=r=>t().update(lt(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ru(t){const e=(r,s)=>t(s).update(lt(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function su(t=32){if(Ht&&typeof Ht.getRandomValues=="function")return Ht.getRandomValues(new Uint8Array(t));if(Ht&&typeof Ht.randomBytes=="function")return Uint8Array.from(Ht.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function iu(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}class ou extends $r{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Un(this.buffer)}update(e){Kt(this),e=lt(e),Ye(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Un(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Kt(this),ui(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,ut(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let h=o;h<s;h++)n[h]=0;iu(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Un(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const de=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Mn=BigInt(2**32-1),bi=BigInt(32);function wi(t,e=!1){return e?{h:Number(t&Mn),l:Number(t>>bi&Mn)}:{h:Number(t>>bi&Mn)|0,l:Number(t&Mn)|0}}function au(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=wi(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const Ei=(t,e,n)=>t>>>n,Si=(t,e,n)=>t<<32-n|e>>>n,dt=(t,e,n)=>t>>>n|e<<32-n,ft=(t,e,n)=>t<<32-n|e>>>n,un=(t,e,n)=>t<<64-n|e>>>n-32,ln=(t,e,n)=>t>>>n-32|e<<64-n,cu=(t,e)=>e,uu=(t,e)=>t;function je(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const _r=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Br=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,lu=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),du=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,fu=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),hu=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,vi=au(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),pu=vi[0],gu=vi[1],ht=new Uint32Array(80),pt=new Uint32Array(80);class mu extends ou{constructor(e=64){super(128,e,16,!1),this.Ah=de[0]|0,this.Al=de[1]|0,this.Bh=de[2]|0,this.Bl=de[3]|0,this.Ch=de[4]|0,this.Cl=de[5]|0,this.Dh=de[6]|0,this.Dl=de[7]|0,this.Eh=de[8]|0,this.El=de[9]|0,this.Fh=de[10]|0,this.Fl=de[11]|0,this.Gh=de[12]|0,this.Gl=de[13]|0,this.Hh=de[14]|0,this.Hl=de[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:h,Fl:g,Gh:b,Gl:p,Hh:y,Hl:w}=this;return[e,n,r,s,i,o,a,c,u,l,h,g,b,p,y,w]}set(e,n,r,s,i,o,a,c,u,l,h,g,b,p,y,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=h|0,this.Fl=g|0,this.Gh=b|0,this.Gl=p|0,this.Hh=y|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)ht[v]=e.getUint32(n),pt[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const $=ht[v-15]|0,P=pt[v-15]|0,q=dt($,P,1)^dt($,P,8)^Ei($,P,7),z=ft($,P,1)^ft($,P,8)^Si($,P,7),D=ht[v-2]|0,T=pt[v-2]|0,j=dt(D,T,19)^un(D,T,61)^Ei(D,T,6),U=ft(D,T,19)^ln(D,T,61)^Si(D,T,6),F=lu(z,U,pt[v-7],pt[v-16]),K=du(F,q,j,ht[v-7],ht[v-16]);ht[v]=K|0,pt[v]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:h,El:g,Fh:b,Fl:p,Gh:y,Gl:w,Hh:S,Hl:A}=this;for(let v=0;v<80;v++){const $=dt(h,g,14)^dt(h,g,18)^un(h,g,41),P=ft(h,g,14)^ft(h,g,18)^ln(h,g,41),q=h&b^~h&y,z=g&p^~g&w,D=fu(A,P,z,gu[v],pt[v]),T=hu(D,S,$,q,pu[v],ht[v]),j=D|0,U=dt(r,s,28)^un(r,s,34)^un(r,s,39),F=ft(r,s,28)^ln(r,s,34)^ln(r,s,39),K=r&i^r&a^i&a,L=s&o^s&c^o&c;S=y|0,A=w|0,y=b|0,w=p|0,b=h|0,p=g|0,{h,l:g}=je(u|0,l|0,T|0,j|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const se=_r(j,F,L);r=Br(se,T,U,K),s=se|0}({h:r,l:s}=je(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=je(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=je(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=je(this.Dh|0,this.Dl|0,u|0,l|0),{h,l:g}=je(this.Eh|0,this.El|0,h|0,g|0),{h:b,l:p}=je(this.Fh|0,this.Fl|0,b|0,p|0),{h:y,l:w}=je(this.Gh|0,this.Gl|0,y|0,w|0),{h:S,l:A}=je(this.Hh|0,this.Hl|0,S|0,A|0),this.set(r,s,i,o,a,c,u,l,h,g,b,p,y,w,S,A)}roundClean(){ut(ht,pt)}destroy(){ut(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ur=nu(()=>new mu);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pr=BigInt(0),Mr=BigInt(1);function Nr(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function Nn(t,e,n=""){const r=_n(t),s=t?.length,i=e!==void 0;if(!r||i&&s!==e){const o=n&&`"${n}" `,a=i?` of length ${e}`:"",c=r?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function Oi(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Pr:BigInt("0x"+t)}function yu(t){return Oi(Pn(t))}function Dn(t){return Ye(t),Oi(Pn(Uint8Array.from(t).reverse()))}function Ii(t,e){return pi(t.toString(16).padStart(e*2,"0"))}function bu(t,e){return Ii(t,e).reverse()}function gt(t,e,n){let r;if(typeof e=="string")try{r=pi(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(_n(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Ti(t){return Uint8Array.from(t)}const Dr=t=>typeof t=="bigint"&&Pr<=t;function wu(t,e,n){return Dr(t)&&Dr(e)&&Dr(n)&&e<=t&&t<n}function xi(t,e,n,r){if(!wu(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Eu(t){let e;for(e=0;t>Pr;t>>=Mr,e+=1);return e}const Lr=t=>(Mr<<BigInt(t))-Mr;function Vr(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function Ai(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ge=BigInt(0),pe=BigInt(1),xt=BigInt(2),ki=BigInt(3),Ci=BigInt(4),ji=BigInt(5),Su=BigInt(7),Ri=BigInt(8),vu=BigInt(9),$i=BigInt(16);function oe(t,e){const n=t%e;return n>=ge?n:e+n}function Le(t,e,n){let r=t;for(;e-- >ge;)r*=r,r%=n;return r}function _i(t,e){if(t===ge)throw new Error("invert: expected non-zero number");if(e<=ge)throw new Error("invert: expected positive modulus, got "+e);let n=oe(t,e),r=e,s=ge,i=pe;for(;n!==ge;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==pe)throw new Error("invert: does not exist");return oe(s,e)}function zr(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function Bi(t,e){const n=(t.ORDER+pe)/Ci,r=t.pow(e,n);return zr(t,r,e),r}function Ou(t,e){const n=(t.ORDER-ji)/Ri,r=t.mul(e,xt),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,xt),s),a=t.mul(i,t.sub(o,t.ONE));return zr(t,a,e),a}function Iu(t){const e=dn(t),n=Ui(t),r=n(e,e.neg(e.ONE)),s=n(e,r),i=n(e,e.neg(r)),o=(t+Su)/$i;return(a,c)=>{let u=a.pow(c,o),l=a.mul(u,r);const h=a.mul(u,s),g=a.mul(u,i),b=a.eql(a.sqr(l),c),p=a.eql(a.sqr(h),c);u=a.cmov(u,l,b),l=a.cmov(g,h,p);const y=a.eql(a.sqr(l),c),w=a.cmov(u,l,y);return zr(a,w,c),w}}function Ui(t){if(t<ki)throw new Error("sqrt is not defined for small field");let e=t-pe,n=0;for(;e%xt===ge;)e/=xt,n++;let r=xt;const s=dn(t);for(;Mi(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Bi;let i=s.pow(r,e);const o=(e+pe)/xt;return function(c,u){if(c.is0(u))return u;if(Mi(c,u)!==1)throw new Error("Cannot find square root");let l=n,h=c.mul(c.ONE,i),g=c.pow(u,e),b=c.pow(u,o);for(;!c.eql(g,c.ONE);){if(c.is0(g))return c.ZERO;let p=1,y=c.sqr(g);for(;!c.eql(y,c.ONE);)if(p++,y=c.sqr(y),p===l)throw new Error("Cannot find square root");const w=pe<<BigInt(l-p-1),S=c.pow(h,w);l=p,h=c.sqr(S),g=c.mul(g,h),b=c.mul(b,S)}return b}}function Tu(t){return t%Ci===ki?Bi:t%Ri===ji?Ou:t%$i===vu?Iu(t):Ui(t)}const xu=(t,e)=>(oe(t,e)&pe)===pe,Au=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ku(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Au.reduce((r,s)=>(r[s]="function",r),e);return Vr(t,n),t}function Cu(t,e,n){if(n<ge)throw new Error("invalid exponent, negatives unsupported");if(n===ge)return t.ONE;if(n===pe)return e;let r=t.ONE,s=e;for(;n>ge;)n&pe&&(r=t.mul(r,s)),s=t.sqr(s),n>>=pe;return r}function Pi(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function Mi(t,e){const n=(t.ORDER-pe)/xt,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function ju(t,e){e!==void 0&&Xe(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function dn(t,e,n=!1,r={}){if(t<=ge)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const g=e;g.BITS&&(s=g.BITS),g.sqrt&&(i=g.sqrt),typeof g.isLE=="boolean"&&(n=g.isLE),typeof g.modFromBytes=="boolean"&&(o=g.modFromBytes),a=g.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:u}=ju(t,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const h=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:u,MASK:Lr(c),ZERO:ge,ONE:pe,allowedLengths:a,create:g=>oe(g,t),isValid:g=>{if(typeof g!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof g);return ge<=g&&g<t},is0:g=>g===ge,isValidNot0:g=>!h.is0(g)&&h.isValid(g),isOdd:g=>(g&pe)===pe,neg:g=>oe(-g,t),eql:(g,b)=>g===b,sqr:g=>oe(g*g,t),add:(g,b)=>oe(g+b,t),sub:(g,b)=>oe(g-b,t),mul:(g,b)=>oe(g*b,t),pow:(g,b)=>Cu(h,g,b),div:(g,b)=>oe(g*_i(b,t),t),sqrN:g=>g*g,addN:(g,b)=>g+b,subN:(g,b)=>g-b,mulN:(g,b)=>g*b,inv:g=>_i(g,t),sqrt:i||(g=>(l||(l=Tu(t)),l(h,g))),toBytes:g=>n?bu(g,u):Ii(g,u),fromBytes:(g,b=!0)=>{if(a){if(!a.includes(g.length)||g.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+g.length);const y=new Uint8Array(u);y.set(g,n?0:y.length-g.length),g=y}if(g.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+g.length);let p=n?Dn(g):yu(g);if(o&&(p=oe(p,t)),!b&&!h.isValid(p))throw new Error("invalid field element: outside of range 0..ORDER");return p},invertBatch:g=>Pi(h,g),cmov:(g,b,p)=>p?b:g});return Object.freeze(h)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ln=BigInt(0),Fr=BigInt(1);function Ni(t,e){const n=e.negate();return t?n:e}function Vn(t,e){const n=Pi(t.Fp,e.map(r=>r.Z));return e.map((r,s)=>t.fromAffine(r.toAffine(n[s])))}function Di(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Hr(t,e){Di(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Lr(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Li(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Fr);const u=e*r,l=u+Math.abs(a)-1,h=a===0,g=a<0,b=e%2!==0;return{nextN:c,offset:l,isZero:h,isNeg:g,isNegF:b,offsetF:u}}function Ru(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function $u(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Kr=new WeakMap,Vi=new WeakMap;function Gr(t){return Vi.get(t)||1}function zi(t){if(t!==Ln)throw new Error("invalid wNAF")}class _u{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let s=e;for(;n>Ln;)n&Fr&&(r=r.add(s)),s=s.double(),n>>=Fr;return r}precomputeWindow(e,n){const{windows:r,windowSize:s}=Hr(n,this.bits),i=[];let o=e,a=o;for(let c=0;c<r;c++){a=o,i.push(a);for(let u=1;u<s;u++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=Hr(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:h,isNegF:g,offsetF:b}=Li(r,a,o);r=c,l?i=i.add(Ni(g,n[b])):s=s.add(Ni(h,n[u]))}return zi(r),{p:s,f:i}}wNAFUnsafe(e,n,r,s=this.ZERO){const i=Hr(e,this.bits);for(let o=0;o<i.windows&&r!==Ln;o++){const{nextN:a,offset:c,isZero:u,isNeg:l}=Li(r,o,i);if(r=a,!u){const h=n[c];s=s.add(l?h.negate():h)}}return zi(r),s}getPrecomputes(e,n,r){let s=Kr.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(s=r(s)),Kr.set(n,s))),s}cached(e,n,r){const s=Gr(e);return this.wNAF(s,this.getPrecomputes(s,e,r),n)}unsafe(e,n,r,s){const i=Gr(e);return i===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),n,s)}createCache(e,n){Di(n,this.bits),Vi.set(e,n),Kr.delete(e)}hasCache(e){return Gr(e)!==1}}function Bu(t,e,n,r){Ru(n,t),$u(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Eu(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=Lr(c),l=new Array(Number(u)+1).fill(o),h=Math.floor((e.BITS-1)/c)*c;let g=o;for(let b=h;b>=0;b-=c){l.fill(o);for(let y=0;y<i;y++){const w=r[y],S=Number(w>>BigInt(b)&u);l[S]=l[S].add(n[y])}let p=o;for(let y=l.length-1,w=o;y>0;y--)w=w.add(l[y]),p=p.add(w);if(g=g.add(p),b!==0)for(let y=0;y<c;y++)g=g.double()}return g}function Fi(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return ku(e),e}else return dn(t,{isLE:n})}function Uu(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>Ln))throw new Error(`CURVE.${c} must be positive bigint`)}const s=Fi(e.p,n.Fp,r),i=Fi(e.n,n.Fn,r),a=["Gx","Gy","a","d"];for(const c of a)if(!s.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mt=BigInt(0),ue=BigInt(1),qr=BigInt(2),Pu=BigInt(8);function Mu(t,e,n,r){const s=t.sqr(n),i=t.sqr(r),o=t.add(t.mul(e.a,s),i),a=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(o,a)}function Nu(t,e={}){const n=Uu("edwards",t,e,e.FpFnLE),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o}=i;Vr(e,{},{uvRatio:"function"});const a=qr<<BigInt(s.BYTES*8)-ue,c=w=>r.create(w),u=e.uvRatio||((w,S)=>{try{return{isValid:!0,value:r.sqrt(r.div(w,S))}}catch{return{isValid:!1,value:mt}}});if(!Mu(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function l(w,S,A=!1){const v=A?ue:mt;return xi("coordinate "+w,S,v,a),S}function h(w){if(!(w instanceof p))throw new Error("ExtendedPoint expected")}const g=Ai((w,S)=>{const{X:A,Y:v,Z:$}=w,P=w.is0();S==null&&(S=P?Pu:r.inv($));const q=c(A*S),z=c(v*S),D=r.mul($,S);if(P)return{x:mt,y:ue};if(D!==ue)throw new Error("invZ was invalid");return{x:q,y:z}}),b=Ai(w=>{const{a:S,d:A}=i;if(w.is0())throw new Error("bad point: ZERO");const{X:v,Y:$,Z:P,T:q}=w,z=c(v*v),D=c($*$),T=c(P*P),j=c(T*T),U=c(z*S),F=c(T*c(U+D)),K=c(j+c(A*c(z*D)));if(F!==K)throw new Error("bad point: equation left != right (1)");const L=c(v*$),se=c(P*q);if(L!==se)throw new Error("bad point: equation left != right (2)");return!0});class p{constructor(S,A,v,$){this.X=l("x",S),this.Y=l("y",A),this.Z=l("z",v,!0),this.T=l("t",$),Object.freeze(this)}static CURVE(){return i}static fromAffine(S){if(S instanceof p)throw new Error("extended point not allowed");const{x:A,y:v}=S||{};return l("x",A),l("y",v),new p(A,v,ue,c(A*v))}static fromBytes(S,A=!1){const v=r.BYTES,{a:$,d:P}=i;S=Ti(Nn(S,v,"point")),Nr(A,"zip215");const q=Ti(S),z=S[v-1];q[v-1]=z&-129;const D=Dn(q),T=A?a:r.ORDER;xi("point.y",D,mt,T);const j=c(D*D),U=c(j-ue),F=c(P*j-$);let{isValid:K,value:L}=u(U,F);if(!K)throw new Error("bad point: invalid y coordinate");const se=(L&ue)===ue,Q=(z&128)!==0;if(!A&&L===mt&&Q)throw new Error("bad point: x=0 and x_0=1");return Q!==se&&(L=c(-L)),p.fromAffine({x:L,y:D})}static fromHex(S,A=!1){return p.fromBytes(gt("point",S),A)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(S=8,A=!0){return y.createCache(this,S),A||this.multiply(qr),this}assertValidity(){b(this)}equals(S){h(S);const{X:A,Y:v,Z:$}=this,{X:P,Y:q,Z:z}=S,D=c(A*z),T=c(P*$),j=c(v*z),U=c(q*$);return D===T&&j===U}is0(){return this.equals(p.ZERO)}negate(){return new p(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:S}=i,{X:A,Y:v,Z:$}=this,P=c(A*A),q=c(v*v),z=c(qr*c($*$)),D=c(S*P),T=A+v,j=c(c(T*T)-P-q),U=D+q,F=U-z,K=D-q,L=c(j*F),se=c(U*K),Q=c(j*K),De=c(F*U);return new p(L,se,De,Q)}add(S){h(S);const{a:A,d:v}=i,{X:$,Y:P,Z:q,T:z}=this,{X:D,Y:T,Z:j,T:U}=S,F=c($*D),K=c(P*T),L=c(z*v*U),se=c(q*j),Q=c(($+P)*(D+T)-F-K),De=se-L,he=se+L,Ce=c(K-A*F),Ft=c(Q*De),ve=c(he*Ce),Ze=c(Q*Ce),an=c(De*he);return new p(Ft,ve,an,Ze)}subtract(S){return this.add(S.negate())}multiply(S){if(!s.isValidNot0(S))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:A,f:v}=y.cached(this,S,$=>Vn(p,$));return Vn(p,[A,v])[0]}multiplyUnsafe(S,A=p.ZERO){if(!s.isValid(S))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return S===mt?p.ZERO:this.is0()||S===ue?this:y.unsafe(this,S,v=>Vn(p,v),A)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return y.unsafe(this,i.n).is0()}toAffine(S){return g(this,S)}clearCofactor(){return o===ue?this:this.multiplyUnsafe(o)}toBytes(){const{x:S,y:A}=this.toAffine(),v=r.toBytes(A);return v[v.length-1]|=S&ue?128:0,v}toHex(){return Pn(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(S){return Vn(p,S)}static msm(S,A){return Bu(p,s,S,A)}_setWindowSize(S){this.precompute(S)}toRawBytes(){return this.toBytes()}}p.BASE=new p(i.Gx,i.Gy,ue,c(i.Gx*i.Gy)),p.ZERO=new p(mt,ue,ue,mt),p.Fp=r,p.Fn=s;const y=new _u(p,s.BITS);return p.BASE.precompute(8),p}function Du(t,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');Vr(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:s,Fp:i,Fn:o}=t,a=n.randomBytes||su,c=n.adjustScalarBytes||(T=>T),u=n.domain||((T,j,U)=>{if(Nr(U,"phflag"),j.length||U)throw new Error("Contexts/pre-hash are not supported");return T});function l(T){return o.create(Dn(T))}function h(T){const j=v.secretKey;T=gt("private key",T,j);const U=gt("hashed private key",e(T),2*j),F=c(U.slice(0,j)),K=U.slice(j,2*j),L=l(F);return{head:F,prefix:K,scalar:L}}function g(T){const{head:j,prefix:U,scalar:F}=h(T),K=s.multiply(F),L=K.toBytes();return{head:j,prefix:U,scalar:F,point:K,pointBytes:L}}function b(T){return g(T).pointBytes}function p(T=Uint8Array.of(),...j){const U=yi(...j);return l(e(u(U,gt("context",T),!!r)))}function y(T,j,U={}){T=gt("message",T),r&&(T=r(T));const{prefix:F,scalar:K,pointBytes:L}=g(j),se=p(U.context,F,T),Q=s.multiply(se).toBytes(),De=p(U.context,Q,L,T),he=o.create(se+De*K);if(!o.isValid(he))throw new Error("sign failed: invalid s");const Ce=yi(Q,o.toBytes(he));return Nn(Ce,v.signature,"result")}const w={zip215:!0};function S(T,j,U,F=w){const{context:K,zip215:L}=F,se=v.signature;T=gt("signature",T,se),j=gt("message",j),U=gt("publicKey",U,v.publicKey),L!==void 0&&Nr(L,"zip215"),r&&(j=r(j));const Q=se/2,De=T.subarray(0,Q),he=Dn(T.subarray(Q,se));let Ce,Ft,ve;try{Ce=t.fromBytes(U,L),Ft=t.fromBytes(De,L),ve=s.multiplyUnsafe(he)}catch{return!1}if(!L&&Ce.isSmallOrder())return!1;const Ze=p(K,Ft.toBytes(),Ce.toBytes(),j);return Ft.add(Ce.multiplyUnsafe(Ze)).subtract(ve).clearCofactor().is0()}const A=i.BYTES,v={secretKey:A,publicKey:A,signature:2*A,seed:A};function $(T=a(v.seed)){return Nn(T,v.seed,"seed")}function P(T){const j=D.randomSecretKey(T);return{secretKey:j,publicKey:b(j)}}function q(T){return _n(T)&&T.length===o.BYTES}function z(T,j){try{return!!t.fromBytes(T,j)}catch{return!1}}const D={getExtendedPublicKey:g,randomSecretKey:$,isValidSecretKey:q,isValidPublicKey:z,toMontgomery(T){const{y:j}=t.fromBytes(T),U=v.publicKey,F=U===32;if(!F&&U!==57)throw new Error("only defined for 25519 and 448");const K=F?i.div(ue+j,ue-j):i.div(j-ue,j+ue);return i.toBytes(K)},toMontgomerySecret(T){const j=v.secretKey;Nn(T,j);const U=e(T.subarray(0,j));return c(U).subarray(0,j)},randomPrivateKey:$,precompute(T=8,j=t.BASE){return j.precompute(T,!1)}};return Object.freeze({keygen:P,getPublicKey:b,sign:y,verify:S,utils:D,Point:t,lengths:v})}function Lu(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=dn(e.n,t.nBitLength,!0),s={Fp:n,Fn:r,uvRatio:t.uvRatio},i={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,hash:t.hash,eddsaOpts:i}}function Vu(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function zu(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:s}=Lu(t),i=Nu(e,n),o=Du(i,r,s);return Vu(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fu=BigInt(1),Hi=BigInt(2);BigInt(3);const Hu=BigInt(5),Ku=BigInt(8),Wr=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Ki={p:Wr,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Ku,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Gu(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=Wr,a=t*t%i*t%i,c=Le(a,Hi,i)*a%i,u=Le(c,Fu,i)*t%i,l=Le(u,Hu,i)*u%i,h=Le(l,e,i)*l%i,g=Le(h,n,i)*h%i,b=Le(g,r,i)*g%i,p=Le(b,s,i)*b%i,y=Le(p,s,i)*b%i,w=Le(y,e,i)*l%i;return{pow_p_5_8:Le(w,Hi,i)*t%i,b2:a}}function qu(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Gi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Wu(t,e){const n=Wr,r=oe(e*e*e,n),s=oe(r*r*e,n),i=Gu(t*s).pow_p_5_8;let o=oe(t*r*i,n);const a=oe(e*o*o,n),c=o,u=oe(o*Gi,n),l=a===t,h=a===oe(-t,n),g=a===oe(-t*Gi,n);return l&&(o=c),(h||g)&&(o=u),xu(o,n)&&(o=oe(-o,n)),{isValid:l||h,value:o}}const Zu=dn(Ki.p,{isLE:!0}),Xu={...Ki,Fp:Zu,hash:Ur,adjustScalarBytes:qu,uvRatio:Wu},et=zu(Xu);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zr(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function qi(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function Yu(t){if(typeof t!="function")throw new Error("function expected");return!0}function fn(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function zn(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function Fn(t){if(!Array.isArray(t))throw new Error("array expected")}function Wi(t,e){if(!qi(!0,e))throw new Error(`${t}: array of strings expected`)}function Xr(t,e){if(!qi(!1,e))throw new Error(`${t}: array of numbers expected`)}function Zi(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function Xi(t){const e=typeof t=="string"?t.split(""):t,n=e.length;Wi("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(Fn(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(Fn(s),s.map(i=>{fn("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function Yi(t=""){return fn("join",t),{encode:e=>(Wi("join.decode",e),e.join(t)),decode:e=>(fn("join.decode",e),e.split(t))}}function Ji(t,e,n){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(Fn(t),!t.length)return[];let r=0;const s=[],i=Array.from(t,a=>{if(zn(a),a<0||a>=e)throw new Error(`invalid integer: ${a}`);return a}),o=i.length;for(;;){let a=0,c=!0;for(let u=r;u<o;u++){const l=i[u],h=e*a,g=h+l;if(!Number.isSafeInteger(g)||h/e!==a||g-l!==h)throw new Error("convertRadix: carry overflow");const b=g/n;a=g%n;const p=Math.floor(b);if(i[u]=p,!Number.isSafeInteger(p)||p*n+a!==g)throw new Error("convertRadix: carry overflow");if(c)p?c=!1:r=u;else continue}if(s.push(a),c)break}for(let a=0;a<t.length-1&&t[a]===0;a++)s.push(0);return s.reverse()}const Qi=(t,e)=>e===0?t:Qi(e,t%e),Hn=(t,e)=>t+(e-Qi(t,e)),Kn=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function Yr(t,e,n,r){if(Fn(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Hn(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Hn(e,n)}`);let s=0,i=0;const o=Kn[e],a=Kn[n]-1,c=[];for(const u of t){if(zn(u),u>=o)throw new Error(`convertRadix2: invalid data word=${u} from=${e}`);if(s=s<<e|u,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const l=Kn[i];if(l===void 0)throw new Error("invalid carry");s&=l-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function Ju(t){zn(t);const e=2**8;return{encode:n=>{if(!Zr(n))throw new Error("radix.encode input should be Uint8Array");return Ji(Array.from(n),e,t)},decode:n=>(Xr("radix.decode",n),Uint8Array.from(Ji(n,t,e)))}}function Qu(t,e=!1){if(zn(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Hn(8,t)>32||Hn(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Zr(n))throw new Error("radix2.encode input should be Uint8Array");return Yr(Array.from(n),8,t,!e)},decode:n=>(Xr("radix2.decode",n),Uint8Array.from(Yr(n,t,8,e)))}}function eo(t){return Yu(t),function(...e){try{return t.apply(null,e)}catch{}}}const Gn=(t=>Zi(Ju(58),Xi(t),Yi("")))("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Jr=Zi(Xi("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Yi("")),to=[996825010,642813549,513874426,1027748829,705979059];function hn(t){const e=t>>25;let n=(t&33554431)<<5;for(let r=0;r<to.length;r++)(e>>r&1)===1&&(n^=to[r]);return n}function no(t,e,n=1){const r=t.length;let s=1;for(let i=0;i<r;i++){const o=t.charCodeAt(i);if(o<33||o>126)throw new Error(`Invalid prefix (${t})`);s=hn(s)^o>>5}s=hn(s);for(let i=0;i<r;i++)s=hn(s)^t.charCodeAt(i)&31;for(let i of e)s=hn(s)^i;for(let i=0;i<6;i++)s=hn(s);return s^=n,Jr.encode(Yr([s%Kn[30]],30,5,!1))}function el(t){const e=t==="bech32"?1:734539939,n=Qu(5),r=n.decode,s=n.encode,i=eo(r);function o(h,g,b=90){fn("bech32.encode prefix",h),Zr(g)&&(g=Array.from(g)),Xr("bech32.encode",g);const p=h.length;if(p===0)throw new TypeError(`Invalid prefix length ${p}`);const y=p+7+g.length;if(b!==!1&&y>b)throw new TypeError(`Length ${y} exceeds limit ${b}`);const w=h.toLowerCase(),S=no(w,g,e);return`${w}1${Jr.encode(g)}${S}`}function a(h,g=90){fn("bech32.decode input",h);const b=h.length;if(b<8||g!==!1&&b>g)throw new TypeError(`invalid string length: ${b} (${h}). Expected (8..${g})`);const p=h.toLowerCase();if(h!==p&&h!==h.toUpperCase())throw new Error("String must be lowercase or uppercase");const y=p.lastIndexOf("1");if(y===0||y===-1)throw new Error('Letter "1" must be present between prefix and data only');const w=p.slice(0,y),S=p.slice(y+1);if(S.length<6)throw new Error("Data must be at least 6 characters long");const A=Jr.decode(S).slice(0,-6),v=no(w,A,e);if(!S.endsWith(v))throw new Error(`Invalid checksum in ${h}: expected "${v}"`);return{prefix:w,words:A}}const c=eo(a);function u(h){const{prefix:g,words:b}=a(h,!1);return{prefix:g,words:b,bytes:r(b)}}function l(h,g){return o(h,s(g))}return{encode:o,decode:a,encodeFromBytes:l,decodeToBytes:u,decodeUnsafe:c,fromWords:r,fromWordsUnsafe:i,toWords:s}}const qn=el("bech32"),Wn=t=>Gn.encode(t),Qr=t=>Gn.decode(t);function we(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const es=8192;function le(t){if(t.length<es)return btoa(String.fromCharCode(...t));let e="";for(var n=0;n<t.length;n+=es){const r=t.slice(n,n+es);e+=String.fromCharCode(...r)}return btoa(e)}function ts(t){const e=t.startsWith("0x")?t.slice(2):t,n=e.length%2===0?e:`0${e}`,r=n.match(/[0-9a-fA-F]{2}/g)?.map(s=>parseInt(s,16))??[];if(r.length!==n.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(r)}function pn(t){return t.reduce((e,n)=>e+n.toString(16).padStart(2,"0"),"")}function tl(t,e){return Array.from({length:Math.ceil(t.length/e)},(n,r)=>t.slice(r*e,(r+1)*e))}function Zn(t){const e=[];let n=0;if(t===0)return[0];for(;t>0;)e[n]=t&127,(t>>=7)&&(e[n]|=128),n+=1;return e}function nl(t){let e=0,n=0,r=0;for(;;){const s=t[r];if(r+=1,e|=(s&127)<<n,(s&128)===0)break;n+=7}return{value:e,length:r}}let rl=class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength)}shift(e){return this.bytePosition+=e,this}read8(){const e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){const e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){const e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){const e=this.read32(),r=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+r).toString(10)}read128(){const e=BigInt(this.read64()),r=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+r).toString(10)}read256(){const e=BigInt(this.read128()),r=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+r).toString(10)}readBytes(e){const n=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,n,e);return this.shift(e),r}readULEB(){const e=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,e),{value:r,length:s}=nl(n);return this.shift(s),r}readVec(e){const n=this.readULEB(),r=[];for(let s=0;s<n;s++)r.push(e(this,s,n));return r}};function sl(t,e){switch(e){case"base58":return Wn(t);case"base64":return le(t);case"hex":return pn(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function il(t,e=["<",">"]){const[n,r]=e,s=[];let i="",o=0;for(let a=0;a<t.length;a++){const c=t[a];if(c===n&&o++,c===r&&o--,o===0&&c===","){s.push(i.trim()),i="";continue}i+=c}return s.push(i.trim()),s}let ol=class{constructor({initialSize:e=1024,maxSize:n=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=n,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const n=this.bytePosition+e;if(n>this.size){const r=Math.min(this.maxSize,this.size+this.allocateSize);if(n>r)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${n}`);this.size=r;const s=new ArrayBuffer(this.size);new Uint8Array(s).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(s)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return ns(BigInt(e),8).forEach(n=>this.write8(n)),this}write128(e){return ns(BigInt(e),16).forEach(n=>this.write8(n)),this}write256(e){return ns(BigInt(e),32).forEach(n=>this.write8(n)),this}writeULEB(e){return Zn(e).forEach(n=>this.write8(n)),this}writeVec(e,n){return this.writeULEB(e.length),Array.from(e).forEach((r,s)=>n(this,r,s,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return sl(this.toBytes(),e)}};function ns(t,e){const n=new Uint8Array(e);let r=0;for(;t>0;)n[r]=Number(t%BigInt(256)),t=t/BigInt(256),r+=1;return n}var ro=t=>{throw TypeError(t)},so=(t,e,n)=>e.has(t)||ro("Cannot "+n),Re=(t,e,n)=>(so(t,e,"read from private field"),n?n.call(t):e.get(t)),Xn=(t,e,n)=>e.has(t)?ro("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Yn=(t,e,n,r)=>(so(t,e,"write to private field"),e.set(t,n),n),qt,gn,Jn,yt;const al=class Yc{constructor(e){Xn(this,qt),Xn(this,gn),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Yn(this,qt,e.write),Yn(this,gn,e.serialize??((n,r)=>{const s=new ol({initialSize:this.serializedSize(n)??void 0,...r});return Re(this,qt).call(this,n,s),s.toBytes()})),this.validate=e.validate??(()=>{})}write(e,n){this.validate(e),Re(this,qt).call(this,e,n)}serialize(e,n){return this.validate(e),new cl(this,Re(this,gn).call(this,e,n))}parse(e){const n=new rl(e);return this.read(n)}fromHex(e){return this.parse(ts(e))}fromBase58(e){return this.parse(Qr(e))}fromBase64(e){return this.parse(we(e))}transform({name:e,input:n,output:r,validate:s}){return new Yc({name:e??this.name,read:i=>r?r(this.read(i)):this.read(i),write:(i,o)=>Re(this,qt).call(this,n?n(i):i,o),serializedSize:i=>this.serializedSize(n?n(i):i),serialize:(i,o)=>Re(this,gn).call(this,n?n(i):i,o),validate:i=>{s?.(i),this.validate(n?n(i):i)}})}};qt=new WeakMap,gn=new WeakMap;let Ve=al;const io=Symbol.for("@mysten/serialized-bcs");function rs(t){return!!t&&typeof t=="object"&&t[io]===!0}let cl=class{constructor(e,n){Xn(this,Jn),Xn(this,yt),Yn(this,Jn,e),Yn(this,yt,n)}get[io](){return!0}toBytes(){return Re(this,yt)}toHex(){return pn(Re(this,yt))}toBase64(){return le(Re(this,yt))}toBase58(){return Wn(Re(this,yt))}parse(){return Re(this,Jn).parse(Re(this,yt))}};Jn=new WeakMap,yt=new WeakMap;function Qn({size:t,...e}){return new Ve({...e,serializedSize:()=>t})}function ss({readMethod:t,writeMethod:e,...n}){return Qn({...n,read:r=>r[t](),write:(r,s)=>s[e](r),validate:r=>{if(r<0||r>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${r}. Expected value in range 0-${n.maxValue}`);n.validate?.(r)}})}function is({readMethod:t,writeMethod:e,...n}){return Qn({...n,read:r=>r[t](),write:(r,s)=>s[e](BigInt(r)),validate:r=>{const s=BigInt(r);if(s<0||s>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${s}. Expected value in range 0-${n.maxValue}`);n.validate?.(s)}})}function ul({serialize:t,...e}){const n=new Ve({...e,serialize:t,write:(r,s)=>{for(const i of n.serialize(r).toBytes())s.write8(i)}});return n}function ll({toBytes:t,fromBytes:e,...n}){return new Ve({...n,read:r=>{const s=r.readULEB(),i=r.readBytes(s);return e(i)},write:(r,s)=>{const i=t(r);s.writeULEB(i.length);for(let o=0;o<i.length;o++)s.write8(i[o])},serialize:r=>{const s=t(r),i=Zn(s.length),o=new Uint8Array(i.length+s.length);return o.set(i,0),o.set(s,i.length),o},validate:r=>{if(typeof r!="string")throw new TypeError(`Invalid ${n.name} value: ${r}. Expected string`);n.validate?.(r)}})}function dl(t){let e=null;function n(){return e||(e=t()),e}return new Ve({name:"lazy",read:r=>n().read(r),serializedSize:r=>n().serializedSize(r),write:(r,s)=>n().write(r,s),serialize:(r,s)=>n().serialize(r,s).toBytes()})}let fl=class extends Ve{constructor({name:e,fields:n,...r}){const s=Object.entries(n);super({name:e,serializedSize:i=>{let o=0;for(const[a,c]of s){const u=c.serializedSize(i[a]);if(u==null)return null;o+=u}return o},read:i=>{const o={};for(const[a,c]of s)o[a]=c.read(i);return o},write:(i,o)=>{for(const[a,c]of s)c.write(i[a],o)},...r,validate:i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)}})}},hl=class extends Ve{constructor({fields:e,...n}){const r=Object.entries(e);super({read:s=>{const i=s.readULEB(),o=r[i];if(!o)throw new TypeError(`Unknown value ${i} for enum ${name}`);const[a,c]=o;return{[a]:c?.read(s)??!0,$kind:a}},write:(s,i)=>{const[o,a]=Object.entries(s).filter(([c])=>Object.hasOwn(e,c))[0];for(let c=0;c<r.length;c++){const[u,l]=r[c];if(u===o){i.writeULEB(c),l?.write(a,i);return}}},...n,validate:s=>{if(n?.validate?.(s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`);const i=Object.keys(s).filter(a=>s[a]!==void 0&&Object.hasOwn(e,a));if(i.length!==1)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${name}}`);const[o]=i;if(!Object.hasOwn(e,o))throw new TypeError(`Invalid enum variant ${o}`)}})}},pl=class extends Ve{constructor({fields:e,name:n,...r}){super({name:n??`(${e.map(s=>s.name).join(", ")})`,serializedSize:s=>{let i=0;for(let o=0;o<e.length;o++){const a=e[o].serializedSize(s[o]);if(a==null)return null;i+=a}return i},read:s=>{const i=[];for(const o of e)i.push(o.read(s));return i},write:(s,i)=>{for(let o=0;o<e.length;o++)e[o].write(s[o],i)},...r,validate:s=>{if(r?.validate?.(s),!Array.isArray(s))throw new TypeError(`Expected array, found ${typeof s}`);if(s.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${s.length}`)}})}};function gl(t,e,n){return new Ve({read:r=>{const s=new Array(t);for(let i=0;i<t;i++)s[i]=e.read(r);return s},write:(r,s)=>{for(const i of r)e.write(i,s)},...n,name:n?.name??`${e.name}[${t}]`,validate:r=>{if(n?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})}function ml(t){return d.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})}function yl(t,e){return new Ve({read:n=>{const r=n.readULEB(),s=new Array(r);for(let i=0;i<r;i++)s[i]=t.read(n);return s},write:(n,r)=>{r.writeULEB(n.length);for(const s of n)t.write(s,r)},...e,name:e?.name??`vector<${t.name}>`,validate:n=>{if(e?.validate?.(n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`)}})}function bl(t,e){return d.vector(d.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:n=>[...n.entries()],output:n=>{const r=new Map;for(const[s,i]of n)r.set(s,i);return r}})}const d={u8(t){return ss({readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t,name:t?.name??"u8"})},u16(t){return ss({readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t,name:t?.name??"u16"})},u32(t){return ss({readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t,name:t?.name??"u32"})},u64(t){return is({readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t,name:t?.name??"u64"})},u128(t){return is({readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t,name:t?.name??"u128"})},u256(t){return is({readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t,name:t?.name??"u256"})},bool(t){return Qn({size:1,read:e=>e.read8()===1,write:(e,n)=>n.write8(e?1:0),...t,name:t?.name??"bool",validate:e=>{if(t?.validate?.(e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return ul({read:e=>e.readULEB(),serialize:e=>Uint8Array.from(Zn(e)),...t,name:t?.name??"uleb128"})},bytes(t,e){return Qn({size:t,read:n=>n.readBytes(t),write:(n,r)=>{const s=new Uint8Array(n);for(let i=0;i<t;i++)r.write8(s[i]??0)},...e,name:e?.name??`bytes[${t}]`,validate:n=>{if(e?.validate?.(n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},byteVector(t){return new Ve({read:e=>{const n=e.readULEB();return e.readBytes(n)},write:(e,n)=>{const r=new Uint8Array(e);n.writeULEB(r.length);for(let s=0;s<r.length;s++)n.write8(r[s]??0)},...t,name:t?.name??"vector<u8>",serializedSize:e=>{const n="length"in e?e.length:null;return n==null?null:Zn(n).length+n},validate:e=>{if(t?.validate?.(e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)}})},string(t){return ll({toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t,name:t?.name??"string"})},fixedArray:gl,option:ml,vector:yl,tuple(t,e){return new pl({fields:t,...e})},struct(t,e,n){return new fl({name:t,fields:e,...n})},enum(t,e,n){return new hl({name:t,fields:e,...n})},map:bl,lazy(t){return dl(t)}},wl=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),ae=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),I=new Uint32Array(32);function bt(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=I[2*t],u=I[2*t+1],l=I[2*e],h=I[2*e+1],g=I[2*n],b=I[2*n+1],p=I[2*r],y=I[2*r+1],w=_r(c,l,o);u=Br(w,u,h,a),c=w|0,{Dh:y,Dl:p}={Dh:y^u,Dl:p^c},{Dh:y,Dl:p}={Dh:cu(y,p),Dl:uu(y)},{h:b,l:g}=je(b,g,y,p),{Bh:h,Bl:l}={Bh:h^b,Bl:l^g},{Bh:h,Bl:l}={Bh:dt(h,l,24),Bl:ft(h,l,24)},I[2*t]=c,I[2*t+1]=u,I[2*e]=l,I[2*e+1]=h,I[2*n]=g,I[2*n+1]=b,I[2*r]=p,I[2*r+1]=y}function wt(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=I[2*t],u=I[2*t+1],l=I[2*e],h=I[2*e+1],g=I[2*n],b=I[2*n+1],p=I[2*r],y=I[2*r+1],w=_r(c,l,o);u=Br(w,u,h,a),c=w|0,{Dh:y,Dl:p}={Dh:y^u,Dl:p^c},{Dh:y,Dl:p}={Dh:dt(y,p,16),Dl:ft(y,p,16)},{h:b,l:g}=je(b,g,y,p),{Bh:h,Bl:l}={Bh:h^b,Bl:l^g},{Bh:h,Bl:l}={Bh:un(h,l,63),Bl:ln(h,l,63)},I[2*t]=c,I[2*t+1]=u,I[2*e]=l,I[2*e+1]=h,I[2*n]=g,I[2*n+1]=b,I[2*r]=p,I[2*r+1]=y}function El(t,e={},n,r,s){if(Xe(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class Sl extends $r{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Xe(e),Xe(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=Bn(this.buffer)}update(e){Kt(this),e=lt(e),Ye(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(Gt(s),this.compress(s,0,!1),Gt(s),this.pos=0);const u=Math.min(n-this.pos,i-c),l=o+c;if(u===n&&!(l%4)&&c+u<i){const h=new Uint32Array(a,l,Math.floor((i-c)/4));Gt(h);for(let g=0;c+n<i;g+=s.length,c+=n)this.length+=n,this.compress(h,g,!1);Gt(h);continue}r.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){Kt(this),ui(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,ut(this.buffer.subarray(n)),Gt(r),this.compress(r,0,!0),Gt(r);const s=Bn(e);this.get().forEach((i,o)=>s[o]=Je(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class vl extends Sl{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=ae[0]|0,this.v0h=ae[1]|0,this.v1l=ae[2]|0,this.v1h=ae[3]|0,this.v2l=ae[4]|0,this.v2h=ae[5]|0,this.v3l=ae[6]|0,this.v3h=ae[7]|0,this.v4l=ae[8]|0,this.v4h=ae[9]|0,this.v5l=ae[10]|0,this.v5h=ae[11]|0,this.v6l=ae[12]|0,this.v6h=ae[13]|0,this.v7l=ae[14]|0,this.v7h=ae[15]|0,El(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=lt(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=lt(i);const a=Bn(i);this.v4l^=Je(a[0]),this.v4h^=Je(a[1]),this.v5l^=Je(a[2]),this.v5h^=Je(a[3])}if(s!==void 0){s=lt(s);const a=Bn(s);this.v6l^=Je(a[0]),this.v6h^=Je(a[1]),this.v7l^=Je(a[2]),this.v7h^=Je(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:u,v4h:l,v5l:h,v5h:g,v6l:b,v6h:p,v7l:y,v7h:w}=this;return[e,n,r,s,i,o,a,c,u,l,h,g,b,p,y,w]}set(e,n,r,s,i,o,a,c,u,l,h,g,b,p,y,w){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=l|0,this.v5l=h|0,this.v5h=g|0,this.v6l=b|0,this.v6h=p|0,this.v7l=y|0,this.v7h=w|0}compress(e,n,r){this.get().forEach((c,u)=>I[u]=c),I.set(ae,16);let{h:s,l:i}=wi(BigInt(this.length));I[24]=ae[8]^i,I[25]=ae[9]^s,r&&(I[28]=~I[28],I[29]=~I[29]);let o=0;const a=wl;for(let c=0;c<12;c++)bt(0,4,8,12,e,n+2*a[o++]),wt(0,4,8,12,e,n+2*a[o++]),bt(1,5,9,13,e,n+2*a[o++]),wt(1,5,9,13,e,n+2*a[o++]),bt(2,6,10,14,e,n+2*a[o++]),wt(2,6,10,14,e,n+2*a[o++]),bt(3,7,11,15,e,n+2*a[o++]),wt(3,7,11,15,e,n+2*a[o++]),bt(0,5,10,15,e,n+2*a[o++]),wt(0,5,10,15,e,n+2*a[o++]),bt(1,6,11,12,e,n+2*a[o++]),wt(1,6,11,12,e,n+2*a[o++]),bt(2,7,8,13,e,n+2*a[o++]),wt(2,7,8,13,e,n+2*a[o++]),bt(3,4,9,14,e,n+2*a[o++]),wt(3,4,9,14,e,n+2*a[o++]);this.v0l^=I[0]^I[16],this.v0h^=I[1]^I[17],this.v1l^=I[2]^I[18],this.v1h^=I[3]^I[19],this.v2l^=I[4]^I[20],this.v2h^=I[5]^I[21],this.v3l^=I[6]^I[22],this.v3h^=I[7]^I[23],this.v4l^=I[8]^I[24],this.v4h^=I[9]^I[25],this.v5l^=I[10]^I[26],this.v5h^=I[11]^I[27],this.v6l^=I[12]^I[28],this.v6h^=I[13]^I[29],this.v7l^=I[14]^I[30],this.v7h^=I[15]^I[31],ut(I)}destroy(){this.destroyed=!0,ut(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const er=ru(t=>new vl(t)),Ol=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Il=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,Tl=235;function xl(t){return t.length>Tl?!1:t.includes("@")?Ol.test(t):Il.test(t)}const Al=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,kl=/^\d+$/,Cl=64,oo="/",ao=t=>{const e=t.split(oo);if(e.length<2||e.length>3)return!1;const[n,r,s]=e;return s!==void 0&&!kl.test(s)||!xl(n)?!1:Al.test(r)&&r.length<Cl},jl=t=>{const e=t.split(/::|<|>|,/);for(const n of e)if(n.includes(oo)&&!ao(n))return!1;return!0},tr=32;function co(t){return Rl(t)&&$l(t)===tr}function ee(t,e=!1){let n=t.toLowerCase();return!e&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(tr*2,"0")}`}function mn(t,e=!1){return ee(t,e)}function Rl(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function $l(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}const _l=/^vector<(.+)>$/,Bl=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;let nr=class cn{static parseFromStr(e,n=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const r=e.match(_l);if(r)return{vector:cn.parseFromStr(r[1],n)};const s=e.match(Bl);if(s)return{struct:{address:n?ee(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:cn.parseStructTypeArgs(s[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,n=!1){return il(e).map(r=>cn.parseFromStr(r,n))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${cn.tagToString(e.vector)}>`;if("struct"in e){const n=e.struct,r=n.typeParams.map(cn.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}};function Ul(t){return d.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function Pl(t){return d.enum("Option",{None:null,Some:t})}const X=d.bytes(tr).transform({validate:t=>{const e=typeof t=="string"?t:pn(t);if(!e||!co(ee(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?ts(ee(t)):t,output:t=>ee(pn(t))}),$e=d.vector(d.u8()).transform({name:"ObjectDigest",input:t=>Qr(t),output:t=>Wn(new Uint8Array(t)),validate:t=>{if(Qr(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Oe=d.struct("SuiObjectRef",{objectId:X,version:d.u64(),digest:$e}),uo=d.struct("SharedObjectRef",{objectId:X,initialSharedVersion:d.u64(),mutable:d.bool()}),lo=d.enum("ObjectArg",{ImmOrOwnedObject:Oe,SharedObject:uo,Receiving:Oe}),At=d.enum("Owner",{AddressOwner:X,ObjectOwner:X,Shared:d.struct("Shared",{initialSharedVersion:d.u64()}),Immutable:null,ConsensusAddressOwner:d.struct("ConsensusAddressOwner",{owner:X,startVersion:d.u64()})}),fo=d.enum("CallArg",{Pure:d.struct("Pure",{bytes:d.vector(d.u8()).transform({input:t=>typeof t=="string"?we(t):t,output:t=>le(new Uint8Array(t))})}),Object:lo}),os=d.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:d.lazy(()=>os),struct:d.lazy(()=>bo),u16:null,u32:null,u256:null}),as=os.transform({input:t=>typeof t=="string"?nr.parseFromStr(t,!0):t,output:t=>nr.tagToString(t)}),ze=d.enum("Argument",{GasCoin:null,Input:d.u16(),Result:d.u16(),NestedResult:d.tuple([d.u16(),d.u16()])}),ho=d.struct("ProgrammableMoveCall",{package:X,module:d.string(),function:d.string(),typeArguments:d.vector(as),arguments:d.vector(ze)}),po=d.enum("Command",{MoveCall:ho,TransferObjects:d.struct("TransferObjects",{objects:d.vector(ze),address:ze}),SplitCoins:d.struct("SplitCoins",{coin:ze,amounts:d.vector(ze)}),MergeCoins:d.struct("MergeCoins",{destination:ze,sources:d.vector(ze)}),Publish:d.struct("Publish",{modules:d.vector(d.vector(d.u8()).transform({input:t=>typeof t=="string"?we(t):t,output:t=>le(new Uint8Array(t))})),dependencies:d.vector(X)}),MakeMoveVec:d.struct("MakeMoveVec",{type:Pl(as).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:d.vector(ze)}),Upgrade:d.struct("Upgrade",{modules:d.vector(d.vector(d.u8()).transform({input:t=>typeof t=="string"?we(t):t,output:t=>le(new Uint8Array(t))})),dependencies:d.vector(X),package:X,ticket:ze})}),go=d.struct("ProgrammableTransaction",{inputs:d.vector(fo),commands:d.vector(po)}),mo=d.enum("TransactionKind",{ProgrammableTransaction:go,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),yo=d.enum("TransactionExpiration",{None:null,Epoch:Ul()}),bo=d.struct("StructTag",{address:X,module:d.string(),name:d.string(),typeParams:d.vector(os)}),wo=d.struct("GasData",{payment:d.vector(Oe),owner:X,price:d.u64(),budget:d.u64()}),Eo=d.struct("TransactionDataV1",{kind:mo,sender:X,gasData:wo,expiration:yo}),So=d.enum("TransactionData",{V1:Eo}),vo=d.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Oo=d.enum("IntentVersion",{V0:null}),Io=d.enum("AppId",{Sui:null}),To=d.struct("Intent",{scope:vo,version:Oo,appId:Io});function xo(t){return d.struct(`IntentMessage<${t.name}>`,{intent:To,value:t})}const Ao=d.enum("CompressedSignature",{ED25519:d.fixedArray(64,d.u8()),Secp256k1:d.fixedArray(64,d.u8()),Secp256r1:d.fixedArray(64,d.u8()),ZkLogin:d.vector(d.u8()),Passkey:d.vector(d.u8())}),ko=d.enum("PublicKey",{ED25519:d.fixedArray(32,d.u8()),Secp256k1:d.fixedArray(33,d.u8()),Secp256r1:d.fixedArray(33,d.u8()),ZkLogin:d.vector(d.u8()),Passkey:d.fixedArray(33,d.u8())}),Co=d.struct("MultiSigPkMap",{pubKey:ko,weight:d.u8()}),jo=d.struct("MultiSigPublicKey",{pk_map:d.vector(Co),threshold:d.u16()}),Ml=d.struct("MultiSig",{sigs:d.vector(Ao),bitmap:d.u16(),multisig_pk:jo}),Nl=d.vector(d.u8()).transform({input:t=>typeof t=="string"?we(t):t,output:t=>le(new Uint8Array(t))}),Ro=d.struct("SenderSignedTransaction",{intentMessage:xo(So),txSignatures:d.vector(Nl)}),Dl=d.vector(Ro,{name:"SenderSignedData"}),Ll=d.struct("PasskeyAuthenticator",{authenticatorData:d.vector(d.u8()),clientDataJson:d.string(),userSignature:d.vector(d.u8())}),Vl=d.enum("PackageUpgradeError",{UnableToFetchPackage:d.struct("UnableToFetchPackage",{packageId:X}),NotAPackage:d.struct("NotAPackage",{objectId:X}),IncompatibleUpgrade:null,DigestDoesNotMatch:d.struct("DigestDoesNotMatch",{digest:d.vector(d.u8())}),UnknownUpgradePolicy:d.struct("UnknownUpgradePolicy",{policy:d.u8()}),PackageIDDoesNotMatch:d.struct("PackageIDDoesNotMatch",{packageId:X,ticketId:X})}),zl=d.struct("ModuleId",{address:X,name:d.string()}),$o=d.struct("MoveLocation",{module:zl,function:d.u16(),instruction:d.u16(),functionName:d.option(d.string())}),Fl=d.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:d.struct("IndexOutOfBounds",{idx:d.u16()}),SecondaryIndexOutOfBounds:d.struct("SecondaryIndexOutOfBounds",{resultIdx:d.u16(),secondaryIdx:d.u16()}),InvalidResultArity:d.struct("InvalidResultArity",{resultIdx:d.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Hl=d.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Kl=d.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:d.struct("MoveObjectTooBig",{objectSize:d.u64(),maxObjectSize:d.u64()}),MovePackageTooBig:d.struct("MovePackageTooBig",{objectSize:d.u64(),maxObjectSize:d.u64()}),CircularObjectOwnership:d.struct("CircularObjectOwnership",{object:X}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:d.option($o),MoveAbort:d.tuple([$o,d.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:d.struct("CommandArgumentError",{argIdx:d.u16(),kind:Fl}),TypeArgumentError:d.struct("TypeArgumentError",{argumentIdx:d.u16(),kind:Hl}),UnusedValueWithoutDrop:d.struct("UnusedValueWithoutDrop",{resultIdx:d.u16(),secondaryIdx:d.u16()}),InvalidPublicFunctionReturnType:d.struct("InvalidPublicFunctionReturnType",{idx:d.u16()}),InvalidTransferObject:null,EffectsTooLarge:d.struct("EffectsTooLarge",{currentSize:d.u64(),maxSize:d.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:d.struct("PackageUpgradeError",{upgradeError:Vl}),WrittenObjectsTooLarge:d.struct("WrittenObjectsTooLarge",{currentSize:d.u64(),maxSize:d.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:d.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:d.vector(X)}),AddressDeniedForCoin:d.struct("AddressDeniedForCoin",{address:X,coinType:d.string()}),CoinTypeGlobalPause:d.struct("CoinTypeGlobalPause",{coinType:d.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),_o=d.enum("ExecutionStatus",{Success:null,Failed:d.struct("ExecutionFailed",{error:Kl,command:d.option(d.u64())})}),Bo=d.struct("GasCostSummary",{computationCost:d.u64(),storageCost:d.u64(),storageRebate:d.u64(),nonRefundableStorageFee:d.u64()}),Gl=d.struct("TransactionEffectsV1",{status:_o,executedEpoch:d.u64(),gasUsed:Bo,modifiedAtVersions:d.vector(d.tuple([X,d.u64()])),sharedObjects:d.vector(Oe),transactionDigest:$e,created:d.vector(d.tuple([Oe,At])),mutated:d.vector(d.tuple([Oe,At])),unwrapped:d.vector(d.tuple([Oe,At])),deleted:d.vector(Oe),unwrappedThenDeleted:d.vector(Oe),wrapped:d.vector(Oe),gasObject:d.tuple([Oe,At]),eventsDigest:d.option($e),dependencies:d.vector($e)}),cs=d.tuple([d.u64(),$e]),ql=d.enum("ObjectIn",{NotExist:null,Exist:d.tuple([cs,At])}),Wl=d.enum("ObjectOut",{NotExist:null,ObjectWrite:d.tuple([$e,At]),PackageWrite:cs}),Zl=d.enum("IDOperation",{None:null,Created:null,Deleted:null}),Xl=d.struct("EffectsObjectChange",{inputState:ql,outputState:Wl,idOperation:Zl}),Yl=d.enum("UnchangedSharedKind",{ReadOnlyRoot:cs,MutateDeleted:d.u64(),ReadDeleted:d.u64(),Cancelled:d.u64(),PerEpochConfig:null}),Jl=d.struct("TransactionEffectsV2",{status:_o,executedEpoch:d.u64(),gasUsed:Bo,transactionDigest:$e,gasObjectIndex:d.option(d.u32()),eventsDigest:d.option($e),dependencies:d.vector($e),lamportVersion:d.u64(),changedObjects:d.vector(d.tuple([X,Xl])),unchangedSharedObjects:d.vector(d.tuple([X,Yl])),auxDataDigest:d.option($e)}),Ql=d.enum("TransactionEffects",{V1:Gl,V2:Jl});function yn(t){switch(t){case"u8":return d.u8();case"u16":return d.u16();case"u32":return d.u32();case"u64":return d.u64();case"u128":return d.u128();case"u256":return d.u256();case"bool":return d.bool();case"string":return d.string();case"id":case"address":return X}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[n,r]=e.slice(1);return n==="vector"?d.vector(yn(r)):d.option(yn(r))}throw new Error(`Invalid Pure type name: ${t}`)}const N={...d,U8:d.u8(),U16:d.u16(),U32:d.u32(),U64:d.u64(),U128:d.u128(),U256:d.u256(),ULEB128:d.uleb128(),Bool:d.bool(),String:d.string(),Address:X,AppId:Io,Argument:ze,CallArg:fo,Command:po,CompressedSignature:Ao,GasData:wo,Intent:To,IntentMessage:xo,IntentScope:vo,IntentVersion:Oo,MultiSig:Ml,MultiSigPkMap:Co,MultiSigPublicKey:jo,ObjectArg:lo,ObjectDigest:$e,Owner:At,PasskeyAuthenticator:Ll,ProgrammableMoveCall:ho,ProgrammableTransaction:go,PublicKey:ko,SenderSignedData:Dl,SenderSignedTransaction:Ro,SharedObjectRef:uo,StructTag:bo,SuiObjectRef:Oe,TransactionData:So,TransactionDataV1:Eo,TransactionEffects:Ql,TransactionExpiration:yo,TransactionKind:mo,TypeTag:as};function Uo(t,e){return N.IntentMessage(N.fixedArray(e.length,N.u8())).serialize({intent:{scope:{[t]:!0},version:{V0:!0},appId:{Sui:!0}},value:e}).toBytes()}const us={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5,Passkey:6},ed={ED25519:32,Secp256k1:33,Secp256r1:33,Passkey:33},Po={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin",6:"Passkey"};class Mo extends $r{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,ci(e);const r=lt(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),ut(i)}update(e){return Kt(this),this.iHash.update(e),this}digestInto(e){Kt(this),Ye(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const rr=(t,e,n)=>new Mo(t,e).update(n).digest();rr.create=(t,e)=>new Mo(t,e);function No(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}let td=class{equals(e){return No(this.toRawBytes(),e.toRawBytes())}toBase64(){return le(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return le(e)}verifyWithIntent(e,n,r){const s=Uo(r,e),i=er(s,{dkLen:32});return this.verify(i,n)}verifyPersonalMessage(e,n){return this.verifyWithIntent(N.vector(N.u8()).serialize(e).toBytes(),n,"PersonalMessage")}verifyTransaction(e,n){return this.verifyWithIntent(e,n,"TransactionData")}verifyAddress(e){return this.toSuiAddress()===e}toSuiBytes(){const e=this.toRawBytes(),n=new Uint8Array(e.length+1);return n.set([this.flag()]),n.set(e,1),n}toSuiAddress(){return ee(Pn(er(this.toSuiBytes(),{dkLen:32})).slice(0,tr*2))}};function nd(t){const e=we(t),n=Po[e[0]];switch(n){case"ED25519":case"Secp256k1":case"Secp256r1":const r=ed[n],s=e.slice(1,e.length-r),i=e.slice(1+s.length);return{serializedSignature:t,signatureScheme:n,signature:s,publicKey:i,bytes:e};default:throw new Error("Unsupported signature scheme")}}const rd="/";function Wt(t){return t.includes(rd)||t.includes("@")||t.includes(".sui")}function sd(t){const e=new Set,n=new Set;for(const r of t.commands)switch(r.$kind){case"MakeMoveVec":r.MakeMoveVec.type&&Do([r.MakeMoveVec.type]).forEach(o=>{n.add(o)});break;case"MoveCall":const s=r.MoveCall,i=s.package.split("::")[0];if(Wt(i)){if(!ao(i))throw new Error(`Invalid package name: ${i}`);e.add(i)}Do(s.typeArguments??[]).forEach(o=>{n.add(o)});break}return{packages:[...e],types:[...n]}}function id(t,e){for(const n of t.commands){if(n.MakeMoveVec?.type){if(!Wt(n.MakeMoveVec.type))continue;if(!e.types[n.MakeMoveVec.type])throw new Error(`No resolution found for type: ${n.MakeMoveVec.type}`);n.MakeMoveVec.type=e.types[n.MakeMoveVec.type].type}const r=n.MoveCall;if(!r)continue;const s=r.package.split("::"),i=s[0];if(Wt(i)&&!e.packages[i])throw new Error(`No address found for package: ${i}`);Wt(i)&&(s[0]=e.packages[i].package,r.package=s.join("::"));const o=r.typeArguments;if(o){for(let a=0;a<o.length;a++)if(Wt(o[a])){if(!e.types[o[a]])throw new Error(`No resolution found for type: ${o[a]}`);o[a]=e.types[o[a]].type}r.typeArguments=o}}}function Do(t){const e=new Set;for(const n of t)if(Wt(n)){if(!jl(n))throw new Error(`Invalid type with names: ${n}`);e.add(n)}return e}var ls;function od(t){return{lang:t?.lang??ls?.lang,message:t?.message,abortEarly:t?.abortEarly??ls?.abortEarly,abortPipeEarly:t?.abortPipeEarly??ls?.abortPipeEarly}}var ad;function cd(t){return ad?.get(t)}var ud;function ld(t){return ud?.get(t)}var dd;function fd(t,e){return dd?.get(t)?.get(e)}function Lo(t){const e=typeof t;return e==="string"?`"${t}"`:e==="number"||e==="bigint"||e==="boolean"?`${t}`:e==="object"||e==="function"?(t&&Object.getPrototypeOf(t)?.constructor?.name)??"null":e}function Ee(t,e,n,r,s){const i=s&&"input"in s?s.input:n.value,o=s?.expected??t.expects??null,a=s?.received??Lo(i),c={kind:t.kind,type:t.type,input:i,expected:o,received:a,message:`Invalid ${e}: ${o?`Expected ${o} but r`:"R"}eceived ${a}`,requirement:t.requirement,path:s?.path,issues:s?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},u=t.kind==="schema",l=s?.message??t.message??fd(t.reference,c.lang)??(u?ld(c.lang):null)??r.message??cd(c.lang);l&&(c.message=typeof l=="function"?l(c):l),u&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function hd(t,e){return Object.hasOwn(t,e)&&e!=="__proto__"&&e!=="prototype"&&e!=="constructor"}var pd=class extends Error{issues;constructor(t){super(t[0].message),this.name="ValiError",this.issues=t}};function kt(t,e){return{kind:"validation",type:"check",reference:kt,async:!1,expects:null,requirement:t,message:e,_run(n,r){return n.typed&&!this.requirement(n.value)&&Ee(this,"input",n,r),n}}}function G(t){return{kind:"validation",type:"integer",reference:G,async:!1,expects:null,requirement:Number.isInteger,message:t,_run(e,n){return e.typed&&!this.requirement(e.value)&&Ee(this,"integer",e,n),e}}}function Ct(t){return{kind:"transformation",type:"transform",reference:Ct,async:!1,operation:t,_run(e){return e.value=this.operation(e.value),e}}}function ds(t,e,n){return typeof t.default=="function"?t.default(e,n):t.default}function fs(t,e){return!t._run({typed:!1,value:e},{abortEarly:!0}).issues}function x(t,e){return{kind:"schema",type:"array",reference:x,expects:"Array",async:!1,item:t,message:e,_run(n,r){const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let i=0;i<s.length;i++){const o=s[i],a=this.item._run({typed:!1,value:o},r);if(a.issues){const c={type:"array",origin:"value",input:s,key:i,value:o};for(const u of a.issues)u.path?u.path.unshift(c):u.path=[c],n.issues?.push(u);if(n.issues||(n.issues=a.issues),r.abortEarly){n.typed=!1;break}}a.typed||(n.typed=!1),n.value.push(a.value)}}else Ee(this,"type",n,r);return n}}}function sr(t){return{kind:"schema",type:"bigint",reference:sr,expects:"bigint",async:!1,message:t,_run(e,n){return typeof e.value=="bigint"?e.typed=!0:Ee(this,"type",e,n),e}}}function Et(t){return{kind:"schema",type:"boolean",reference:Et,expects:"boolean",async:!1,message:t,_run(e,n){return typeof e.value=="boolean"?e.typed=!0:Ee(this,"type",e,n),e}}}function jt(t){return{kind:"schema",type:"lazy",reference:jt,expects:"unknown",async:!1,getter:t,_run(e,n){return this.getter(e.value)._run(e,n)}}}function k(t,e){return{kind:"schema",type:"literal",reference:k,expects:Lo(t),async:!1,literal:t,message:e,_run(n,r){return n.value===this.literal?n.typed=!0:Ee(this,"type",n,r),n}}}function _(t,...e){const n={kind:"schema",type:"nullable",reference:_,expects:`${t.expects} | null`,async:!1,wrapped:t,_run(r,s){return r.value===null&&("default"in this&&(r.value=ds(this,r,s)),r.value===null)?(r.typed=!0,r):this.wrapped._run(r,s)}};return 0 in e&&(n.default=e[0]),n}function St(t,...e){const n={kind:"schema",type:"nullish",reference:St,expects:`${t.expects} | null | undefined`,async:!1,wrapped:t,_run(r,s){return(r.value===null||r.value===void 0)&&("default"in this&&(r.value=ds(this,r,s)),r.value===null||r.value===void 0)?(r.typed=!0,r):this.wrapped._run(r,s)}};return 0 in e&&(n.default=e[0]),n}function H(t){return{kind:"schema",type:"number",reference:H,expects:"number",async:!1,message:t,_run(e,n){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:Ee(this,"type",e,n),e}}}function E(t,e){return{kind:"schema",type:"object",reference:E,expects:"Object",async:!1,entries:t,message:e,_run(n,r){const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const o=s[i],a=this.entries[i]._run({typed:!1,value:o},r);if(a.issues){const c={type:"object",origin:"value",input:s,key:i,value:o};for(const u of a.issues)u.path?u.path.unshift(c):u.path=[c],n.issues?.push(u);if(n.issues||(n.issues=a.issues),r.abortEarly){n.typed=!1;break}}a.typed||(n.typed=!1),(a.value!==void 0||i in s)&&(n.value[i]=a.value)}}else Ee(this,"type",n,r);return n}}}function W(t,...e){const n={kind:"schema",type:"optional",reference:W,expects:`${t.expects} | undefined`,async:!1,wrapped:t,_run(r,s){return r.value===void 0&&("default"in this&&(r.value=ds(this,r,s)),r.value===void 0)?(r.typed=!0,r):this.wrapped._run(r,s)}};return 0 in e&&(n.default=e[0]),n}function Rt(t,e,n){return{kind:"schema",type:"record",reference:Rt,expects:"Object",async:!1,key:t,value:e,message:n,_run(r,s){const i=r.value;if(i&&typeof i=="object"){r.typed=!0,r.value={};for(const o in i)if(hd(i,o)){const a=i[o],c=this.key._run({typed:!1,value:o},s);if(c.issues){const l={type:"object",origin:"key",input:i,key:o,value:a};for(const h of c.issues)h.path=[l],r.issues?.push(h);if(r.issues||(r.issues=c.issues),s.abortEarly){r.typed=!1;break}}const u=this.value._run({typed:!1,value:a},s);if(u.issues){const l={type:"object",origin:"value",input:i,key:o,value:a};for(const h of u.issues)h.path?h.path.unshift(l):h.path=[l],r.issues?.push(h);if(r.issues||(r.issues=u.issues),s.abortEarly){r.typed=!1;break}}(!c.typed||!u.typed)&&(r.typed=!1),c.typed&&(r.value[c.value]=u.value)}}else Ee(this,"type",r,s);return r}}}function C(t){return{kind:"schema",type:"string",reference:C,expects:"string",async:!1,message:t,_run(e,n){return typeof e.value=="string"?e.typed=!0:Ee(this,"type",e,n),e}}}function ir(t,e){return{kind:"schema",type:"tuple",reference:ir,expects:"Array",async:!1,items:t,message:e,_run(n,r){const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let i=0;i<this.items.length;i++){const o=s[i],a=this.items[i]._run({typed:!1,value:o},r);if(a.issues){const c={type:"array",origin:"value",input:s,key:i,value:o};for(const u of a.issues)u.path?u.path.unshift(c):u.path=[c],n.issues?.push(u);if(n.issues||(n.issues=a.issues),r.abortEarly){n.typed=!1;break}}a.typed||(n.typed=!1),n.value.push(a.value)}}else Ee(this,"type",n,r);return n}}}function Vo(t){let e;if(t)for(const n of t)e?e.push(...n.issues):e=n.issues;return e}function te(t,e){return{kind:"schema",type:"union",reference:te,expects:[...new Set(t.map(n=>n.expects))].join(" | ")||"never",async:!1,options:t,message:e,_run(n,r){let s,i,o;for(const a of this.options){const c=a._run({typed:!1,value:n.value},r);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{s=c;break}else o?o.push(c):o=[c]}if(s)return s;if(i){if(i.length===1)return i[0];Ee(this,"type",n,r,{issues:Vo(i)}),n.typed=!0}else{if(o?.length===1)return o[0];Ee(this,"type",n,r,{issues:Vo(o)})}return n}}}function tt(){return{kind:"schema",type:"unknown",reference:tt,expects:"unknown",async:!1,_run(t){return t.typed=!0,t}}}function V(t,e,n){const r=t._run({typed:!1,value:e},od(n));if(r.issues)throw new pd(r.issues);return r.value}function M(...t){return{...t[0],pipe:t,_run(e,n){for(let r=0;r<t.length;r++){if(e.issues&&(t[r].kind==="schema"||t[r].kind==="transformation")){e.typed=!1;break}(!e.issues||!n.abortEarly&&!n.abortPipeEarly)&&(e=t[r]._run(e,n))}return e}}}function $t(t){const e=Object.entries(t).map(([n,r])=>E({[n]:r}));return M(te(e),Ct(n=>({...n,$kind:Object.keys(n)[0]})))}const Zt=M(C(),Ct(t=>ee(t)),kt(co)),Se=Zt,_t=C(),me=M(te([C(),M(H(),G())]),kt(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),vt=E({objectId:Zt,version:me,digest:C()}),Y=M(te([E({GasCoin:k(!0)}),E({Input:M(H(),G()),type:W(k("pure"))}),E({Input:M(H(),G()),type:W(k("object"))}),E({Result:M(H(),G())}),E({NestedResult:ir([M(H(),G()),M(H(),G())])})]),Ct(t=>({...t,$kind:Object.keys(t)[0]}))),gd=E({budget:_(me),price:_(me),owner:_(Zt),payment:_(x(vt))}),hs=te([k("address"),k("bool"),k("u8"),k("u16"),k("u32"),k("u64"),k("u128"),k("u256"),E({vector:jt(()=>hs)}),E({datatype:E({package:C(),module:C(),type:C(),typeParameters:x(jt(()=>hs))})}),E({typeParameter:M(H(),G())})]),md=E({ref:_(te([k("&"),k("&mut")])),body:hs}),yd=E({package:Se,module:C(),function:C(),typeArguments:x(C()),arguments:x(Y),_argumentTypes:W(_(x(md)))}),bd=E({name:C(),inputs:Rt(C(),te([Y,x(Y)])),data:Rt(C(),tt())}),wd=$t({MoveCall:yd,TransferObjects:E({objects:x(Y),address:Y}),SplitCoins:E({coin:Y,amounts:x(Y)}),MergeCoins:E({destination:Y,sources:x(Y)}),Publish:E({modules:x(_t),dependencies:x(Se)}),MakeMoveVec:E({type:_(C()),elements:x(Y)}),Upgrade:E({modules:x(_t),dependencies:x(Se),package:Se,ticket:Y}),$Intent:bd}),zo=$t({ImmOrOwnedObject:vt,SharedObject:E({objectId:Se,initialSharedVersion:me,mutable:Et()}),Receiving:vt}),Ed=$t({Object:zo,Pure:E({bytes:_t}),UnresolvedPure:E({value:tt()}),UnresolvedObject:E({objectId:Se,version:W(_(me)),digest:W(_(C())),initialSharedVersion:W(_(me)),mutable:W(_(Et()))})}),Fo=$t({Object:zo,Pure:E({bytes:_t})}),Ho=$t({None:k(!0),Epoch:me}),or=E({version:k(2),sender:St(Zt),expiration:St(Ho),gasData:gd,inputs:x(Ed),commands:x(wd)}),ps=E({digest:C(),objectId:C(),version:te([M(H(),G()),C(),sr()])}),Sd=$t({ImmOrOwned:ps,Shared:E({objectId:Se,initialSharedVersion:me,mutable:Et()}),Receiving:ps}),Ko=$t({Object:Sd,Pure:x(M(H(),G()))}),Go=te([E({kind:k("Input"),index:M(H(),G()),value:tt(),type:W(k("object"))}),E({kind:k("Input"),index:M(H(),G()),value:tt(),type:k("pure")})]),vd=te([E({Epoch:M(H(),G())}),E({None:_(k(!0))})]),qo=M(te([H(),C(),sr()]),kt(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),gs=te([E({bool:_(k(!0))}),E({u8:_(k(!0))}),E({u64:_(k(!0))}),E({u128:_(k(!0))}),E({address:_(k(!0))}),E({signer:_(k(!0))}),E({vector:jt(()=>gs)}),E({struct:jt(()=>Od)}),E({u16:_(k(!0))}),E({u32:_(k(!0))}),E({u256:_(k(!0))})]),Od=E({address:C(),module:C(),name:C(),typeParams:x(gs)}),Id=E({budget:W(qo),price:W(qo),payment:W(x(ps)),owner:W(C())}),Td=[Go,E({kind:k("GasCoin")}),E({kind:k("Result"),index:M(H(),G())}),E({kind:k("NestedResult"),index:M(H(),G()),resultIndex:M(H(),G())})],nt=te([...Td]),xd=E({kind:k("MoveCall"),target:M(C(),kt(t=>t.split("::").length===3)),typeArguments:x(C()),arguments:x(nt)}),Ad=E({kind:k("TransferObjects"),objects:x(nt),address:nt}),kd=E({kind:k("SplitCoins"),coin:nt,amounts:x(nt)}),Cd=E({kind:k("MergeCoins"),destination:nt,sources:x(nt)}),jd=E({kind:k("MakeMoveVec"),type:te([E({Some:gs}),E({None:_(k(!0))})]),objects:x(nt)}),Rd=E({kind:k("Publish"),modules:x(x(M(H(),G()))),dependencies:x(C())}),$d=E({kind:k("Upgrade"),modules:x(x(M(H(),G()))),dependencies:x(C()),packageId:C(),ticket:nt}),_d=te([...[xd,Ad,kd,Cd,Rd,$d,jd]]);E({version:k(1),sender:W(C()),expiration:St(vd),gasConfig:Id,inputs:x(Go),transactions:x(_d)});function Wo(t){const e=t.inputs.map((n,r)=>{if(n.Object)return{kind:"Input",index:r,value:{Object:n.Object.ImmOrOwnedObject?{ImmOrOwned:n.Object.ImmOrOwnedObject}:n.Object.Receiving?{Receiving:{digest:n.Object.Receiving.digest,version:n.Object.Receiving.version,objectId:n.Object.Receiving.objectId}}:{Shared:{mutable:n.Object.SharedObject.mutable,initialSharedVersion:n.Object.SharedObject.initialSharedVersion,objectId:n.Object.SharedObject.objectId}}},type:"object"};if(n.Pure)return{kind:"Input",index:r,value:{Pure:Array.from(we(n.Pure.bytes))},type:"pure"};if(n.UnresolvedPure)return{kind:"Input",type:"pure",index:r,value:n.UnresolvedPure.value};if(n.UnresolvedObject)return{kind:"Input",type:"object",index:r,value:n.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:t.expiration?.$kind==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(n=>{if(n.MakeMoveVec)return{kind:"MakeMoveVec",type:n.MakeMoveVec.type===null?{None:!0}:{Some:nr.parseFromStr(n.MakeMoveVec.type)},objects:n.MakeMoveVec.elements.map(r=>rt(r,e))};if(n.MergeCoins)return{kind:"MergeCoins",destination:rt(n.MergeCoins.destination,e),sources:n.MergeCoins.sources.map(r=>rt(r,e))};if(n.MoveCall)return{kind:"MoveCall",target:`${n.MoveCall.package}::${n.MoveCall.module}::${n.MoveCall.function}`,typeArguments:n.MoveCall.typeArguments,arguments:n.MoveCall.arguments.map(r=>rt(r,e))};if(n.Publish)return{kind:"Publish",modules:n.Publish.modules.map(r=>Array.from(we(r))),dependencies:n.Publish.dependencies};if(n.SplitCoins)return{kind:"SplitCoins",coin:rt(n.SplitCoins.coin,e),amounts:n.SplitCoins.amounts.map(r=>rt(r,e))};if(n.TransferObjects)return{kind:"TransferObjects",objects:n.TransferObjects.objects.map(r=>rt(r,e)),address:rt(n.TransferObjects.address,e)};if(n.Upgrade)return{kind:"Upgrade",modules:n.Upgrade.modules.map(r=>Array.from(we(r))),dependencies:n.Upgrade.dependencies,packageId:n.Upgrade.package,ticket:rt(n.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(n)}`)})}}function rt(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function Bd(t){return V(or,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:t.gasConfig.budget?.toString()??null,price:t.gasConfig.price?.toString()??null,payment:t.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:t.inputs.map(e=>{if(e.kind==="Input"){if(fs(Ko,e.value)){const n=V(Ko,e.value);if(n.Object){if(n.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:n.Object.ImmOrOwned.objectId,version:String(n.Object.ImmOrOwned.version),digest:n.Object.ImmOrOwned.digest}}};if(n.Object.Shared)return{Object:{SharedObject:{mutable:n.Object.Shared.mutable??null,initialSharedVersion:n.Object.Shared.initialSharedVersion,objectId:n.Object.Shared.objectId}}};if(n.Object.Receiving)return{Object:{Receiving:{digest:n.Object.Receiving.digest,version:String(n.Object.Receiving.version),objectId:n.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:le(new Uint8Array(n.Pure))}}}return e.type==="object"?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?nr.tagToString(e.type.Some):null,elements:e.objects.map(n=>st(n))}};case"MergeCoins":return{MergeCoins:{destination:st(e.destination),sources:e.sources.map(n=>st(n))}};case"MoveCall":{const[n,r,s]=e.target.split("::");return{MoveCall:{package:n,module:r,function:s,typeArguments:e.typeArguments,arguments:e.arguments.map(i=>st(i))}}}case"Publish":return{Publish:{modules:e.modules.map(n=>le(Uint8Array.from(n))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:st(e.coin),amounts:e.amounts.map(n=>st(n))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(n=>st(n)),address:st(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(n=>le(Uint8Array.from(n))),dependencies:e.dependencies,package:e.packageId,ticket:st(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)})})}function st(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}function Ud(t,e){const n=Array.from(`${t}::`).map(s=>s.charCodeAt(0)),r=new Uint8Array(n.length+e.length);return r.set(n),r.set(e,n.length),er(r,{dkLen:32})}function Zo(t){return ee(t).replace("0x","")}class Ie{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const r=N.TransactionKind.parse(e).ProgrammableTransaction;if(!r)throw new Error("Unable to deserialize from bytes.");return Ie.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:r.inputs,commands:r.commands})}static fromBytes(e){const r=N.TransactionData.parse(e)?.V1,s=r.kind.ProgrammableTransaction;if(!r||!s)throw new Error("Unable to deserialize from bytes.");return Ie.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:s.inputs,commands:s.commands})}static restore(e){return e.version===2?new Ie(V(or,e)):new Ie(V(or,Bd(e)))}static getDigestFromBytes(e){const n=Ud("TransactionData",e);return Wn(n)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:n,onlyTransactionKind:r}={}){const s=this.inputs,i=this.commands,o={ProgrammableTransaction:{inputs:s,commands:i}};if(r)return N.TransactionKind.serialize(o,{maxSize:e}).toBytes();const a=n?.expiration??this.expiration,c=n?.sender??this.sender,u={...this.gasData,...n?.gasConfig,...n?.gasData};if(!c)throw new Error("Missing transaction sender");if(!u.budget)throw new Error("Missing gas budget");if(!u.payment)throw new Error("Missing gas payment");if(!u.price)throw new Error("Missing gas price");const l={sender:Zo(c),expiration:a||{None:!0},gasData:{payment:u.payment,owner:Zo(this.gasData.owner??c),price:BigInt(u.price),budget:BigInt(u.budget)},kind:{ProgrammableTransaction:{inputs:s,commands:i}}};return N.TransactionData.serialize({V1:l},{maxSize:e}).toBytes()}addInput(e,n){const r=this.inputs.length;return this.inputs.push(n),{Input:r,type:e,$kind:"Input"}}getInputUses(e,n){this.mapArguments((r,s)=>(r.$kind==="Input"&&r.Input===e&&n(r,s),r))}mapCommandArguments(e,n){const r=this.commands[e];switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(i=>n(i,r,e));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(i=>n(i,r,e)),r.TransferObjects.address=n(r.TransferObjects.address,r,e);break;case"SplitCoins":r.SplitCoins.coin=n(r.SplitCoins.coin,r,e),r.SplitCoins.amounts=r.SplitCoins.amounts.map(i=>n(i,r,e));break;case"MergeCoins":r.MergeCoins.destination=n(r.MergeCoins.destination,r,e),r.MergeCoins.sources=r.MergeCoins.sources.map(i=>n(i,r,e));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(i=>n(i,r,e));break;case"Upgrade":r.Upgrade.ticket=n(r.Upgrade.ticket,r,e);break;case"$Intent":const s=r.$Intent.inputs;r.$Intent.inputs={};for(const[i,o]of Object.entries(s))r.$Intent.inputs[i]=Array.isArray(o)?o.map(a=>n(a,r,e)):n(o,r,e);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}mapArguments(e){for(const n of this.commands.keys())this.mapCommandArguments(n,e)}replaceCommand(e,n,r=e){if(!Array.isArray(n)){this.commands[e]=n;return}const s=n.length-1;this.commands.splice(e,1,...n),s!==0&&this.mapArguments((i,o,a)=>{if(a<e+n.length)return i;switch(i.$kind){case"Result":i.Result===e&&(i.Result=r),i.Result>e&&(i.Result+=s);break;case"NestedResult":i.NestedResult[0]===e&&(i.NestedResult[0]=r),i.NestedResult[0]>e&&(i.NestedResult[0]+=s);break}return i})}getDigest(){const e=this.build({onlyTransactionKind:!1});return Ie.getDigestFromBytes(e)}snapshot(){return V(or,this)}shallowClone(){return new Ie({version:this.version,sender:this.sender,expiration:this.expiration,gasData:{...this.gasData},inputs:[...this.inputs],commands:[...this.commands]})}}function Pd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Md({signature:t,signatureScheme:e,publicKey:n}){if(!n)throw new Error("`publicKey` is required");const r=n.toRawBytes(),s=new Uint8Array(1+t.length+r.length);return s.set([us[e]]),s.set(t,1),s.set(r,1+t.length),le(s)}const ar=32,Xo="suiprivkey";class Nd{async signWithIntent(e,n){const r=Uo(n,e),s=er(r,{dkLen:32});return{signature:Md({signature:await this.sign(s),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:le(e)}}async signTransaction(e){return this.signWithIntent(e,"TransactionData")}async signPersonalMessage(e){const{signature:n}=await this.signWithIntent(d.vector(d.u8()).serialize(e).toBytes(),"PersonalMessage");return{bytes:le(e),signature:n}}async signAndExecuteTransaction({transaction:e,client:n}){const r=await e.build({client:n}),{signature:s}=await this.signTransaction(r);return(await n.core.executeTransaction({transaction:r,signatures:[s]})).transaction}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class Dd extends Nd{}function Ld(t){const{prefix:e,words:n}=qn.decode(t);if(e!==Xo)throw new Error("invalid private key prefix");const r=new Uint8Array(qn.fromWords(n)),s=r.slice(1),i=Po[r[0]];return{scheme:i,schema:i,secretKey:s}}function Vd(t,e){if(t.length!==ar)throw new Error("Invalid bytes length");const n=us[e],r=new Uint8Array(t.length+1);return r.set([n]),r.set(t,1),qn.encode(Xo,qn.toWords(r))}function zd(t,e,n,r){ci(t);const s=tu({dkLen:32,asyncTick:10},r),{c:i,dkLen:o,asyncTick:a}=s;if(Xe(i),Xe(o),Xe(a),i<1)throw new Error("iterations (c) should be >= 1");const c=mi(e),u=mi(n),l=new Uint8Array(o),h=rr.create(t,c),g=h._cloneInto().update(u);return{c:i,dkLen:o,asyncTick:a,DK:l,PRF:h,PRFSalt:g}}function Fd(t,e,n,r,s){return t.destroy(),e.destroy(),r&&r.destroy(),ut(s),n}function Hd(t,e,n,r){const{c:s,dkLen:i,DK:o,PRF:a,PRFSalt:c}=zd(t,e,n,r);let u;const l=new Uint8Array(4),h=Un(l),g=new Uint8Array(a.outputLen);for(let b=1,p=0;p<i;b++,p+=a.outputLen){const y=o.subarray(p,p+a.outputLen);h.setInt32(0,b,!1),(u=c._cloneInto(u)).update(l).digestInto(g),y.set(g.subarray(0,y.length));for(let w=1;w<s;w++){a._cloneInto(u).update(g).digestInto(g);for(let S=0;S<y.length;S++)y[S]^=g[S]}}return Fd(a,c,o,u,g)}/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */function Yo(t){if(typeof t!="string")throw new TypeError("invalid mnemonic type: "+typeof t);return t.normalize("NFKD")}function Kd(t){const e=Yo(t),n=e.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:n}}const Gd=t=>Yo("mnemonic"+t);function qd(t,e=""){return Hd(Ur,Kd(t).nfkd,Gd(e),{c:2048,dkLen:64})}function Jo(t){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(t)}function Wd(t){return qd(t,"")}function Zd(t){return pn(Wd(t))}const Qo=Ur,Xd="ed25519 seed",Yd=2147483648,Jd=new RegExp("^m(\\/[0-9]+')+$"),ea=t=>t.replace("'",""),Qd=t=>{const n=rr.create(Qo,Xd).update(ts(t)).digest(),r=n.slice(0,32),s=n.slice(32);return{key:r,chainCode:s}},ef=({key:t,chainCode:e},n)=>{const r=new ArrayBuffer(4);new DataView(r).setUint32(0,n);const i=new Uint8Array(1+t.length+r.byteLength);i.set(new Uint8Array(1).fill(0)),i.set(t,1),i.set(new Uint8Array(r,0,r.byteLength),t.length+1);const o=rr.create(Qo,e).update(i).digest(),a=o.slice(0,32),c=o.slice(32);return{key:a,chainCode:c}},tf=t=>Jd.test(t)?!t.split("/").slice(1).map(ea).some(isNaN):!1,ta=(t,e,n=Yd)=>{if(!tf(t))throw new Error("Invalid derivation path");const{key:r,chainCode:s}=Qd(e);return t.split("/").slice(1).map(ea).map(o=>parseInt(o,10)).reduce((o,a)=>ef(o,a+n),{key:r,chainCode:s})},ms=32;class ys extends td{constructor(e){if(super(),typeof e=="string"?this.data=we(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==ms)throw new Error(`Invalid public key input. Expected ${ms} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return us.ED25519}async verify(e,n){let r;if(typeof n=="string"){const s=nd(n);if(s.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!No(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");r=s.signature}else r=n;return et.verify(r,e,this.toRawBytes())}}ys.SIZE=ms;const na="m/44'/784'/0'/0'/0'";class Xt extends Dd{constructor(e){if(super(),e)this.keypair={publicKey:e.publicKey,secretKey:e.secretKey.slice(0,32)};else{const n=et.utils.randomPrivateKey();this.keypair={publicKey:et.getPublicKey(n),secretKey:n}}}getKeyScheme(){return"ED25519"}static generate(){const e=et.utils.randomPrivateKey();return new Xt({publicKey:et.getPublicKey(e),secretKey:e})}static fromSecretKey(e,n){if(typeof e=="string"){const i=Ld(e);if(i.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${i.schema}`);return this.fromSecretKey(i.secretKey,n)}const r=e.length;if(r!==ar)throw new Error(`Wrong secretKey size. Expected ${ar} bytes, got ${r}.`);const s={publicKey:et.getPublicKey(e),secretKey:e};if(!n||!n.skipValidation){const o=new TextEncoder().encode("sui validation"),a=et.sign(o,e);if(!et.verify(a,o,s.publicKey))throw new Error("provided secretKey is invalid")}return new Xt(s)}getPublicKey(){return new ys(this.keypair.publicKey)}getSecretKey(){return Vd(this.keypair.secretKey.slice(0,ar),this.getKeyScheme())}async sign(e){return et.sign(e,this.keypair.secretKey)}static deriveKeypair(e,n){if(n==null&&(n=na),!Jo(n))throw new Error("Invalid derivation path");const{key:r}=ta(n,Zd(e));return Xt.fromSecretKey(r)}static deriveKeypairFromSeed(e,n){if(n==null&&(n=na),!Jo(n))throw new Error("Invalid derivation path");const{key:r}=ta(n,e);return Xt.fromSecretKey(r)}}BigInt(1e9);const nf="0x1",ra="0x2";mn("0x6");const rf=`${ra}::sui::SUI`;mn("0x5");const sf="object",of="ID",af="ascii",cf="String",uf="string",lf="String",df="option",ff="Option";function hf(t){const e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&ee(e.package)===ee("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function bs(t){if(typeof t=="string")switch(t){case"address":return N.Address;case"bool":return N.Bool;case"u8":return N.U8;case"u16":return N.U16;case"u32":return N.U32;case"u64":return N.U64;case"u128":return N.U128;case"u256":return N.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return N.vector(N.U8).transform({input:n=>typeof n=="string"?new TextEncoder().encode(n):n,output:n=>n});const e=bs(t.vector);return e?N.vector(e):null}if("datatype"in t){const e=ee(t.datatype.package);if(e===ee(nf)){if(t.datatype.module===af&&t.datatype.type===cf||t.datatype.module===uf&&t.datatype.type===lf)return N.String;if(t.datatype.module===df&&t.datatype.type===ff){const n=bs(t.datatype.typeParameters[0]);return n?N.vector(n):null}}if(e===ee(ra)&&t.datatype.module===sf&&t.datatype.type===of)return N.Address}return null}function pf(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:bn(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:bn(t.MutableReference)}:{ref:null,body:bn(t)}}function bn(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:bn(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(bn)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}function gf(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?le(t):t.toBase64()}}}const _e={Pure:gf,ObjectRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:n,objectId:ee(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:n}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:n,objectId:ee(t)}}}},ReceivingRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:n,objectId:ee(t)}}}}},Bt={MoveCall(t){const[e,n="",r=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:n,function:r,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(n=>V(Y,n)),address:V(Y,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:V(Y,t),amounts:e.map(n=>V(Y,n))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:V(Y,t),sources:e.map(n=>V(Y,n))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(n=>typeof n=="string"?n:le(new Uint8Array(n))),dependencies:e.map(n=>mn(n))}}},Upgrade({modules:t,dependencies:e,package:n,ticket:r}){return{$kind:"Upgrade",Upgrade:{modules:t.map(s=>typeof s=="string"?s:le(new Uint8Array(s))),dependencies:e.map(s=>mn(s)),package:n,ticket:V(Y,r)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(n=>V(Y,n))}}},Intent({name:t,inputs:e={},data:n={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([r,s])=>[r,Array.isArray(s)?s.map(i=>V(Y,i)):V(Y,s)])),data:n}}}};function wn(t){return te(Object.entries(t).map(([e,n])=>E({[e]:n})))}const Be=wn({GasCoin:k(!0),Input:M(H(),G()),Result:M(H(),G()),NestedResult:ir([M(H(),G()),M(H(),G())])}),mf=E({budget:_(me),price:_(me),owner:_(Zt),payment:_(x(vt))}),yf=E({package:Se,module:C(),function:C(),typeArguments:x(C()),arguments:x(Be)}),bf=E({name:C(),inputs:Rt(C(),te([Be,x(Be)])),data:Rt(C(),tt())}),wf=wn({MoveCall:yf,TransferObjects:E({objects:x(Be),address:Be}),SplitCoins:E({coin:Be,amounts:x(Be)}),MergeCoins:E({destination:Be,sources:x(Be)}),Publish:E({modules:x(_t),dependencies:x(Se)}),MakeMoveVec:E({type:_(C()),elements:x(Be)}),Upgrade:E({modules:x(_t),dependencies:x(Se),package:Se,ticket:Be}),$Intent:bf}),Ef=wn({ImmOrOwnedObject:vt,SharedObject:E({objectId:Se,initialSharedVersion:me,mutable:Et()}),Receiving:vt}),Sf=wn({Object:Ef,Pure:E({bytes:_t}),UnresolvedPure:E({value:tt()}),UnresolvedObject:E({objectId:Se,version:W(_(me)),digest:W(_(C())),initialSharedVersion:W(_(me)),mutable:W(_(Et()))})}),vf=wn({None:k(!0),Epoch:me}),Of=E({version:k(2),sender:St(Zt),expiration:St(vf),gasData:mf,inputs:x(Sf),commands:x(wf),digest:W(_(C()))}),If=50,Tf=1000n,xf=5e10;function Af(t){return async function(n,r,s){return await $f(n,t),await Rf(n,t),r.onlyTransactionKind||(await kf(n,t),await Cf(n,t),await jf(n,t)),await s()}}async function kf(t,e){t.gasConfig.price||(t.gasConfig.price=String(await e.getReferenceGasPrice()))}async function Cf(t,e){if(t.gasConfig.budget)return;const n=await e.dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(xf),payment:[]}}})});if(n.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const r=Tf*BigInt(t.gasConfig.price||1n),s=BigInt(n.effects.gasUsed.computationCost)+r,i=s+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);t.gasConfig.budget=String(i>s?i:s)}async function jf(t,e){if(!t.gasConfig.payment){const r=(await e.getCoins({owner:t.gasConfig.owner||t.sender,coinType:rf})).data.filter(s=>!t.inputs.find(o=>o.Object?.ImmOrOwnedObject?s.coinObjectId===o.Object.ImmOrOwnedObject.objectId:!1)).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!r.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=r.map(s=>V(vt,s))}}async function Rf(t,e){const n=t.inputs.filter(l=>l.UnresolvedObject&&!(l.UnresolvedObject.version||l.UnresolvedObject?.initialSharedVersion)),r=[...new Set(n.map(l=>mn(l.UnresolvedObject.objectId)))],s=r.length?tl(r,If):[],i=(await Promise.all(s.map(l=>e.multiGetObjects({ids:l,options:{showOwner:!0}})))).flat(),o=new Map(r.map((l,h)=>[l,i[h]])),a=Array.from(o).filter(([l,h])=>h.error).map(([l,h])=>JSON.stringify(h.error));if(a.length)throw new Error(`The following input objects are invalid: ${a.join(", ")}`);const c=i.map(l=>{if(l.error||!l.data)throw new Error(`Failed to fetch object: ${l.error}`);const h=l.data.owner,g=h&&typeof h=="object"?"Shared"in h?h.Shared.initial_shared_version:"ConsensusAddressOwner"in h?h.ConsensusAddressOwner.start_version:null:null;return{objectId:l.data.objectId,digest:l.data.digest,version:l.data.version,initialSharedVersion:g}}),u=new Map(r.map((l,h)=>[l,c[h]]));for(const[l,h]of t.inputs.entries()){if(!h.UnresolvedObject)continue;let g;const b=ee(h.UnresolvedObject.objectId),p=u.get(b);h.UnresolvedObject.initialSharedVersion??p?.initialSharedVersion?g=_e.SharedObjectRef({objectId:b,initialSharedVersion:h.UnresolvedObject.initialSharedVersion||p?.initialSharedVersion,mutable:h.UnresolvedObject.mutable||_f(t,l)}):Bf(t,l)&&(g=_e.ReceivingRef({objectId:b,digest:h.UnresolvedObject.digest??p?.digest,version:h.UnresolvedObject.version??p?.version})),t.inputs[t.inputs.indexOf(h)]=g??_e.ObjectRef({objectId:b,digest:h.UnresolvedObject.digest??p?.digest,version:h.UnresolvedObject.version??p?.version})}}async function $f(t,e){const{inputs:n,commands:r}=t,s=[],i=new Set;r.forEach(a=>{if(a.MoveCall){if(a.MoveCall._argumentTypes)return;if(a.MoveCall.arguments.map(l=>l.$kind==="Input"?t.inputs[l.Input]:null).some(l=>l?.UnresolvedPure||l?.UnresolvedObject&&typeof l?.UnresolvedObject.mutable!="boolean")){const l=`${a.MoveCall.package}::${a.MoveCall.module}::${a.MoveCall.function}`;i.add(l),s.push(a.MoveCall)}}});const o=new Map;i.size>0&&await Promise.all([...i].map(async a=>{const[c,u,l]=a.split("::"),h=await e.getNormalizedMoveFunction({package:c,module:u,function:l});o.set(a,h.parameters.map(g=>pf(g)))})),s.length&&await Promise.all(s.map(async a=>{const c=o.get(`${a.package}::${a.module}::${a.function}`);if(!c)return;const l=c.length>0&&hf(c.at(-1))?c.slice(0,c.length-1):c;a._argumentTypes=l})),r.forEach(a=>{if(!a.MoveCall)return;const c=a.MoveCall,u=`${c.package}::${c.module}::${c.function}`,l=c._argumentTypes;if(l){if(l.length!==a.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${u}`);l.forEach((h,g)=>{const b=c.arguments[g];if(b.$kind!=="Input")return;const p=n[b.Input];if(!p.UnresolvedPure&&!p.UnresolvedObject)return;const y=p.UnresolvedPure?.value??p.UnresolvedObject?.objectId,w=bs(h.body);if(w){b.type="pure",n[n.indexOf(p)]=_e.Pure(w.serialize(y));return}if(typeof y!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(y,null,2)}`);b.type="object";const S=p.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:y}}:p;n[b.Input]=S})}})}function _f(t,e){let n=!1;return t.getInputUses(e,(r,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(r);n=s.MoveCall._argumentTypes[i].ref!=="&"||n}(s.$kind==="MakeMoveVec"||s.$kind==="MergeCoins"||s.$kind==="SplitCoins"||s.$kind==="TransferObjects")&&(n=!0)}),n}function Bf(t,e){let n=!1;return t.getInputUses(e,(r,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(r);n=Uf(s.MoveCall._argumentTypes[i])||n}}),n}function Uf(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function sa(t,e){return!!(t.inputs.some(n=>n.UnresolvedObject||n.UnresolvedPure)||!e.onlyTransactionKind&&(!t.gasConfig.price||!t.gasConfig.budget||!t.gasConfig.payment))}async function Pf(t,e,n){if(Nf(t),!sa(t,e))return await ia(t),n();const r=Mf(e);return(r.core?.resolveTransactionPlugin()??Af(r))(t,e,async()=>{await ia(t),await n()})}function ia(t){t.inputs.forEach((e,n)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${n} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function Mf(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function Nf(t){for(const e of t.commands)switch(e.$kind){case"SplitCoins":e.SplitCoins.amounts.forEach(n=>{oa(n,N.U64,t)});break;case"TransferObjects":oa(e.TransferObjects.address,N.Address,t);break}}function oa(t,e,n){if(t.$kind!=="Input")return;const r=n.inputs[t.Input];r.$kind==="UnresolvedPure"&&(n.inputs[t.Input]=_e.Pure(e.serialize(r.UnresolvedPure.value)))}function Df(t){function e(n){return t(n)}return e.system=n=>{const r=n?.mutable;return e(r!==void 0?_e.SharedObjectRef({objectId:"0x5",initialSharedVersion:1,mutable:r}):{$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x5",initialSharedVersion:1}})},e.clock=()=>e(_e.SharedObjectRef({objectId:"0x6",initialSharedVersion:1,mutable:!1})),e.random=()=>e({$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x8",mutable:!1}}),e.denyList=n=>e({$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x403",mutable:n?.mutable}}),e.option=({type:n,value:r})=>s=>s.moveCall({typeArguments:[n],target:`0x1::option::${r===null?"none":"some"}`,arguments:r===null?[]:[s.object(r)]}),e}function Lf(t){function e(n,r){if(typeof n=="string")return t(yn(n).serialize(r));if(n instanceof Uint8Array||rs(n))return t(n);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=n=>t(N.U8.serialize(n)),e.u16=n=>t(N.U16.serialize(n)),e.u32=n=>t(N.U32.serialize(n)),e.u64=n=>t(N.U64.serialize(n)),e.u128=n=>t(N.U128.serialize(n)),e.u256=n=>t(N.U256.serialize(n)),e.bool=n=>t(N.Bool.serialize(n)),e.string=n=>t(N.String.serialize(n)),e.address=n=>t(N.Address.serialize(n)),e.id=e.address,e.vector=(n,r)=>t(N.vector(yn(n)).serialize(r)),e.option=(n,r)=>t(N.option(yn(n)).serialize(r)),e}function aa(t){if(typeof t=="string")return ee(t);if(t.Object)return t.Object.ImmOrOwnedObject?ee(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?ee(t.Object.Receiving.objectId):ee(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return ee(t.UnresolvedObject.objectId)}const Vf=t=>async(e,n,r)=>{const s=sd(e);if(s.types.length===0&&s.packages.length===0)return r();const i=await zf(n).core.mvr.resolve({types:s.types,packages:s.packages});id(e,i),await r()};function zf(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}var ca=t=>{throw TypeError(t)},ws=(t,e,n)=>e.has(t)||ca("Cannot "+n),O=(t,e,n)=>(ws(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?ca("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Z=(t,e,n,r)=>(ws(t,e,"write to private field"),e.set(t,n),n),ce=(t,e,n)=>(ws(t,e,"access private method"),n),Ut,Pt,it,He,Te,xe,Ue,Ot,R,ne,ua,cr,ur,lr,dr,Es,Ss,la,da;function vs(t,e=1/0){const n={$kind:"Result",get Result(){return typeof t=="function"?t():t}},r=[],s=i=>r[i]??(r[i]={$kind:"NestedResult",get NestedResult(){return[typeof t=="function"?t():t,i]}});return new Proxy(n,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(i,o){if(o in i)return Reflect.get(i,o);if(o===Symbol.iterator)return function*(){let c=0;for(;c<e;)yield s(c),c++};if(typeof o=="symbol")return;const a=parseInt(o,10);if(!(Number.isNaN(a)||a<0))return s(a)}})}const fa=Symbol.for("@mysten/transaction");function Ff(t){return!!t&&typeof t=="object"&&t[fa]===!0}const ha={buildPlugins:new Map,serializationPlugins:new Map},Os=Symbol.for("@mysten/transaction/registry");function En(){try{const t=globalThis;return t[Os]||(t[Os]=ha),t[Os]}catch{return ha}}const pa=class ai{constructor(){Fe(this,ne),Fe(this,Ut),Fe(this,Pt),Fe(this,it,new Map),Fe(this,He,[]),Fe(this,Te,[]),Fe(this,xe,new Set),Fe(this,Ue,new Set),Fe(this,Ot,new Map),Fe(this,R),this.object=Df(n=>{if(typeof n=="function")return this.object(this.add(n));if(typeof n=="object"&&fs(Y,n))return n;const r=aa(n),s=O(this,R).inputs.find(i=>r===aa(i));return s?.Object?.SharedObject&&typeof n=="object"&&n.Object?.SharedObject&&(s.Object.SharedObject.mutable=s.Object.SharedObject.mutable||n.Object.SharedObject.mutable),s?{$kind:"Input",Input:O(this,R).inputs.indexOf(s),type:"object"}:ce(this,ne,ur).call(this,"object",typeof n=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:ee(n)}}:n)});const e=En();Z(this,R,new Ie),Z(this,Pt,[...e.buildPlugins.values()]),Z(this,Ut,[...e.serializationPlugins.values()])}static fromKind(e){const n=new ai;return Z(n,R,Ie.fromKindBytes(typeof e=="string"?we(e):e)),Z(n,He,O(n,R).inputs.slice()),Z(n,Te,O(n,R).commands.slice()),Z(n,xe,new Set(O(n,Te).map((r,s)=>s))),n}static from(e){const n=new ai;return Ff(e)?Z(n,R,new Ie(e.getData())):typeof e!="string"||!e.startsWith("{")?Z(n,R,Ie.fromBytes(typeof e=="string"?we(e):e)):Z(n,R,Ie.restore(JSON.parse(e))),Z(n,He,O(n,R).inputs.slice()),Z(n,Te,O(n,R).commands.slice()),Z(n,xe,new Set(O(n,Te).map((r,s)=>s))),n}static registerGlobalSerializationPlugin(e,n){En().serializationPlugins.set(e,n??e)}static unregisterGlobalSerializationPlugin(e){En().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,n){En().buildPlugins.set(e,n??e)}static unregisterGlobalBuildPlugin(e){En().buildPlugins.delete(e)}addSerializationPlugin(e){O(this,Ut).push(e)}addBuildPlugin(e){O(this,Pt).push(e)}addIntentResolver(e,n){if(O(this,it).has(e)&&O(this,it).get(e)!==n)throw new Error(`Intent resolver for ${e} already exists`);O(this,it).set(e,n)}setSender(e){O(this,R).sender=e}setSenderIfNotSet(e){O(this,R).sender||(O(this,R).sender=e)}setExpiration(e){O(this,R).expiration=e?V(Ho,e):null}setGasPrice(e){O(this,R).gasConfig.price=String(e)}setGasBudget(e){O(this,R).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){O(this,R).gasData.budget==null&&(O(this,R).gasConfig.budget=String(e))}setGasOwner(e){O(this,R).gasConfig.owner=e}setGasPayment(e){O(this,R).gasConfig.payment=e.map(n=>V(vt,n))}get blockData(){return Wo(O(this,R).snapshot())}getData(){return O(this,R).snapshot()}get[fa](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:Lf(e=>rs(e)?ce(this,ne,ur).call(this,"pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):ce(this,ne,ur).call(this,"pure",fs(Fo,e)?V(Fo,e):e instanceof Uint8Array?_e.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(_e.ObjectRef(...e))}receivingRef(...e){return this.object(_e.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(_e.SharedObjectRef(...e))}add(e){if(typeof e=="function"){if(O(this,Ot).has(e))return O(this,Ot).get(e);const n=ce(this,ne,ua).call(this),r=e(n);if(!(r&&typeof r=="object"&&"then"in r))return Z(this,xe,O(n,xe)),O(this,Ot).set(e,r),r;const s=ce(this,ne,cr).call(this,{$kind:"$Intent",$Intent:{name:"AsyncTransactionThunk",inputs:{},data:{resultIndex:O(this,R).commands.length,result:null}}});O(this,Ue).add(Promise.resolve(r).then(o=>{s.$Intent.data.result=o}));const i=vs(()=>s.$Intent.data.resultIndex);return O(this,Ot).set(e,i),i}else ce(this,ne,cr).call(this,e);return vs(O(this,R).commands.length-1)}splitCoins(e,n){const r=Bt.SplitCoins(typeof e=="string"?this.object(e):ce(this,ne,dr).call(this,e),n.map(s=>typeof s=="number"||typeof s=="bigint"||typeof s=="string"?this.pure.u64(s):ce(this,ne,lr).call(this,s)));return ce(this,ne,cr).call(this,r),vs(O(this,R).commands.length-1,n.length)}mergeCoins(e,n){return this.add(Bt.MergeCoins(this.object(e),n.map(r=>this.object(r))))}publish({modules:e,dependencies:n}){return this.add(Bt.Publish({modules:e,dependencies:n}))}upgrade({modules:e,dependencies:n,package:r,ticket:s}){return this.add(Bt.Upgrade({modules:e,dependencies:n,package:r,ticket:this.object(s)}))}moveCall({arguments:e,...n}){return this.add(Bt.MoveCall({...n,arguments:e?.map(r=>ce(this,ne,lr).call(this,r))}))}transferObjects(e,n){return this.add(Bt.TransferObjects(e.map(r=>this.object(r)),typeof n=="string"?this.pure.address(n):ce(this,ne,lr).call(this,n)))}makeMoveVec({type:e,elements:n}){return this.add(Bt.MakeMoveVec({type:e,elements:n.map(r=>this.object(r))}))}serialize(){return JSON.stringify(Wo(O(this,R).snapshot()))}async toJSON(e={}){await this.prepareForSerialization(e);const n=this.isFullyResolved();return JSON.stringify(V(Of,n?{...O(this,R).snapshot(),digest:O(this,R).getDigest()}:O(this,R).snapshot()),(r,s)=>typeof s=="bigint"?s.toString():s,2)}async sign(e){const{signer:n,...r}=e,s=await this.build(r);return n.signTransaction(s)}isFullyResolved(){return!(!O(this,R).sender||O(this,Ue).size>0||O(this,R).commands.some(e=>e.$Intent)||sa(O(this,R),{}))}async build(e={}){return await this.prepareForSerialization(e),await ce(this,ne,Es).call(this,e),O(this,R).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await this.prepareForSerialization(e),await ce(this,ne,Es).call(this,e),O(this,R).getDigest()}async prepareForSerialization(e){await ce(this,ne,la).call(this),ce(this,ne,da).call(this);const n=new Set;for(const s of O(this,R).commands)s.$Intent&&n.add(s.$Intent.name);const r=[...O(this,Ut)];for(const s of n)if(!e.supportedIntents?.includes(s)){if(!O(this,it).has(s))throw new Error(`Missing intent resolver for ${s}`);r.push(O(this,it).get(s))}r.push(Vf()),await ce(this,ne,Ss).call(this,r,e)}};Ut=new WeakMap,Pt=new WeakMap,it=new WeakMap,He=new WeakMap,Te=new WeakMap,xe=new WeakMap,Ue=new WeakMap,Ot=new WeakMap,R=new WeakMap,ne=new WeakSet,ua=function(){const t=new pa;return Z(t,R,O(this,R)),Z(t,Ut,O(this,Ut)),Z(t,Pt,O(this,Pt)),Z(t,it,O(this,it)),Z(t,Ue,O(this,Ue)),Z(t,xe,new Set(O(this,xe))),Z(t,Ot,O(this,Ot)),O(this,He).push(O(t,He)),O(this,Te).push(O(t,Te)),t},cr=function(t){const e=O(this,R).commands.length;return O(this,Te).push(t),O(this,xe).add(e),O(this,R).commands.push(t),O(this,R).mapCommandArguments(e,n=>{if(n.$kind==="Result"&&!O(this,xe).has(n.Result))throw new Error(`Result { Result: ${n.Result} } is not available to use the current transaction`);if(n.$kind==="NestedResult"&&!O(this,xe).has(n.NestedResult[0]))throw new Error(`Result { NestedResult: [${n.NestedResult[0]}, ${n.NestedResult[1]}] } is not available to use the current transaction`);if(n.$kind==="Input"&&n.Input>=O(this,R).inputs.length)throw new Error(`Input { Input: ${n.Input} } references an input that does not exist in the current transaction`);return n}),t},ur=function(t,e){return O(this,He).push(e),O(this,R).addInput(t,e)},lr=function(t){return rs(t)?this.pure(t):ce(this,ne,dr).call(this,t)},dr=function(t){if(typeof t=="function"){const e=this.add(t);return typeof e=="function"?ce(this,ne,dr).call(this,e):V(Y,e)}return V(Y,t)},Es=async function(t){if(!t.onlyTransactionKind&&!O(this,R).sender)throw new Error("Missing transaction sender");await ce(this,ne,Ss).call(this,[...O(this,Pt),Pf],t)},Ss=async function(t,e){try{const n=r=>{if(r>=t.length)return()=>{};const s=t[r];return async()=>{const i=n(r+1);let o=!1,a=!1;if(await s(O(this,R),e,async()=>{if(o)throw new Error(`next() was call multiple times in TransactionPlugin ${r}`);o=!0,await i(),a=!0}),!o)throw new Error(`next() was not called in TransactionPlugin ${r}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${r}`)}};await n(0)()}finally{Z(this,He,O(this,R).inputs.slice()),Z(this,Te,O(this,R).commands.slice())}},la=async function(){for(;O(this,Ue).size>0;){const t=Promise.all(O(this,Ue));O(this,Ue).clear(),O(this,Ue).add(t),await t,O(this,Ue).delete(t)}},da=function(){const t=O(this,R).commands,e=O(this,R).inputs,n=O(this,Te).flat(1/0),r=O(this,He).flat(1/0);if(n.length!==t.length)throw new Error("Unexpected number of commands found in transaction data");if(r.length!==e.length)throw new Error("Unexpected number of inputs found in transaction data");const s=n.filter(o=>o.$Intent?.name!=="AsyncTransactionThunk");O(this,R).commands=s,O(this,R).inputs=r,Z(this,Te,s),Z(this,He,r),Z(this,xe,new Set(s.map((o,a)=>a)));function i(o){const a=t[o];if(a.$Intent?.name==="AsyncTransactionThunk"){const u=a.$Intent.data.result;if(u==null)throw new Error("AsyncTransactionThunk has not been resolved");return i(u.Result)}const c=s.indexOf(a);if(c===-1)throw new Error("Unable to find original index for command");return c}O(this,R).mapArguments(o=>{if(o.$kind==="Input"){const a=r.indexOf(e[o.Input]);if(a===-1)throw new Error("Input has not been resolved");return{...o,Input:a}}else if(o.$kind==="Result"){const a=i(o.Result);return{...o,Result:a}}else if(o.$kind==="NestedResult"){const a=i(o.NestedResult[0]);return{...o,NestedResult:[a,o.NestedResult[1]]}}return o});for(const[o,a]of t.entries())if(a.$Intent?.name==="AsyncTransactionThunk")try{a.$Intent.data.resultIndex=i(o)}catch{}};let ga=pa;const Is=t=>Gn.encode(t),Ts=t=>Gn.decode(t);function Yt(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const xs=8192;function ot(t){if(t.length<xs)return btoa(String.fromCharCode(...t));let e="";for(var n=0;n<t.length;n+=xs){const r=t.slice(n,n+xs);e+=String.fromCharCode(...r)}return btoa(e)}function As(t){const e=t.startsWith("0x")?t.slice(2):t,n=e.length%2===0?e:`0${e}`,r=n.match(/[0-9a-fA-F]{2}/g)?.map(s=>parseInt(s,16))??[];if(r.length!==n.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(r)}function fr(t){return t.reduce((e,n)=>e+n.toString(16).padStart(2,"0"),"")}function hr(t){const e=[];let n=0;if(t===0)return[0];for(;t>0;)e[n]=t&127,(t>>=7)&&(e[n]|=128),n+=1;return e}function Hf(t){let e=0,n=0,r=0;for(;;){const s=t[r];if(r+=1,e|=(s&127)<<n,(s&128)===0)break;n+=7}return{value:e,length:r}}class Kf{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength)}shift(e){return this.bytePosition+=e,this}read8(){const e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){const e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){const e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){const e=this.read32(),r=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+r).toString(10)}read128(){const e=BigInt(this.read64()),r=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+r).toString(10)}read256(){const e=BigInt(this.read128()),r=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+r).toString(10)}readBytes(e){const n=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,n,e);return this.shift(e),r}readULEB(){const e=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,e),{value:r,length:s}=Hf(n);return this.shift(s),r}readVec(e){const n=this.readULEB(),r=[];for(let s=0;s<n;s++)r.push(e(this,s,n));return r}}function Gf(t,e){switch(e){case"base58":return Is(t);case"base64":return ot(t);case"hex":return fr(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function ma(t,e=["<",">"]){const[n,r]=e,s=[];let i="",o=0;for(let a=0;a<t.length;a++){const c=t[a];if(c===n&&o++,c===r&&o--,o===0&&c===","){s.push(i.trim()),i="";continue}i+=c}return s.push(i.trim()),s}class qf{constructor({initialSize:e=1024,maxSize:n=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=n,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const n=this.bytePosition+e;if(n>this.size){const r=Math.min(this.maxSize,this.size+this.allocateSize);if(n>r)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${n}`);this.size=r;const s=new ArrayBuffer(this.size);new Uint8Array(s).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(s)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return ks(BigInt(e),8).forEach(n=>this.write8(n)),this}write128(e){return ks(BigInt(e),16).forEach(n=>this.write8(n)),this}write256(e){return ks(BigInt(e),32).forEach(n=>this.write8(n)),this}writeULEB(e){return hr(e).forEach(n=>this.write8(n)),this}writeVec(e,n){return this.writeULEB(e.length),Array.from(e).forEach((r,s)=>n(this,r,s,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return Gf(this.toBytes(),e)}}function ks(t,e){const n=new Uint8Array(e);let r=0;for(;t>0;)n[r]=Number(t%BigInt(256)),t=t/BigInt(256),r+=1;return n}var ya=t=>{throw TypeError(t)},ba=(t,e,n)=>e.has(t)||ya("Cannot "+n),Pe=(t,e,n)=>(ba(t,e,"read from private field"),n?n.call(t):e.get(t)),pr=(t,e,n)=>e.has(t)?ya("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),gr=(t,e,n,r)=>(ba(t,e,"write to private field"),e.set(t,n),n),Jt,Sn,mr,It;const Wf=class Jc{constructor(e){pr(this,Jt),pr(this,Sn),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),gr(this,Jt,e.write),gr(this,Sn,e.serialize??((n,r)=>{const s=new qf({initialSize:this.serializedSize(n)??void 0,...r});return Pe(this,Jt).call(this,n,s),s.toBytes()})),this.validate=e.validate??(()=>{})}write(e,n){this.validate(e),Pe(this,Jt).call(this,e,n)}serialize(e,n){return this.validate(e),new Xf(this,Pe(this,Sn).call(this,e,n))}parse(e){const n=new Kf(e);return this.read(n)}fromHex(e){return this.parse(As(e))}fromBase58(e){return this.parse(Ts(e))}fromBase64(e){return this.parse(Yt(e))}transform({name:e,input:n,output:r,validate:s}){return new Jc({name:e??this.name,read:i=>r?r(this.read(i)):this.read(i),write:(i,o)=>Pe(this,Jt).call(this,n?n(i):i,o),serializedSize:i=>this.serializedSize(n?n(i):i),serialize:(i,o)=>Pe(this,Sn).call(this,n?n(i):i,o),validate:i=>{s?.(i),this.validate(n?n(i):i)}})}};Jt=new WeakMap,Sn=new WeakMap;let Ke=Wf;const Zf=Symbol.for("@mysten/serialized-bcs");class Xf{constructor(e,n){pr(this,mr),pr(this,It),gr(this,mr,e),gr(this,It,n)}get[Zf](){return!0}toBytes(){return Pe(this,It)}toHex(){return fr(Pe(this,It))}toBase64(){return ot(Pe(this,It))}toBase58(){return Is(Pe(this,It))}parse(){return Pe(this,mr).parse(Pe(this,It))}}mr=new WeakMap,It=new WeakMap;function yr({size:t,...e}){return new Ke({...e,serializedSize:()=>t})}function Cs({readMethod:t,writeMethod:e,...n}){return yr({...n,read:r=>r[t](),write:(r,s)=>s[e](r),validate:r=>{if(r<0||r>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${r}. Expected value in range 0-${n.maxValue}`);n.validate?.(r)}})}function js({readMethod:t,writeMethod:e,...n}){return yr({...n,read:r=>r[t](),write:(r,s)=>s[e](BigInt(r)),validate:r=>{const s=BigInt(r);if(s<0||s>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${s}. Expected value in range 0-${n.maxValue}`);n.validate?.(s)}})}function Yf({serialize:t,...e}){const n=new Ke({...e,serialize:t,write:(r,s)=>{for(const i of n.serialize(r).toBytes())s.write8(i)}});return n}function Jf({toBytes:t,fromBytes:e,...n}){return new Ke({...n,read:r=>{const s=r.readULEB(),i=r.readBytes(s);return e(i)},write:(r,s)=>{const i=t(r);s.writeULEB(i.length);for(let o=0;o<i.length;o++)s.write8(i[o])},serialize:r=>{const s=t(r),i=hr(s.length),o=new Uint8Array(i.length+s.length);return o.set(i,0),o.set(s,i.length),o},validate:r=>{if(typeof r!="string")throw new TypeError(`Invalid ${n.name} value: ${r}. Expected string`);n.validate?.(r)}})}function Qf(t){let e=null;function n(){return e||(e=t()),e}return new Ke({name:"lazy",read:r=>n().read(r),serializedSize:r=>n().serializedSize(r),write:(r,s)=>n().write(r,s),serialize:(r,s)=>n().serialize(r,s).toBytes()})}class eh extends Ke{constructor({name:e,fields:n,...r}){const s=Object.entries(n);super({name:e,serializedSize:i=>{let o=0;for(const[a,c]of s){const u=c.serializedSize(i[a]);if(u==null)return null;o+=u}return o},read:i=>{const o={};for(const[a,c]of s)o[a]=c.read(i);return o},write:(i,o)=>{for(const[a,c]of s)c.write(i[a],o)},...r,validate:i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)}})}}class th extends Ke{constructor({fields:e,...n}){const r=Object.entries(e);super({read:s=>{const i=s.readULEB(),o=r[i];if(!o)throw new TypeError(`Unknown value ${i} for enum ${name}`);const[a,c]=o;return{[a]:c?.read(s)??!0,$kind:a}},write:(s,i)=>{const[o,a]=Object.entries(s).filter(([c])=>Object.hasOwn(e,c))[0];for(let c=0;c<r.length;c++){const[u,l]=r[c];if(u===o){i.writeULEB(c),l?.write(a,i);return}}},...n,validate:s=>{if(n?.validate?.(s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`);const i=Object.keys(s).filter(a=>s[a]!==void 0&&Object.hasOwn(e,a));if(i.length!==1)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${name}}`);const[o]=i;if(!Object.hasOwn(e,o))throw new TypeError(`Invalid enum variant ${o}`)}})}}class nh extends Ke{constructor({fields:e,name:n,...r}){super({name:n??`(${e.map(s=>s.name).join(", ")})`,serializedSize:s=>{let i=0;for(let o=0;o<e.length;o++){const a=e[o].serializedSize(s[o]);if(a==null)return null;i+=a}return i},read:s=>{const i=[];for(const o of e)i.push(o.read(s));return i},write:(s,i)=>{for(let o=0;o<e.length;o++)e[o].write(s[o],i)},...r,validate:s=>{if(r?.validate?.(s),!Array.isArray(s))throw new TypeError(`Expected array, found ${typeof s}`);if(s.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${s.length}`)}})}}function rh(t,e,n){return new Ke({read:r=>{const s=new Array(t);for(let i=0;i<t;i++)s[i]=e.read(r);return s},write:(r,s)=>{for(const i of r)e.write(i,s)},...n,name:n?.name??`${e.name}[${t}]`,validate:r=>{if(n?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})}function sh(t){return f.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})}function ih(t,e){return new Ke({read:n=>{const r=n.readULEB(),s=new Array(r);for(let i=0;i<r;i++)s[i]=t.read(n);return s},write:(n,r)=>{r.writeULEB(n.length);for(const s of n)t.write(s,r)},...e,name:e?.name??`vector<${t.name}>`,validate:n=>{if(e?.validate?.(n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`)}})}function oh(t,e){return f.vector(f.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:n=>[...n.entries()],output:n=>{const r=new Map;for(const[s,i]of n)r.set(s,i);return r}})}const f={u8(t){return Cs({readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t,name:t?.name??"u8"})},u16(t){return Cs({readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t,name:t?.name??"u16"})},u32(t){return Cs({readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t,name:t?.name??"u32"})},u64(t){return js({readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t,name:t?.name??"u64"})},u128(t){return js({readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t,name:t?.name??"u128"})},u256(t){return js({readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t,name:t?.name??"u256"})},bool(t){return yr({size:1,read:e=>e.read8()===1,write:(e,n)=>n.write8(e?1:0),...t,name:t?.name??"bool",validate:e=>{if(t?.validate?.(e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return Yf({read:e=>e.readULEB(),serialize:e=>Uint8Array.from(hr(e)),...t,name:t?.name??"uleb128"})},bytes(t,e){return yr({size:t,read:n=>n.readBytes(t),write:(n,r)=>{const s=new Uint8Array(n);for(let i=0;i<t;i++)r.write8(s[i]??0)},...e,name:e?.name??`bytes[${t}]`,validate:n=>{if(e?.validate?.(n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},byteVector(t){return new Ke({read:e=>{const n=e.readULEB();return e.readBytes(n)},write:(e,n)=>{const r=new Uint8Array(e);n.writeULEB(r.length);for(let s=0;s<r.length;s++)n.write8(r[s]??0)},...t,name:t?.name??"vector<u8>",serializedSize:e=>{const n="length"in e?e.length:null;return n==null?null:hr(n).length+n},validate:e=>{if(t?.validate?.(e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)}})},string(t){return Jf({toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t,name:t?.name??"string"})},fixedArray:rh,option:sh,vector:ih,tuple(t,e){return new nh({fields:t,...e})},struct(t,e,n){return new eh({name:t,fields:e,...n})},enum(t,e,n){return new th({name:t,fields:e,...n})},map:oh,lazy(t){return Qf(t)}},wa=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Ea=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,ah=235;function Rs(t){return t.length>ah?!1:t.includes("@")?wa.test(t):Ea.test(t)}function $s(t,e="at"){const n=t.toLowerCase();let r;if(n.includes("@")){if(!wa.test(n))throw new Error(`Invalid SuiNS name ${t}`);const[s,i]=n.split("@");r=[...s?s.split("."):[],i]}else{if(!Ea.test(n))throw new Error(`Invalid SuiNS name ${t}`);r=n.split(".").slice(0,-1)}return e==="dot"?`${r.join(".")}.sui`:`${r.slice(0,-1).join(".")}@${r[r.length-1]}`}const ch=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,uh=/^\d+$/,lh=64,dh="/",fh=t=>{const e=t.split(dh);if(e.length<2||e.length>3)return!1;const[n,r,s]=e;return s!==void 0&&!uh.test(s)||!Rs(n)?!1:ch.test(r)&&r.length<lh},_s=32;function Sa(t){return ph(t)&&gh(t)===_s}function hh(t){return t.includes("::")?Bs(t):t}function Bs(t){const[e,n]=t.split("::"),r=fh(e),s=t.slice(e.length+n.length+4),i=s.includes("<")?s.slice(0,s.indexOf("<")):s,o=s.includes("<")?ma(s.slice(s.indexOf("<")+1,s.lastIndexOf(">"))).map(a=>hh(a.trim())):[];return{address:r?e:Ge(e),module:n,name:i,typeParams:o}}function Us(t){const{address:e,module:n,name:r,typeParams:s}=typeof t=="string"?Bs(t):t,i=s?.length>0?`<${s.map(o=>typeof o=="string"?o:Us(o)).join(",")}>`:"";return`${e}::${n}::${r}${i}`}function Ge(t,e=!1){let n=t.toLowerCase();return!e&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(_s*2,"0")}`}function va(t,e=!1){return Ge(t,e)}function ph(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function gh(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}const mh=/^vector<(.+)>$/,yh=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class Tt{static parseFromStr(e,n=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const r=e.match(mh);if(r)return{vector:Tt.parseFromStr(r[1],n)};const s=e.match(yh);if(s)return{struct:{address:n?Ge(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:Tt.parseStructTypeArgs(s[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,n=!1){return ma(e).map(r=>Tt.parseFromStr(r,n))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${Tt.tagToString(e.vector)}>`;if("struct"in e){const n=e.struct,r=n.typeParams.map(Tt.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}}function bh(t){return f.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function wh(t){return f.enum("Option",{None:null,Some:t})}const J=f.bytes(_s).transform({validate:t=>{const e=typeof t=="string"?t:fr(t);if(!e||!Sa(Ge(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?As(Ge(t)):t,output:t=>Ge(fr(t))}),Me=f.vector(f.u8()).transform({name:"ObjectDigest",input:t=>Ts(t),output:t=>Is(new Uint8Array(t)),validate:t=>{if(Ts(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Ae=f.struct("SuiObjectRef",{objectId:J,version:f.u64(),digest:Me}),Oa=f.struct("SharedObjectRef",{objectId:J,initialSharedVersion:f.u64(),mutable:f.bool()}),Ia=f.enum("ObjectArg",{ImmOrOwnedObject:Ae,SharedObject:Oa,Receiving:Ae}),Mt=f.enum("Owner",{AddressOwner:J,ObjectOwner:J,Shared:f.struct("Shared",{initialSharedVersion:f.u64()}),Immutable:null,ConsensusAddressOwner:f.struct("ConsensusAddressOwner",{owner:J,startVersion:f.u64()})}),Ta=f.enum("CallArg",{Pure:f.struct("Pure",{bytes:f.vector(f.u8()).transform({input:t=>typeof t=="string"?Yt(t):t,output:t=>ot(new Uint8Array(t))})}),Object:Ia}),Ps=f.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:f.lazy(()=>Ps),struct:f.lazy(()=>Ra),u16:null,u32:null,u256:null}),Ms=Ps.transform({input:t=>typeof t=="string"?Tt.parseFromStr(t,!0):t,output:t=>Tt.tagToString(t)}),qe=f.enum("Argument",{GasCoin:null,Input:f.u16(),Result:f.u16(),NestedResult:f.tuple([f.u16(),f.u16()])}),xa=f.struct("ProgrammableMoveCall",{package:J,module:f.string(),function:f.string(),typeArguments:f.vector(Ms),arguments:f.vector(qe)}),Aa=f.enum("Command",{MoveCall:xa,TransferObjects:f.struct("TransferObjects",{objects:f.vector(qe),address:qe}),SplitCoins:f.struct("SplitCoins",{coin:qe,amounts:f.vector(qe)}),MergeCoins:f.struct("MergeCoins",{destination:qe,sources:f.vector(qe)}),Publish:f.struct("Publish",{modules:f.vector(f.vector(f.u8()).transform({input:t=>typeof t=="string"?Yt(t):t,output:t=>ot(new Uint8Array(t))})),dependencies:f.vector(J)}),MakeMoveVec:f.struct("MakeMoveVec",{type:wh(Ms).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:f.vector(qe)}),Upgrade:f.struct("Upgrade",{modules:f.vector(f.vector(f.u8()).transform({input:t=>typeof t=="string"?Yt(t):t,output:t=>ot(new Uint8Array(t))})),dependencies:f.vector(J),package:J,ticket:qe})}),ka=f.struct("ProgrammableTransaction",{inputs:f.vector(Ta),commands:f.vector(Aa)}),Ca=f.enum("TransactionKind",{ProgrammableTransaction:ka,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),ja=f.enum("TransactionExpiration",{None:null,Epoch:bh()}),Ra=f.struct("StructTag",{address:J,module:f.string(),name:f.string(),typeParams:f.vector(Ps)}),$a=f.struct("GasData",{payment:f.vector(Ae),owner:J,price:f.u64(),budget:f.u64()}),_a=f.struct("TransactionDataV1",{kind:Ca,sender:J,gasData:$a,expiration:ja}),Ba=f.enum("TransactionData",{V1:_a}),Ua=f.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Pa=f.enum("IntentVersion",{V0:null}),Ma=f.enum("AppId",{Sui:null}),Na=f.struct("Intent",{scope:Ua,version:Pa,appId:Ma});function Da(t){return f.struct(`IntentMessage<${t.name}>`,{intent:Na,value:t})}const La=f.enum("CompressedSignature",{ED25519:f.fixedArray(64,f.u8()),Secp256k1:f.fixedArray(64,f.u8()),Secp256r1:f.fixedArray(64,f.u8()),ZkLogin:f.vector(f.u8()),Passkey:f.vector(f.u8())}),Va=f.enum("PublicKey",{ED25519:f.fixedArray(32,f.u8()),Secp256k1:f.fixedArray(33,f.u8()),Secp256r1:f.fixedArray(33,f.u8()),ZkLogin:f.vector(f.u8()),Passkey:f.fixedArray(33,f.u8())}),za=f.struct("MultiSigPkMap",{pubKey:Va,weight:f.u8()}),Fa=f.struct("MultiSigPublicKey",{pk_map:f.vector(za),threshold:f.u16()}),Eh=f.struct("MultiSig",{sigs:f.vector(La),bitmap:f.u16(),multisig_pk:Fa}),Sh=f.vector(f.u8()).transform({input:t=>typeof t=="string"?Yt(t):t,output:t=>ot(new Uint8Array(t))}),Ha=f.struct("SenderSignedTransaction",{intentMessage:Da(Ba),txSignatures:f.vector(Sh)}),vh=f.vector(Ha,{name:"SenderSignedData"}),Oh=f.struct("PasskeyAuthenticator",{authenticatorData:f.vector(f.u8()),clientDataJson:f.string(),userSignature:f.vector(f.u8())}),Ih=f.enum("PackageUpgradeError",{UnableToFetchPackage:f.struct("UnableToFetchPackage",{packageId:J}),NotAPackage:f.struct("NotAPackage",{objectId:J}),IncompatibleUpgrade:null,DigestDoesNotMatch:f.struct("DigestDoesNotMatch",{digest:f.vector(f.u8())}),UnknownUpgradePolicy:f.struct("UnknownUpgradePolicy",{policy:f.u8()}),PackageIDDoesNotMatch:f.struct("PackageIDDoesNotMatch",{packageId:J,ticketId:J})}),Th=f.struct("ModuleId",{address:J,name:f.string()}),Ka=f.struct("MoveLocation",{module:Th,function:f.u16(),instruction:f.u16(),functionName:f.option(f.string())}),xh=f.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:f.struct("IndexOutOfBounds",{idx:f.u16()}),SecondaryIndexOutOfBounds:f.struct("SecondaryIndexOutOfBounds",{resultIdx:f.u16(),secondaryIdx:f.u16()}),InvalidResultArity:f.struct("InvalidResultArity",{resultIdx:f.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Ah=f.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),kh=f.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:f.struct("MoveObjectTooBig",{objectSize:f.u64(),maxObjectSize:f.u64()}),MovePackageTooBig:f.struct("MovePackageTooBig",{objectSize:f.u64(),maxObjectSize:f.u64()}),CircularObjectOwnership:f.struct("CircularObjectOwnership",{object:J}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:f.option(Ka),MoveAbort:f.tuple([Ka,f.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:f.struct("CommandArgumentError",{argIdx:f.u16(),kind:xh}),TypeArgumentError:f.struct("TypeArgumentError",{argumentIdx:f.u16(),kind:Ah}),UnusedValueWithoutDrop:f.struct("UnusedValueWithoutDrop",{resultIdx:f.u16(),secondaryIdx:f.u16()}),InvalidPublicFunctionReturnType:f.struct("InvalidPublicFunctionReturnType",{idx:f.u16()}),InvalidTransferObject:null,EffectsTooLarge:f.struct("EffectsTooLarge",{currentSize:f.u64(),maxSize:f.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:f.struct("PackageUpgradeError",{upgradeError:Ih}),WrittenObjectsTooLarge:f.struct("WrittenObjectsTooLarge",{currentSize:f.u64(),maxSize:f.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:f.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:f.vector(J)}),AddressDeniedForCoin:f.struct("AddressDeniedForCoin",{address:J,coinType:f.string()}),CoinTypeGlobalPause:f.struct("CoinTypeGlobalPause",{coinType:f.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Ga=f.enum("ExecutionStatus",{Success:null,Failed:f.struct("ExecutionFailed",{error:kh,command:f.option(f.u64())})}),qa=f.struct("GasCostSummary",{computationCost:f.u64(),storageCost:f.u64(),storageRebate:f.u64(),nonRefundableStorageFee:f.u64()}),Ch=f.struct("TransactionEffectsV1",{status:Ga,executedEpoch:f.u64(),gasUsed:qa,modifiedAtVersions:f.vector(f.tuple([J,f.u64()])),sharedObjects:f.vector(Ae),transactionDigest:Me,created:f.vector(f.tuple([Ae,Mt])),mutated:f.vector(f.tuple([Ae,Mt])),unwrapped:f.vector(f.tuple([Ae,Mt])),deleted:f.vector(Ae),unwrappedThenDeleted:f.vector(Ae),wrapped:f.vector(Ae),gasObject:f.tuple([Ae,Mt]),eventsDigest:f.option(Me),dependencies:f.vector(Me)}),Ns=f.tuple([f.u64(),Me]),jh=f.enum("ObjectIn",{NotExist:null,Exist:f.tuple([Ns,Mt])}),Rh=f.enum("ObjectOut",{NotExist:null,ObjectWrite:f.tuple([Me,Mt]),PackageWrite:Ns}),$h=f.enum("IDOperation",{None:null,Created:null,Deleted:null}),_h=f.struct("EffectsObjectChange",{inputState:jh,outputState:Rh,idOperation:$h}),Bh=f.enum("UnchangedSharedKind",{ReadOnlyRoot:Ns,MutateDeleted:f.u64(),ReadDeleted:f.u64(),Cancelled:f.u64(),PerEpochConfig:null}),Uh=f.struct("TransactionEffectsV2",{status:Ga,executedEpoch:f.u64(),gasUsed:qa,transactionDigest:Me,gasObjectIndex:f.option(f.u32()),eventsDigest:f.option(Me),dependencies:f.vector(Me),lamportVersion:f.u64(),changedObjects:f.vector(f.tuple([J,_h])),unchangedSharedObjects:f.vector(f.tuple([J,Bh])),auxDataDigest:f.option(Me)}),Ph=f.enum("TransactionEffects",{V1:Ch,V2:Uh}),Ds={...f,U8:f.u8(),U16:f.u16(),U32:f.u32(),U64:f.u64(),U128:f.u128(),U256:f.u256(),ULEB128:f.uleb128(),Bool:f.bool(),String:f.string(),Address:J,AppId:Ma,Argument:qe,CallArg:Ta,Command:Aa,CompressedSignature:La,GasData:$a,Intent:Na,IntentMessage:Da,IntentScope:Ua,IntentVersion:Pa,MultiSig:Eh,MultiSigPkMap:za,MultiSigPublicKey:Fa,ObjectArg:Ia,ObjectDigest:Me,Owner:Mt,PasskeyAuthenticator:Oh,ProgrammableMoveCall:xa,ProgrammableTransaction:ka,PublicKey:Va,SenderSignedData:vh,SenderSignedTransaction:Ha,SharedObjectRef:Oa,StructTag:Ra,SuiObjectRef:Ae,TransactionData:Ba,TransactionDataV1:_a,TransactionEffects:Ph,TransactionExpiration:ja,TransactionKind:Ca,TypeTag:Ms};BigInt("18446744073709551615");const Wa={mainnet:{packageId:"0x71af035413ed499710980ed8adb010bbf2cc5cacf4ab37c7710a4bb87eb58ba5",packageIdV1:"0xd22b24490e0bae52676651b4f56660a5ff8022a2576e0089f79b3c88d44e08f0",packageIdPricing:"0x71af035413ed499710980ed8adb010bbf2cc5cacf4ab37c7710a4bb87eb58ba5",suins:"0x6e0ddefc0ad98889c04bab9639e512c21766c5e6366f89e696956d9be6952871",discountsPackage:{packageId:"0x03f625d805339b1b0235ba8c503fa6ea62c88c02ddf14cd9d246d9e1febc0c76",discountHouseId:"0x4ce82dee11e6f4858509dcdba1a62985f12e5afb054df680a04f16790bfe1d04"},subNamesPackageId:"0xe177697e191327901637f8d2c5ffbbde8b1aaac27ec1024c4b62d1ebd1cd7430",tempSubdomainsProxyPackageId:"0xf335dfbcb2020fc996250c0d6fd4655c5e2036b0606cac7408aa163f51340886",coupons:{packageId:"0xb162340524e0697461c307b9dc530c17e837b0f2c6d7f787da40d29d29681e5e"},payments:{packageId:"0x863d5f9760f302495398c8e4c6e9784bc17c44b079c826a1813715ef08cbe41a"},pyth:{pythStateId:"0x1f9310238ee9298fb703c3419030b35b22bb1cc37113e3bb5007c99aec79e5b8",wormholeStateId:"0xaeab97f96cf9877fee2883315d459552b2b921edc16d7ceac6eab944dd88919c"},coins:{SUI:{type:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",feed:"0x23d7315113f5b1d3ba7a83604c44b94d79f4fd69af77f804fc7f920a6dc65744"},NS:{type:"0x5145494a5f5100e645e4b0aa950fa6b68f614e8c59e17bc5ded3495123a79178::ns::NS",feed:"0xbb5ff26e47a3a6cc7ec2fce1db996c2a145300edc5acaabe43bf9ff7c5dd5d32"},USDC:{type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",feed:""}},registryTableId:"0xe64cd9db9f829c6cc405d9790bd71567ae07259855f4fba6f02c84f52298c106"},testnet:{packageId:"0x40eee27b014a872f5c3330dcd5329aa55c7fe0fcc6e70c6498852e2e3727172e",packageIdV1:"0x22fa05f21b1ad71442491220bb9338f7b7095fe35000ef88d5400d28523bdd93",packageIdPricing:"0x8a4df604a449ccb9ef2efb9747046b78f78ba60fc8d88df098d0dd47619df5a4",suins:"0x300369e8909b9a6464da265b9a5a9ab6fe2158a040e84e808628cde7a07ee5a3",discountsPackage:{packageId:"0x7976f9bfe81dcbdbb635efb0ecb02844cd79109d3a698d05c06ca9fd2f97d262",discountHouseId:"0x9f1ac0f49ddaec4fd2248ae1cc63ed91946f43a236b333439efb9126f31f8e9b"},subNamesPackageId:"0x3c272bc45f9157b7818ece4f7411bdfa8af46303b071aca4e18c03119c9ff636",tempSubdomainsProxyPackageId:"0x295a0749dae0e76126757c305f218f929df0656df66a6361f8b6c6480a943f12",coupons:{packageId:"0x63029aae8abbefae4f4ac6c5e3e0021159ea93a94ba648681fd64caf5b40677a"},payments:{packageId:"0x9e8b85270cf5e7ec0ae44c745abe000b6dd7d8b54ca2d367e044d8baccefc10c"},pyth:{pythStateId:"0x243759059f4c3111179da5878c12f68d612c21a8d54d85edc86164bb18be1c7c",wormholeStateId:"0x31358d198147da50db32eda2562951d53973a0c0ad5ed738e9b17d88b213d790"},coins:{SUI:{type:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",feed:"0x50c67b3fd225db8912a424dd4baed60ffdde625ed2feaaf283724f9608fea266"},NS:{type:"0xb48aac3f53bab328e1eb4c5b3c34f55e760f2fb3f2305ee1a474878d80f650f0::TESTNS::TESTNS",feed:"0x99137a18354efa7fb6840889d059fdb04c46a6ce21be97ab60d9ad93e91ac758"},USDC:{type:"0xb48aac3f53bab328e1eb4c5b3c34f55e760f2fb3f2305ee1a474878d80f650f0::TESTUSDC::TESTUSDC",feed:""}},registryTableId:"0xb120c0d55432630fce61f7854795a3463deb6e3b443cc4ae72e1282073ff56e4"}};function Mh(t){return $s(t,"dot").split(".").length>2}function Nh(t){if(!(t>0&&t<6))throw new Error("Years must be between 1 and 5")}function Ls(t,e){return`${t}::suins::ConfigKey<${e}>`}function Dh(t){return`${t}::domain::Domain`}function Lh(t){return`${t}::pricing_config::PricingConfig`}function Vh(t){return`${t}::pricing_config::RenewalConfig`}function zh(t){return`${t}::payments::PaymentsConfig`}function Fh(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?ot(t):t.toBase64()}}}const Za={Pure:Fh,ObjectRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:n,objectId:Ge(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:n}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:n,objectId:Ge(t)}}}},ReceivingRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:n,objectId:Ge(t)}}}}};function vn(t){const e=Object.entries(t).map(([n,r])=>E({[n]:r}));return M(te(e),Ct(n=>({...n,$kind:Object.keys(n)[0]})))}const br=M(C(),Ct(t=>Ge(t)),kt(Sa)),Qt=br,wr=C(),Nt=M(te([C(),M(H(),G())]),kt(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),Vs=E({objectId:br,version:Nt,digest:C()}),re=M(te([E({GasCoin:k(!0)}),E({Input:M(H(),G()),type:W(k("pure"))}),E({Input:M(H(),G()),type:W(k("object"))}),E({Result:M(H(),G())}),E({NestedResult:ir([M(H(),G()),M(H(),G())])})]),Ct(t=>({...t,$kind:Object.keys(t)[0]}))),Hh=E({budget:_(Nt),price:_(Nt),owner:_(br),payment:_(x(Vs))}),zs=te([k("address"),k("bool"),k("u8"),k("u16"),k("u32"),k("u64"),k("u128"),k("u256"),E({vector:jt(()=>zs)}),E({datatype:E({package:C(),module:C(),type:C(),typeParameters:x(jt(()=>zs))})}),E({typeParameter:M(H(),G())})]),Kh=E({ref:_(te([k("&"),k("&mut")])),body:zs}),Gh=E({package:Qt,module:C(),function:C(),typeArguments:x(C()),arguments:x(re),_argumentTypes:W(_(x(Kh)))}),qh=E({name:C(),inputs:Rt(C(),te([re,x(re)])),data:Rt(C(),tt())}),Wh=vn({MoveCall:Gh,TransferObjects:E({objects:x(re),address:re}),SplitCoins:E({coin:re,amounts:x(re)}),MergeCoins:E({destination:re,sources:x(re)}),Publish:E({modules:x(wr),dependencies:x(Qt)}),MakeMoveVec:E({type:_(C()),elements:x(re)}),Upgrade:E({modules:x(wr),dependencies:x(Qt),package:Qt,ticket:re}),$Intent:qh}),Xa=vn({ImmOrOwnedObject:Vs,SharedObject:E({objectId:Qt,initialSharedVersion:Nt,mutable:Et()}),Receiving:Vs}),Zh=vn({Object:Xa,Pure:E({bytes:wr}),UnresolvedPure:E({value:tt()}),UnresolvedObject:E({objectId:Qt,version:W(_(Nt)),digest:W(_(C())),initialSharedVersion:W(_(Nt)),mutable:W(_(Et()))})});vn({Object:Xa,Pure:E({bytes:wr})});const Xh=vn({None:k(!0),Epoch:Nt});E({version:k(2),sender:St(br),expiration:St(Xh),gasData:Hh,inputs:x(Zh),commands:x(Wh)});const Er={MoveCall(t){const[e,n="",r=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:n,function:r,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(n=>V(re,n)),address:V(re,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:V(re,t),amounts:e.map(n=>V(re,n))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:V(re,t),sources:e.map(n=>V(re,n))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(n=>typeof n=="string"?n:ot(new Uint8Array(n))),dependencies:e.map(n=>va(n))}}},Upgrade({modules:t,dependencies:e,package:n,ticket:r}){return{$kind:"Upgrade",Upgrade:{modules:t.map(s=>typeof s=="string"?s:ot(new Uint8Array(s))),dependencies:e.map(s=>va(s)),package:n,ticket:V(re,r)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(n=>V(re,n))}}},Intent({name:t,inputs:e={},data:n={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([r,s])=>[r,Array.isArray(s)?s.map(i=>V(re,i)):V(re,s)])),data:n}}}};function Yh(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}const Sr="CoinWithBalance",Ya=Us("0x2::sui::SUI");function Jh({type:t=Ya,balance:e,useGasCoin:n=!0}){let r=null;return s=>{if(r)return r;s.addIntentResolver(Sr,ep);const i=t==="gas"?t:Us(t);return r=s.add(Er.Intent({name:Sr,inputs:{},data:{type:i===Ya&&n?"gas":i,balance:BigInt(e)}})),r}}const Qh=E({type:C(),balance:sr()});async function ep(t,e,n){const r=new Set,s=new Map;if(!t.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const u of t.commands)if(u.$kind==="$Intent"&&u.$Intent.name===Sr){const{type:l,balance:h}=V(Qh,u.$Intent.data);l!=="gas"&&h>0n&&r.add(l),s.set(l,(s.get(l)??0n)+h)}const i=new Set;for(const u of t.inputs)u.Object?.ImmOrOwnedObject&&i.add(u.Object.ImmOrOwnedObject.objectId),u.UnresolvedObject?.objectId&&i.add(u.UnresolvedObject.objectId);const o=new Map,a=np(e);await Promise.all([...r].map(async u=>{o.set(u,await tp({coinType:u,balance:s.get(u),client:a,owner:t.sender,usedIds:i}))}));const c=new Map;c.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[u,l]of t.commands.entries()){if(l.$kind!=="$Intent"||l.$Intent.name!==Sr)continue;const{type:h,balance:g}=l.$Intent.data;if(g===0n&&h!=="gas"){t.replaceCommand(u,Er.MoveCall({target:"0x2::coin::zero",typeArguments:[h]}));continue}const b=[];if(!c.has(h)){const[p,...y]=o.get(h).map(w=>t.addInput("object",Za.ObjectRef({objectId:w.coinObjectId,digest:w.digest,version:w.version})));y.length>0&&b.push(Er.MergeCoins(p,y)),c.set(h,p)}b.push(Er.SplitCoins(c.get(h),[t.addInput("pure",Za.Pure(Ds.u64().serialize(g)))])),t.replaceCommand(u,b),t.mapArguments(p=>p.$kind==="Result"&&p.Result===u?{$kind:"NestedResult",NestedResult:[u+b.length-1,0]}:p)}return n()}async function tp({coinType:t,balance:e,client:n,owner:r,usedIds:s}){let i=e;const o=[];return a();async function a(c=null){const{data:u,hasNextPage:l,nextCursor:h}=await n.getCoins({owner:r,coinType:t,cursor:c}),g=u.sort((b,p)=>Number(BigInt(p.balance)-BigInt(b.balance)));for(const b of g){if(s.has(b.coinObjectId))continue;const p=BigInt(b.balance);if(o.push(b),i-=p,i<=0)return o}if(l)return a(h);throw new Error(`Not enough coins of type ${t} to satisfy requested balance`)}}function np(t){const e=Yh(t);if(!e.jsonRpc)throw new Error("CoinWithBalance intent currently only works with SuiClient");return e}function Ja(t,e){return function(){return t.apply(e,arguments)}}const{toString:rp}=Object.prototype,{getPrototypeOf:Fs}=Object,{iterator:vr,toStringTag:Qa}=Symbol,Or=(t=>e=>{const n=rp.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ne=t=>(t=t.toLowerCase(),e=>Or(e)===t),Ir=t=>e=>typeof e===t,{isArray:en}=Array,tn=Ir("undefined");function On(t){return t!==null&&!tn(t)&&t.constructor!==null&&!tn(t.constructor)&&ye(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ec=Ne("ArrayBuffer");function sp(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ec(t.buffer),e}const ip=Ir("string"),ye=Ir("function"),tc=Ir("number"),In=t=>t!==null&&typeof t=="object",op=t=>t===!0||t===!1,Tr=t=>{if(Or(t)!=="object")return!1;const e=Fs(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Qa in t)&&!(vr in t)},ap=t=>{if(!In(t)||On(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},cp=Ne("Date"),up=Ne("File"),lp=Ne("Blob"),dp=Ne("FileList"),fp=t=>In(t)&&ye(t.pipe),hp=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ye(t.append)&&((e=Or(t))==="formdata"||e==="object"&&ye(t.toString)&&t.toString()==="[object FormData]"))},pp=Ne("URLSearchParams"),[gp,mp,yp,bp]=["ReadableStream","Request","Response","Headers"].map(Ne),wp=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Tn(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),en(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(On(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function nc(t,e){if(On(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Dt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,rc=t=>!tn(t)&&t!==Dt;function Hs(){const{caseless:t,skipUndefined:e}=rc(this)&&this||{},n={},r=(s,i)=>{const o=t&&nc(n,i)||i;Tr(n[o])&&Tr(s)?n[o]=Hs(n[o],s):Tr(s)?n[o]=Hs({},s):en(s)?n[o]=s.slice():(!e||!tn(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Tn(arguments[s],r);return n}const Ep=(t,e,n,{allOwnKeys:r}={})=>(Tn(e,(s,i)=>{n&&ye(s)?t[i]=Ja(s,n):t[i]=s},{allOwnKeys:r}),t),Sp=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),vp=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Op=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Fs(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Ip=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Tp=t=>{if(!t)return null;if(en(t))return t;let e=t.length;if(!tc(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},xp=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Fs(Uint8Array)),Ap=(t,e)=>{const r=(t&&t[vr]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},kp=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Cp=Ne("HTMLFormElement"),jp=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),sc=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Rp=Ne("RegExp"),ic=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Tn(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},$p=t=>{ic(t,(e,n)=>{if(ye(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ye(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},_p=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return en(t)?r(t):r(String(t).split(e)),n},Bp=()=>{},Up=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Pp(t){return!!(t&&ye(t.append)&&t[Qa]==="FormData"&&t[vr])}const Mp=t=>{const e=new Array(10),n=(r,s)=>{if(In(r)){if(e.indexOf(r)>=0)return;if(On(r))return r;if(!("toJSON"in r)){e[s]=r;const i=en(r)?[]:{};return Tn(r,(o,a)=>{const c=n(o,s+1);!tn(c)&&(i[a]=c)}),e[s]=void 0,i}}return r};return n(t,0)},Np=Ne("AsyncFunction"),Dp=t=>t&&(In(t)||ye(t))&&ye(t.then)&&ye(t.catch),oc=((t,e)=>t?setImmediate:e?((n,r)=>(Dt.addEventListener("message",({source:s,data:i})=>{s===Dt&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Dt.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ye(Dt.postMessage)),Lp=typeof queueMicrotask<"u"?queueMicrotask.bind(Dt):typeof process<"u"&&process.nextTick||oc,m={isArray:en,isArrayBuffer:ec,isBuffer:On,isFormData:hp,isArrayBufferView:sp,isString:ip,isNumber:tc,isBoolean:op,isObject:In,isPlainObject:Tr,isEmptyObject:ap,isReadableStream:gp,isRequest:mp,isResponse:yp,isHeaders:bp,isUndefined:tn,isDate:cp,isFile:up,isBlob:lp,isRegExp:Rp,isFunction:ye,isStream:fp,isURLSearchParams:pp,isTypedArray:xp,isFileList:dp,forEach:Tn,merge:Hs,extend:Ep,trim:wp,stripBOM:Sp,inherits:vp,toFlatObject:Op,kindOf:Or,kindOfTest:Ne,endsWith:Ip,toArray:Tp,forEachEntry:Ap,matchAll:kp,isHTMLForm:Cp,hasOwnProperty:sc,hasOwnProp:sc,reduceDescriptors:ic,freezeMethods:$p,toObjectSet:_p,toCamelCase:jp,noop:Bp,toFiniteNumber:Up,findKey:nc,global:Dt,isContextDefined:rc,isSpecCompliantForm:Pp,toJSONObject:Mp,isAsyncFn:Np,isThenable:Dp,setImmediate:oc,asap:Lp,isIterable:t=>t!=null&&ye(t[vr])};function B(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}m.inherits(B,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:m.toJSONObject(this.config),code:this.code,status:this.status}}});const ac=B.prototype,cc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{cc[t]={value:t}}),Object.defineProperties(B,cc),Object.defineProperty(ac,"isAxiosError",{value:!0}),B.from=(t,e,n,r,s,i)=>{const o=Object.create(ac);m.toFlatObject(t,o,function(l){return l!==Error.prototype},u=>u!=="isAxiosError");const a=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return B.call(o,a,c,n,r,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const Vp=null;function Ks(t){return m.isPlainObject(t)||m.isArray(t)}function uc(t){return m.endsWith(t,"[]")?t.slice(0,-2):t}function lc(t,e,n){return t?t.concat(e).map(function(s,i){return s=uc(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function zp(t){return m.isArray(t)&&!t.some(Ks)}const Fp=m.toFlatObject(m,{},null,function(e){return/^is[A-Z]/.test(e)});function xr(t,e,n){if(!m.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=m.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,w){return!m.isUndefined(w[y])});const r=n.metaTokens,s=n.visitor||l,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&m.isSpecCompliantForm(e);if(!m.isFunction(s))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(m.isDate(p))return p.toISOString();if(m.isBoolean(p))return p.toString();if(!c&&m.isBlob(p))throw new B("Blob is not supported. Use a Buffer instead.");return m.isArrayBuffer(p)||m.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function l(p,y,w){let S=p;if(p&&!w&&typeof p=="object"){if(m.endsWith(y,"{}"))y=r?y:y.slice(0,-2),p=JSON.stringify(p);else if(m.isArray(p)&&zp(p)||(m.isFileList(p)||m.endsWith(y,"[]"))&&(S=m.toArray(p)))return y=uc(y),S.forEach(function(v,$){!(m.isUndefined(v)||v===null)&&e.append(o===!0?lc([y],$,i):o===null?y:y+"[]",u(v))}),!1}return Ks(p)?!0:(e.append(lc(w,y,i),u(p)),!1)}const h=[],g=Object.assign(Fp,{defaultVisitor:l,convertValue:u,isVisitable:Ks});function b(p,y){if(!m.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(p),m.forEach(p,function(S,A){(!(m.isUndefined(S)||S===null)&&s.call(e,S,m.isString(A)?A.trim():A,y,g))===!0&&b(S,y?y.concat(A):[A])}),h.pop()}}if(!m.isObject(t))throw new TypeError("data must be an object");return b(t),e}function dc(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Gs(t,e){this._pairs=[],t&&xr(t,this,e)}const fc=Gs.prototype;fc.append=function(e,n){this._pairs.push([e,n])},fc.toString=function(e){const n=e?function(r){return e.call(this,r,dc)}:dc;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Hp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function hc(t,e,n){if(!e)return t;const r=n&&n.encode||Hp;m.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=m.isURLSearchParams(e)?e.toString():new Gs(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class pc{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){m.forEach(this.handlers,function(r){r!==null&&e(r)})}}const gc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kp={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:Gs,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},qs=typeof window<"u"&&typeof document<"u",Ws=typeof navigator=="object"&&navigator||void 0,Gp=qs&&(!Ws||["ReactNative","NativeScript","NS"].indexOf(Ws.product)<0),qp=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Wp=qs&&window.location.href||"http://localhost",fe={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qs,hasStandardBrowserEnv:Gp,hasStandardBrowserWebWorkerEnv:qp,navigator:Ws,origin:Wp},Symbol.toStringTag,{value:"Module"})),...Kp};function Zp(t,e){return xr(t,new fe.classes.URLSearchParams,{visitor:function(n,r,s,i){return fe.isNode&&m.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function Xp(t){return m.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Yp(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function mc(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=i>=n.length;return o=!o&&m.isArray(s)?s.length:o,c?(m.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!m.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&m.isArray(s[o])&&(s[o]=Yp(s[o])),!a)}if(m.isFormData(t)&&m.isFunction(t.entries)){const n={};return m.forEachEntry(t,(r,s)=>{e(Xp(r),s,n,0)}),n}return null}function Jp(t,e,n){if(m.isString(t))try{return(0,JSON.parse)(t),m.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const xn={transitional:gc,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=m.isObject(e);if(i&&m.isHTMLForm(e)&&(e=new FormData(e)),m.isFormData(e))return s?JSON.stringify(mc(e)):e;if(m.isArrayBuffer(e)||m.isBuffer(e)||m.isStream(e)||m.isFile(e)||m.isBlob(e)||m.isReadableStream(e))return e;if(m.isArrayBufferView(e))return e.buffer;if(m.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Zp(e,this.formSerializer).toString();if((a=m.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return xr(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),Jp(e)):e}],transformResponse:[function(e){const n=this.transitional||xn.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(m.isResponse(e)||m.isReadableStream(e))return e;if(e&&m.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?B.from(a,B.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fe.classes.FormData,Blob:fe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};m.forEach(["delete","get","head","post","put","patch"],t=>{xn.headers[t]={}});const Qp=m.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eg=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&Qp[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},yc=Symbol("internals");function An(t){return t&&String(t).trim().toLowerCase()}function Ar(t){return t===!1||t==null?t:m.isArray(t)?t.map(Ar):String(t)}function tg(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const ng=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Zs(t,e,n,r,s){if(m.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!m.isString(e)){if(m.isString(r))return e.indexOf(r)!==-1;if(m.isRegExp(r))return r.test(e)}}function rg(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function sg(t,e){const n=m.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class be{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,c,u){const l=An(c);if(!l)throw new Error("header name must be a non-empty string");const h=m.findKey(s,l);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||c]=Ar(a))}const o=(a,c)=>m.forEach(a,(u,l)=>i(u,l,c));if(m.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(m.isString(e)&&(e=e.trim())&&!ng(e))o(eg(e),n);else if(m.isObject(e)&&m.isIterable(e)){let a={},c,u;for(const l of e){if(!m.isArray(l))throw TypeError("Object iterator must return a key-value pair");a[u=l[0]]=(c=a[u])?m.isArray(c)?[...c,l[1]]:[c,l[1]]:l[1]}o(a,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=An(e),e){const r=m.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return tg(s);if(m.isFunction(n))return n.call(this,s,r);if(m.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=An(e),e){const r=m.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Zs(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=An(o),o){const a=m.findKey(r,o);a&&(!n||Zs(r,r[a],a,n))&&(delete r[a],s=!0)}}return m.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Zs(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return m.forEach(this,(s,i)=>{const o=m.findKey(r,i);if(o){n[o]=Ar(s),delete n[i];return}const a=e?rg(i):String(i).trim();a!==i&&delete n[i],n[a]=Ar(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return m.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&m.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[yc]=this[yc]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=An(o);r[a]||(sg(s,o),r[a]=!0)}return m.isArray(e)?e.forEach(i):i(e),this}}be.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),m.reduceDescriptors(be.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}}),m.freezeMethods(be);function Xs(t,e){const n=this||xn,r=e||n,s=be.from(r.headers);let i=r.data;return m.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function bc(t){return!!(t&&t.__CANCEL__)}function nn(t,e,n){B.call(this,t??"canceled",B.ERR_CANCELED,e,n),this.name="CanceledError"}m.inherits(nn,B,{__CANCEL__:!0});function wc(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new B("Request failed with status code "+n.status,[B.ERR_BAD_REQUEST,B.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function ig(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function og(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),l=r[i];o||(o=u),n[s]=c,r[s]=u;let h=i,g=0;for(;h!==s;)g+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-o<e)return;const b=l&&u-l;return b?Math.round(g*1e3/b):void 0}}function ag(t,e){let n=0,r=1e3/e,s,i;const o=(u,l=Date.now())=>{n=l,s=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const l=Date.now(),h=l-n;h>=r?o(u,l):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},r-h)))},()=>s&&o(s)]}const kr=(t,e,n=3)=>{let r=0;const s=og(50,250);return ag(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,c=o-r,u=s(c),l=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&l?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},Ec=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Sc=t=>(...e)=>m.asap(()=>t(...e)),cg=fe.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,fe.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(fe.origin),fe.navigator&&/(msie|trident)/i.test(fe.navigator.userAgent)):()=>!0,ug=fe.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];m.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),m.isString(r)&&o.push("path="+r),m.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function lg(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function dg(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function vc(t,e,n){let r=!lg(e);return t&&(r||n==!1)?dg(t,e):e}const Oc=t=>t instanceof be?{...t}:t;function Lt(t,e){e=e||{};const n={};function r(u,l,h,g){return m.isPlainObject(u)&&m.isPlainObject(l)?m.merge.call({caseless:g},u,l):m.isPlainObject(l)?m.merge({},l):m.isArray(l)?l.slice():l}function s(u,l,h,g){if(m.isUndefined(l)){if(!m.isUndefined(u))return r(void 0,u,h,g)}else return r(u,l,h,g)}function i(u,l){if(!m.isUndefined(l))return r(void 0,l)}function o(u,l){if(m.isUndefined(l)){if(!m.isUndefined(u))return r(void 0,u)}else return r(void 0,l)}function a(u,l,h){if(h in e)return r(u,l);if(h in t)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,l,h)=>s(Oc(u),Oc(l),h,!0)};return m.forEach(Object.keys({...t,...e}),function(l){const h=c[l]||s,g=h(t[l],e[l],l);m.isUndefined(g)&&h!==a||(n[l]=g)}),n}const Ic=t=>{const e=Lt({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;if(e.headers=o=be.from(o),e.url=hc(vc(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),m.isFormData(n)){if(fe.hasStandardBrowserEnv||fe.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(m.isFunction(n.getHeaders)){const c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([l,h])=>{u.includes(l.toLowerCase())&&o.set(l,h)})}}if(fe.hasStandardBrowserEnv&&(r&&m.isFunction(r)&&(r=r(e)),r||r!==!1&&cg(e.url))){const c=s&&i&&ug.read(i);c&&o.set(s,c)}return e},fg=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(n,r){const s=Ic(t);let i=s.data;const o=be.from(s.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=s,l,h,g,b,p;function y(){b&&b(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(l),s.signal&&s.signal.removeEventListener("abort",l)}let w=new XMLHttpRequest;w.open(s.method.toUpperCase(),s.url,!0),w.timeout=s.timeout;function S(){if(!w)return;const v=be.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),P={data:!a||a==="text"||a==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:v,config:t,request:w};wc(function(z){n(z),y()},function(z){r(z),y()},P),w=null}"onloadend"in w?w.onloadend=S:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(S)},w.onabort=function(){w&&(r(new B("Request aborted",B.ECONNABORTED,t,w)),w=null)},w.onerror=function($){const P=$&&$.message?$.message:"Network Error",q=new B(P,B.ERR_NETWORK,t,w);q.event=$||null,r(q),w=null},w.ontimeout=function(){let $=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const P=s.transitional||gc;s.timeoutErrorMessage&&($=s.timeoutErrorMessage),r(new B($,P.clarifyTimeoutError?B.ETIMEDOUT:B.ECONNABORTED,t,w)),w=null},i===void 0&&o.setContentType(null),"setRequestHeader"in w&&m.forEach(o.toJSON(),function($,P){w.setRequestHeader(P,$)}),m.isUndefined(s.withCredentials)||(w.withCredentials=!!s.withCredentials),a&&a!=="json"&&(w.responseType=s.responseType),u&&([g,p]=kr(u,!0),w.addEventListener("progress",g)),c&&w.upload&&([h,b]=kr(c),w.upload.addEventListener("progress",h),w.upload.addEventListener("loadend",b)),(s.cancelToken||s.signal)&&(l=v=>{w&&(r(!v||v.type?new nn(null,t,w):v),w.abort(),w=null)},s.cancelToken&&s.cancelToken.subscribe(l),s.signal&&(s.signal.aborted?l():s.signal.addEventListener("abort",l)));const A=ig(s.url);if(A&&fe.protocols.indexOf(A)===-1){r(new B("Unsupported protocol "+A+":",B.ERR_BAD_REQUEST,t));return}w.send(i||null)})},hg=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,a();const l=u instanceof Error?u:this.reason;r.abort(l instanceof B?l:new nn(l instanceof Error?l.message:l))}};let o=e&&setTimeout(()=>{o=null,i(new B(`timeout ${e} of ms exceeded`,B.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>m.asap(a),c}},pg=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},gg=async function*(t,e){for await(const n of mg(t))yield*pg(n,e)},mg=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Tc=(t,e,n,r)=>{const s=gg(t,e);let i=0,o,a=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:l}=await s.next();if(u){a(),c.close();return}let h=l.byteLength;if(n){let g=i+=h;n(g)}c.enqueue(new Uint8Array(l))}catch(u){throw a(u),u}},cancel(c){return a(c),s.return()}},{highWaterMark:2})},xc=64*1024,{isFunction:Cr}=m,yg=(({Request:t,Response:e})=>({Request:t,Response:e}))(m.global),{ReadableStream:Ac,TextEncoder:kc}=m.global,Cc=(t,...e)=>{try{return!!t(...e)}catch{return!1}},bg=t=>{t=m.merge.call({skipUndefined:!0},yg,t);const{fetch:e,Request:n,Response:r}=t,s=e?Cr(e):typeof fetch=="function",i=Cr(n),o=Cr(r);if(!s)return!1;const a=s&&Cr(Ac),c=s&&(typeof kc=="function"?(p=>y=>p.encode(y))(new kc):async p=>new Uint8Array(await new n(p).arrayBuffer())),u=i&&a&&Cc(()=>{let p=!1;const y=new n(fe.origin,{body:new Ac,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!y}),l=o&&a&&Cc(()=>m.isReadableStream(new r("").body)),h={stream:l&&(p=>p.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!h[p]&&(h[p]=(y,w)=>{let S=y&&y[p];if(S)return S.call(y);throw new B(`Response type '${p}' is not supported`,B.ERR_NOT_SUPPORT,w)})});const g=async p=>{if(p==null)return 0;if(m.isBlob(p))return p.size;if(m.isSpecCompliantForm(p))return(await new n(fe.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(m.isArrayBufferView(p)||m.isArrayBuffer(p))return p.byteLength;if(m.isURLSearchParams(p)&&(p=p+""),m.isString(p))return(await c(p)).byteLength},b=async(p,y)=>{const w=m.toFiniteNumber(p.getContentLength());return w??g(y)};return async p=>{let{url:y,method:w,data:S,signal:A,cancelToken:v,timeout:$,onDownloadProgress:P,onUploadProgress:q,responseType:z,headers:D,withCredentials:T="same-origin",fetchOptions:j}=Ic(p),U=e||fetch;z=z?(z+"").toLowerCase():"text";let F=hg([A,v&&v.toAbortSignal()],$),K=null;const L=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let se;try{if(q&&u&&w!=="get"&&w!=="head"&&(se=await b(D,S))!==0){let ve=new n(y,{method:"POST",body:S,duplex:"half"}),Ze;if(m.isFormData(S)&&(Ze=ve.headers.get("content-type"))&&D.setContentType(Ze),ve.body){const[an,$n]=Ec(se,kr(Sc(q)));S=Tc(ve.body,xc,an,$n)}}m.isString(T)||(T=T?"include":"omit");const Q=i&&"credentials"in n.prototype,De={...j,signal:F,method:w.toUpperCase(),headers:D.normalize().toJSON(),body:S,duplex:"half",credentials:Q?T:void 0};K=i&&new n(y,De);let he=await(i?U(K,j):U(y,De));const Ce=l&&(z==="stream"||z==="response");if(l&&(P||Ce&&L)){const ve={};["status","statusText","headers"].forEach(Xc=>{ve[Xc]=he[Xc]});const Ze=m.toFiniteNumber(he.headers.get("content-length")),[an,$n]=P&&Ec(Ze,kr(Sc(P),!0))||[];he=new r(Tc(he.body,xc,an,()=>{$n&&$n(),L&&L()}),ve)}z=z||"text";let Ft=await h[m.findKey(h,z)||"text"](he,p);return!Ce&&L&&L(),await new Promise((ve,Ze)=>{wc(ve,Ze,{data:Ft,headers:be.from(he.headers),status:he.status,statusText:he.statusText,config:p,request:K})})}catch(Q){throw L&&L(),Q&&Q.name==="TypeError"&&/Load failed|fetch/i.test(Q.message)?Object.assign(new B("Network Error",B.ERR_NETWORK,p,K),{cause:Q.cause||Q}):B.from(Q,Q&&Q.code,p,K)}}},wg=new Map,jc=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,a=o,c,u,l=wg;for(;a--;)c=i[a],u=l.get(c),u===void 0&&l.set(c,u=a?new Map:bg(e)),l=u;return u};jc();const Ys={http:Vp,xhr:fg,fetch:{get:jc}};m.forEach(Ys,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Rc=t=>`- ${t}`,Eg=t=>m.isFunction(t)||t===null||t===!1,$c={getAdapter:(t,e)=>{t=m.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let a;if(s=r,!Eg(r)&&(s=Ys[(a=String(r)).toLowerCase()],s===void 0))throw new B(`Unknown adapter '${a}'`);if(s&&(m.isFunction(s)||(s=s.get(e))))break;i[a||"#"+o]=s}if(!s){const o=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=n?o.length>1?`since :
`+o.map(Rc).join(`
`):" "+Rc(o[0]):"as no adapter specified";throw new B("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:Ys};function Js(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new nn(null,t)}function _c(t){return Js(t),t.headers=be.from(t.headers),t.data=Xs.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),$c.getAdapter(t.adapter||xn.adapter,t)(t).then(function(r){return Js(t),r.data=Xs.call(t,t.transformResponse,r),r.headers=be.from(r.headers),r},function(r){return bc(r)||(Js(t),r&&r.response&&(r.response.data=Xs.call(t,t.transformResponse,r.response),r.response.headers=be.from(r.response.headers))),Promise.reject(r)})}const Bc="1.12.2",jr={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{jr[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Uc={};jr.transitional=function(e,n,r){function s(i,o){return"[Axios v"+Bc+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new B(s(o," has been removed"+(n?" in "+n:"")),B.ERR_DEPRECATED);return n&&!Uc[o]&&(Uc[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}},jr.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Sg(t,e,n){if(typeof t!="object")throw new B("options must be an object",B.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],c=a===void 0||o(a,i,t);if(c!==!0)throw new B("option "+i+" must be "+c,B.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new B("Unknown option "+i,B.ERR_BAD_OPTION)}}const Rr={assertOptions:Sg,validators:jr},We=Rr.validators;class Vt{constructor(e){this.defaults=e||{},this.interceptors={request:new pc,response:new pc}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Lt(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Rr.assertOptions(r,{silentJSONParsing:We.transitional(We.boolean),forcedJSONParsing:We.transitional(We.boolean),clarifyTimeoutError:We.transitional(We.boolean)},!1),s!=null&&(m.isFunction(s)?n.paramsSerializer={serialize:s}:Rr.assertOptions(s,{encode:We.function,serialize:We.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Rr.assertOptions(n,{baseUrl:We.spelling("baseURL"),withXsrfToken:We.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&m.merge(i.common,i[n.method]);i&&m.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),n.headers=be.concat(o,i);const a=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(c=c&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let l,h=0,g;if(!c){const p=[_c.bind(this),void 0];for(p.unshift(...a),p.push(...u),g=p.length,l=Promise.resolve(n);h<g;)l=l.then(p[h++],p[h++]);return l}g=a.length;let b=n;for(;h<g;){const p=a[h++],y=a[h++];try{b=p(b)}catch(w){y.call(this,w);break}}try{l=_c.call(this,b)}catch(p){return Promise.reject(p)}for(h=0,g=u.length;h<g;)l=l.then(u[h++],u[h++]);return l}getUri(e){e=Lt(this.defaults,e);const n=vc(e.baseURL,e.url,e.allowAbsoluteUrls);return hc(n,e.params,e.paramsSerializer)}}m.forEach(["delete","get","head","options"],function(e){Vt.prototype[e]=function(n,r){return this.request(Lt(r||{},{method:e,url:n,data:(r||{}).data}))}}),m.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Lt(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Vt.prototype[e]=n(),Vt.prototype[e+"Form"]=n(!0)});class Qs{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new nn(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Qs(function(s){e=s}),cancel:e}}}function vg(t){return function(n){return t.apply(null,n)}}function Og(t){return m.isObject(t)&&t.isAxiosError===!0}const ei={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ei).forEach(([t,e])=>{ei[e]=t});function Pc(t){const e=new Vt(t),n=Ja(Vt.prototype.request,e);return m.extend(n,Vt.prototype,e,{allOwnKeys:!0}),m.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Pc(Lt(t,s))},n}const ie=Pc(xn);ie.Axios=Vt,ie.CanceledError=nn,ie.CancelToken=Qs,ie.isCancel=bc,ie.VERSION=Bc,ie.toFormData=xr,ie.AxiosError=B,ie.Cancel=ie.CanceledError,ie.all=function(e){return Promise.all(e)},ie.spread=vg,ie.isAxiosError=Og,ie.mergeConfig=Lt,ie.AxiosHeaders=be,ie.formToJSON=t=>mc(m.isHTMLForm(t)?new FormData(t):t),ie.getAdapter=$c.getAdapter,ie.HttpStatusCode=ei,ie.default=ie;var ti,Mc;function Ig(){if(Mc)return ti;Mc=1;const t=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);return ti=e=>!t.has(e&&e.code),ti}var Tg=Ig();const xg=Pd(Tg),ni="axios-retry";function Nc(t){const e=["ERR_CANCELED","ECONNABORTED"];return t.response||!t.code||e.includes(t.code)?!1:xg(t)}const Dc=["get","head","options"],Ag=Dc.concat(["put","delete"]);function ri(t){return t.code!=="ECONNABORTED"&&(!t.response||t.response.status===429||t.response.status>=500&&t.response.status<=599)}function kg(t){return t.config?.method?ri(t)&&Dc.indexOf(t.config.method)!==-1:!1}function Lc(t){return t.config?.method?ri(t)&&Ag.indexOf(t.config.method)!==-1:!1}function Vc(t){return Nc(t)||Lc(t)}function si(t=void 0){const e=t?.response?.headers["retry-after"];if(!e)return 0;let n=(Number(e)||0)*1e3;return n===0&&(n=(new Date(e).valueOf()||0)-Date.now()),Math.max(0,n)}function Cg(t=0,e=void 0){return Math.max(0,si(e))}function jg(t=0,e=void 0,n=100){const r=2**t*n,s=Math.max(r,si(e)),i=s*.2*Math.random();return s+i}function Rg(t=100){return(e=0,n=void 0)=>{const r=e*t;return Math.max(r,si(n))}}const $g={retries:3,retryCondition:Vc,retryDelay:Cg,shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function _g(t,e){return{...$g,...e,...t[ni]}}function zc(t,e,n=!1){const r=_g(t,e||{});return r.retryCount=r.retryCount||0,(!r.lastRequestTime||n)&&(r.lastRequestTime=Date.now()),t[ni]=r,r}function Bg(t,e){t.defaults.agent===e.agent&&delete e.agent,t.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,t.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}async function Ug(t,e){const{retries:n,retryCondition:r}=t,s=(t.retryCount||0)<n&&r(e);if(typeof s=="object")try{return await s!==!1}catch{return!1}return s}async function Pg(t,e,n,r){e.retryCount+=1;const{retryDelay:s,shouldResetTimeout:i,onRetry:o}=e,a=s(e.retryCount,n);if(Bg(t,r),!i&&r.timeout&&e.lastRequestTime){const c=Date.now()-e.lastRequestTime,u=r.timeout-c-a;if(u<=0)return Promise.reject(n);r.timeout=u}return r.transformRequest=[c=>c],await o(e.retryCount,n,r),r.signal?.aborted?Promise.resolve(t(r)):new Promise(c=>{const u=()=>{clearTimeout(l),c(t(r))},l=setTimeout(()=>{c(t(r)),r.signal?.removeEventListener&&r.signal.removeEventListener("abort",u)},a);r.signal?.addEventListener&&r.signal.addEventListener("abort",u,{once:!0})})}async function Mg(t,e){t.retryCount>=t.retries&&await t.onMaxRetryTimesExceeded(e,t.retryCount)}const at=(t,e)=>{const n=t.interceptors.request.use(s=>(zc(s,e,!0),s[ni]?.validateResponse&&(s.validateStatus=()=>!1),s)),r=t.interceptors.response.use(null,async s=>{const{config:i}=s;if(!i)return Promise.reject(s);const o=zc(i,e);return s.response&&o.validateResponse?.(s.response)?s.response:await Ug(o,s)?Pg(t,o,s,i):(await Mg(o,s),Promise.reject(s))});return{requestInterceptorId:n,responseInterceptorId:r}};at.isNetworkError=Nc,at.isSafeRequestError=kg,at.isIdempotentRequestError=Lc,at.isNetworkOrIdempotentRequestError=Vc,at.exponentialDelay=jg,at.linearDelay=Rg,at.isRetryableError=ri;class Ng{constructor(e,n){this.httpClient=ie.create({baseURL:e,timeout:n?.timeout||5e3}),at(this.httpClient,{retries:n?.httpRetries||3,retryDelay:at.exponentialDelay})}async getLatestVaas(e){return(await this.httpClient.get("/api/latest_vaas",{params:{ids:e}})).data}}function Dg(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength),r=7+e.getUint8(6)+1,s=e.getUint16(r,!1),i=r+2;return t.subarray(i,i+s)}var Fc=t=>{throw TypeError(t)},ii=(t,e,n)=>e.has(t)||Fc("Cannot "+n),ke=(t,e,n)=>(ii(t,e,"read from private field"),n?n.call(t):e.get(t)),rn=(t,e,n)=>e.has(t)?Fc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),kn=(t,e,n,r)=>(ii(t,e,"write to private field"),e.set(t,n),n),zt=(t,e,n)=>(ii(t,e,"access private method"),n),Cn,jn,sn,on,Rn,ct,Hc,Kc,Gc,qc,oi,Wc;const Lg=16*1024;class Vg extends Ng{async getPriceFeedsUpdateData(e){return(await this.getLatestVaas(e)).map(r=>Yt(r))}}class zg{constructor(e,n,r){rn(this,ct),rn(this,Cn),rn(this,jn),rn(this,sn,new Map),rn(this,on),rn(this,Rn),this.provider=e,this.pythStateId=n,this.wormholeStateId=r}async verifyVaas(e,n){const r=await this.getWormholePackageId(),s=[];for(const i of e){const[o]=n.moveCall({target:`${r}::vaa::parse_and_verify`,arguments:[n.object(this.wormholeStateId),n.pure.vector("u8",i),n.object.clock()]});s.push(o)}return s}async updatePriceFeeds(e,n,r){const s=await this.getPythPackageId();let i;if(n.length>1)throw new Error("SDK does not support sending multiple accumulator messages in a single transaction");const o=Dg(n[0]),a=await this.verifyVaas([o],e);[i]=e.moveCall({target:`${s}::pyth::create_authenticated_price_infos_using_accumulator`,arguments:[e.object(this.pythStateId),e.pure(Ds.vector(Ds.U8).serialize(Array.from(n[0]),{maxSize:Lg}).toBytes()),a[0],e.object.clock()]});const c=[],u=await this.getBaseUpdateFee();for(const l of r){const h=await this.getPriceFeedObjectId(l);if(!h)throw new Error(`Price feed ${l} not found, please create it first`);c.push(h),[i]=e.moveCall({target:`${s}::pyth::update_single_price_feed`,arguments:[e.object(this.pythStateId),i,e.object(h),Jh({balance:u}),e.object.clock()]})}return e.moveCall({target:`${s}::hot_potato_vector::destroy`,arguments:[i],typeArguments:[`${s}::price_info::PriceInfo`]}),c}getPriceFeedObjectId(e){return ke(this,sn).has(e)||ke(this,sn).set(e,zt(this,ct,Hc).call(this,e).catch(n=>{throw ke(this,sn).delete(e),n})),ke(this,sn).get(e)}getPriceTableInfo(){if(!ke(this,on)){const e=zt(this,ct,Kc).call(this).catch(n=>{throw kn(this,on,void 0),n});kn(this,on,e)}return ke(this,on)}getWormholePackageId(){return ke(this,jn)||kn(this,jn,zt(this,ct,Gc).call(this)),ke(this,jn)}getPythPackageId(){return ke(this,Cn)||kn(this,Cn,zt(this,ct,qc).call(this)),ke(this,Cn)}getBaseUpdateFee(){return ke(this,Rn)||kn(this,Rn,zt(this,ct,Wc).call(this)),ke(this,Rn)}}Cn=new WeakMap,jn=new WeakMap,sn=new WeakMap,on=new WeakMap,Rn=new WeakMap,ct=new WeakSet,Hc=async function(t){const{id:e,fieldType:n}=await this.getPriceTableInfo(),r=await this.provider.getDynamicFieldObject({parentId:e,name:{type:`${n}::price_identifier::PriceIdentifier`,value:{bytes:Array.from(As(t))}}});if(!r.data||!r.data.content)throw new Error(`Price feed object ID for feed ID ${t} not found.`);if(r.data.content.dataType!=="moveObject")throw new Error("Price feed type mismatch");return r.data.content.fields.value},Kc=async function(){const t=await this.provider.getDynamicFieldObject({parentId:this.pythStateId,name:{type:"vector<u8>",value:"price_info"}});if(!t.data||!t.data.type)throw new Error("Price Table not found, contract may not be initialized");const e=Bs(t.data.type).typeParams[0];if(typeof e=="object"&&e!==null&&e.name==="PriceIdentifier"&&"address"in e)return{id:t.data.objectId,fieldType:e.address};throw new Error("fieldType not found")},Gc=async function(){return await zt(this,ct,oi).call(this,this.wormholeStateId)},qc=async function(){return await zt(this,ct,oi).call(this,this.pythStateId)},oi=async function(t){const e=await this.provider.getObject({id:t,options:{showContent:!0}});if(e.data?.content?.dataType==="moveObject"&&"upgrade_cap"in e.data.content.fields)return e.data.content.fields.upgrade_cap.fields.package;throw new Error(`Cannot fetch package ID for object ${t}`)},Wc=async function(){const t=await this.provider.getObject({id:this.pythStateId,options:{showContent:!0}});if(!t.data||t.data.content?.dataType!=="moveObject")throw new Error("Unable to fetch Pyth state object");return t.data.content.fields.base_update_fee};class Zc{constructor(e){if(this.client=e.client,this.network=e.network||"mainnet",this.network==="mainnet")this.config=Wa.mainnet;else if(this.network==="testnet")this.config=Wa.testnet;else throw new Error("Invalid network")}async getPriceList(){if(!this.config.suins)throw new Error("Suins object ID is not set");if(!this.config.packageId)throw new Error("Price list config not found");const e=await this.client.getDynamicFieldObject({parentId:this.config.suins,name:{type:Ls(this.config.packageIdV1,Lh(this.config.packageIdPricing)),value:{dummy_field:!1}}});if(!e?.data?.content||e.data.content.dataType!=="moveObject"||!("fields"in e.data.content))throw new Error("Price list not found or content is invalid");const n=e.data.content.fields;if(!n.value||!n.value.fields||!n.value.fields.pricing)throw new Error("Pricing fields not found in the price list");const r=n.value.fields.pricing.fields.contents,s=new Map;for(const i of r){const o=i.fields.key.fields,a=[Number(o.pos0),Number(o.pos1)],c=Number(i.fields.value);s.set(a,c)}return s}async getRenewalPriceList(){if(!this.config.suins)throw new Error("Suins object ID is not set");if(!this.config.packageId)throw new Error("Price list config not found");const e=await this.client.getDynamicFieldObject({parentId:this.config.suins,name:{type:Ls(this.config.packageIdV1,Vh(this.config.packageIdPricing)),value:{dummy_field:!1}}});if(!e||!e.data||!e.data.content||e.data.content.dataType!=="moveObject"||!("fields"in e.data.content))throw new Error("Price list not found or content structure is invalid");const n=e.data.content.fields;if(!n.value||!n.value.fields||!n.value.fields.config||!n.value.fields.config.fields.pricing||!n.value.fields.config.fields.pricing.fields.contents)throw new Error("Pricing fields not found in the price list");const r=n.value.fields.config.fields.pricing.fields.contents,s=new Map;for(const i of r){const o=i.fields.key.fields,a=[Number(o.pos0),Number(o.pos1)],c=Number(i.fields.value);s.set(a,c)}return s}async getCoinTypeDiscount(){if(!this.config.suins)throw new Error("Suins object ID is not set");if(!this.config.packageId)throw new Error("Price list config not found");const e=await this.client.getDynamicFieldObject({parentId:this.config.suins,name:{type:Ls(this.config.packageIdV1,zh(this.config.payments.packageId)),value:{dummy_field:!1}}});if(!e||!e.data||!e.data.content||e.data.content.dataType!=="moveObject"||!("fields"in e.data.content))throw new Error("dfValue not found or content structure is invalid");const n=e.data.content.fields;if(!n.value||!n.value.fields||!n.value.fields.base_currency||!n.value.fields.base_currency.fields||!n.value.fields.base_currency.fields.name||!n.value.fields.currencies||!n.value.fields.currencies.fields||!n.value.fields.currencies.fields.contents)throw new Error("Required fields are missing in dfValue");const s=n.value.fields.currencies.fields.contents,i=new Map;for(const o of s){const a=o.fields.key.fields.name,c=Number(o.fields.value.fields.discount_percentage);i.set(a,c)}return i}async getNameRecord(e){if(!Rs(e))throw new Error("Invalid SuiNS name");if(!this.config.registryTableId)throw new Error("Suins package ID is not set");const n=await this.client.getDynamicFieldObject({parentId:this.config.registryTableId,name:{type:Dh(this.config.packageIdV1),value:$s(e,"dot").split(".").reverse()}}),r=n.data?.content;if(n.error?.code==="dynamicFieldNotFound")return null;if(n.error||!r||r.dataType!=="moveObject")throw new Error("Name record not found. This domain is not registered.");const s=r.fields,i={};return s.value.fields.data.fields.contents.forEach(o=>{i[o.fields.key]=o.fields.value}),{name:e,nftId:s.value.fields?.nft_id,targetAddress:s.value.fields?.target_address,expirationTimestampMs:s.value.fields?.expiration_timestamp_ms,data:i,avatar:i.avatar,contentHash:i.content_hash,walrusSiteId:i.walrus_site_id}}async calculatePrice({name:e,years:n,isRegistration:r=!0}){if(!Rs(e))throw new Error("Invalid SuiNS name");if(Nh(n),Mh(e))throw new Error("Subdomains do not have a registration fee");const s=$s(e,"dot").split(".")[0].length,i=await this.getPriceList(),o=await this.getRenewalPriceList();let a=n,c=0;if(r){for(const[[u,l],h]of i.entries())if(s>=u&&s<=l){c+=h,a-=1;break}}for(const[[u,l],h]of o.entries())if(s>=u&&s<=l){c+=a*h;break}return c}async getPriceInfoObject(e,n){const r=this.network==="testnet"?"https://hermes-beta.pyth.network":"https://hermes.pyth.network",s=new Vg(r),i=[n],o=await s.getPriceFeedsUpdateData(i),a=this.config.pyth.wormholeStateId,c=this.config.pyth.pythStateId;return await new zg(this.client,c,a).updatePriceFeeds(e,o,i)}async getObjectType(e){const n=await this.client.getObject({id:e,options:{showType:!0}});if(n&&n.data&&n.data.type)return n.data.type;throw new Error(`Type information not found for object ID: ${e}`)}}const Fg={Ed25519Keypair:Xt,Ed25519PublicKey:ys,Transaction:ga,TransactionBlock:ga,SuinsClient:Zc,getFullnodeUrl:window.SuiSDK?.Sui?.getFullnodeUrl||null,SuiClient:window.SuiSDK?.Sui?.SuiClient||null,normalizeSuiAddress:window.SuiSDK?.Sui?.normalizeSuiAddress||null},Hg={fromBase64:we},Kg={SuinsClient:Zc};window.SuiSDK?(window.SuiSDK.Sui={...window.SuiSDK.Sui,...Fg},window.SuiSDK.BCS={...window.SuiSDK.BCS,...Hg},window.SuiSDK.SuiNS={...window.SuiSDK.SuiNS,...Kg}):console.error("SuiSDK not found - transaction tier cannot load without core tier")})();
